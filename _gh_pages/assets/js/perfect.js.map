{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 54bb7ca0d4cd75184733","webpack:///./components/base/component.js","webpack:///./components/base/util.js","webpack:///./components/elements/menu/list-menu/list-menu.js","webpack:///./components/perfect.js","webpack:///./components/scroll-spy/scrollSpy.js","webpack:///./components/scroll-spy/plugins/catalogueSpy.js","webpack:///./components/ripple/ripple.js","webpack:///./components/ripple/util.js","webpack:///./components/elements/menu/list-menu/util.js","webpack:///./components/forms/select/select.js","webpack:///./components/elements/paging/paging.js"],"names":["Component","element","config","Object","keys","forEach","key","init","evtType","handler","addEventListener","removeEventListener","detail","bubbles","cancelable","evt","CustomEvent","document","createEvent","initCustomEvent","dispatchEvent","getUuid","offset","position","MAX_UUID","isWindow","elem","window","getWindow","nodeType","defaultView","getStyles","property","extra","styles","ownerDocument","getComputedStyle","cssValue","getPropertyValue","num","parseFloat","isFinite","getOffsetParent","offsetParent","tagName","toLowerCase","documentElement","prefix","_prefix","Math","random","getElementById","isWheel","ua","navigator","userAgent","test","el","docElem","win","doc","getClientRects","length","top","left","rect","getBoundingClientRect","width","height","pageYOffset","clientTop","pageXOffset","clientLeft","offsetXY","parentOffset","util","dom","body","reg","classes","ELEMENT","LIST_MENU_ITEMS","OPEN","ANIMATING","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT","LIST_ITEM","ACTIVE","EXPANDED","strings","ITEMS_SELECTOR","LIST_ITEM_SELECTOR","LIST_ITEM_BRANCH_SELECTOR","LIST_ITEM_LEAF_SELECTOR","SELECTED_EVENT","CANCEL_EVENT","ARIA_DISABLED_ATTR","ARIA_CONTROLS_ATTR","ARIA_CONTROLS_CLICK","ARIA_LEVEL_ATTR","ARIA_LEVEL_BRANCH","numbers","SELECTED_TRIGGER_DELAY","TRANSITION_DURATION_MS","TRANSITION_SCALE_ADJUSTMENT_X","TRANSITION_SCALE_ADJUSTMENT_Y","TRANSITION_X1","TRANSITION_Y1","TRANSITION_X2","TRANSITION_Y2","ListMenu","isOpen","value","show","hide","filterDivider","handleClickMenu","e","target","getAttribute","node","parentNode","firstElementChild","classList","remove","nextElementSibling","add","targetIndex","leafItems","indexOf","selectedTriggerTimerId","setTimeout","adapter","removeExpandClass","setActiveItemAtIndex","notifySelected","handleKeyboardUp","altKey","ctrlKey","metaKey","keyCode","isEnter","isSpace","isEscape","notifyCancel","close","handleKeyboardDown","shiftKey","isTab","isArrowUp","isArrowDown","focusedItemIndex","getFocusedItemIndex","lastItemIndex","getNumberOfItems","focusItemAtIndex","preventDefault","isFocused","handleDocumentClick","eventTargetHasClass","expandedEl","querySelectorAll","call","items","style","removeProperty","handleItemScroll","step","visibleItemHeight","maxItemHeight","stopPropagation","upDown","wheelDelta","transform","itemsContainer","y","exec","abs","maxOffset","min","max","undefined","selectedFirstOption","previousFocus","createAdapter","startScaleX","startScaleY","targetScale","scaleX","scaleY","running","animationRequestId","dimensions","startTime","itemHeight","previousActiveItems","previousActiveItemsIndex","render","addClass","className","removeClass","hasClass","contains","hasNecessaryDom","Boolean","getInnerDimensions","offsetWidth","offsetHeight","hasAnchor","parentElement","getAnchorDimensions","getWindowDimensions","innerWidth","innerHeight","setScale","x","setInnerScale","getYParamsForItemAtIndex","index","offsetTop","setTransitionDelayForItemAtIndex","setProperty","push","unshift","clearActiveItem","item","emit","leafIndex","activeItemIndex","saveFocus","activeElement","restoreFocus","focus","setTransformOrigin","origin","setPosition","right","bottom","getAccurateTime","performance","now","querySelector","slice","Error","addEventListeners","clearTimeout","cancelAnimationFrame","removeEventListeners","focusIndex","requestAnimationFrame","applyTransitionDelays","autoPosition","animateMenu","focusOnOpen","disabled","removeTransitionDelays","lineHeight","paddingTop","paddingBottom","parseInt","calcItemHeight","maxHeight","visibleItemNum","floor","i","numItems","transitionDuration","start","itemTop","itemDelayFraction","itemDelay","toFixed","vertical","horizontal","anchor","windowDimensions","topOverflow","bottomOverflow","extendsBeyondTopBounds","leftOverflow","rightOverflow","extendsBeyondLeftBounds","animationLoop","time","currentTime","currentTimeX","currentTimeY","easeX","easeY","invScaleX","invScaleY","ScrollSpy","CatalogueSpy","Ripple","Select","Paging","Array","prototype","map","scrollEvent","event","process","scrollElement","getConfig","menu","menuClsPrefix","extend","menuSelector","offsets","targets","activeTarget","scrollHeight","extendStyle","createElement","innerHTML","getElementsByTagName","append","immedLoad","initMenus","generateMenus","menuPanel","$menuPanel","menuElements","currentTarget","dataset","offsetMethod","container","targetEl","offsetBase","getScrollTop","scrollTo","blur","pluginConfig","plugins","isArray","plugin","instance","mount","refresh","_config","defaultConfig","id","autoMethod","method","menus","entries","level","children","depth","parent","text","root","prevLevel","lastNode","entry","ancestor","html","generateMenusHtml","nodes","menuCls","len","newChild","href","setAttribute","insertBefore","firstChild","getScrollHeight","selector","targetSelector","targetBCR","sort","a","b","scrollTop","maxScroll","getOffsetHeight","activate","clearActiveCls","isActiveTarget","queries","split","lastSelector","parentEls","query","catalog","it","join","$link","scrollMenu","activeEls","unmount","animation","resizeEvt","scrollSpy","menuHeight","clientHeight","adjustMenuHeight","handleScroll","console","info","prevent","menuRect","UNBOUNDED","FOCUSED","INACTIVE","VAR_SIZE","VAR_LEFT","VAR_TOP","VAR_SCALE","VAR_TRANSLATE_START","VAR_TRANSLATE_END","PADDING","INITIAL_ORIGIN_SCALE","DEACTIVATION_TIMEOUT_MS","DEACTIVATION_MS","DEACTIVATION_ACTIVATION_PAIRS","mouseup","pointerup","touchend","keyup","unbounded","ripple","matches","HTMLElement","isSupportsCssVars","isUnbounded","isActive","isDisabled","registerImpactHandler","deregisterImpactHandler","registerResizeHandler","deregisterResizeHandler","updateCssVariable","varName","removeCssVariable","computeBoundingRect","getWindowPageOffset","isActivated","hasDeactivationUXRun","wasActivatedByPointer","wasElementMadeActive","activationStartTime","activationEvent","isProgrammatic","layoutFrame","rippleSize","activationState","resetActivationState","duration","initialSize","maxRadius","unboundedCoords","scale","activationTimer","deactivationRemovalTimer","activationAnimationHasEnded","activationTimerCallback","runDeactivationAnimation","listenerInfos","deactivate","listeners","_init","isSupported","layoutInternal","rippleRect","maxDim","diameter","sqrt","pow","updateCssVariableValue","round","k","layout","type","Date","animateActivation","translateStart","translateEnd","getTranslationCoords","startPoint","endPoint","rmActivationClasses","activationHasEnded","evtObject","state","animateDeactivation","actualActivationType","expectedActivationType","needsDeactivationUX","needsActualDeactivation","supportsCssVariables_","supportsPassive_","detectEdgePseudoVarBug","windowObj","appendChild","computedStyle","hasPseudoVarBug","borderTopStyle","supportsCssVariables","forceRefresh","supportsFunctionPresent","CSS","supports","explicitlySupportsCssVars","weAreFeatureDetectingSafari10plus","applyPassive","globalObj","passive","getMatchesProperty","HTMLElementPrototype","filter","p","pop","getNormalizedEventCoords","ev","pageOffset","clientRect","documentX","documentY","normalizedX","normalizedY","changedTouches","pageX","pageY","storedTransformPropertyName","getTransformPropertyName","clamp","bezierProgress","x1","y1","x2","y2","getBezierCoordinate","solvePositionFromXValue","t","c1","c2","ic0","ic1","ic2","xVal","epsilon","maxIterations","tMin","tMax","derivative","getElementIndexOfParent","getRootSelectedOption","parentEl","DISABLED","SCROLL_LOCK","SELECT_MENU_FIXED","SELECT_INNER","CHANGE_EVENT","SELECT_MENU","SELECT_SELECTED_TEXT","openerKeys","forType","getSelectedValue","displayHandler","isMenuOpen","open","selectionHandler","compareSelectedIndex","getLeafOptionIndex","setSelectedIndex","notifyChange","cancelHandler","selectedIndex","isScrollLock","isFixed","isText","options","getTextForOptionAtIndex","initialSyncWithDOM","setAttr","attr","rmAttr","removeAttribute","selectInner","makeTabbable","tabIndex","makeUntabbable","setMenuElStyle","propertyName","menuEl","setMenuElAttr","rmMenuElAttr","getMenuElOffsetHeight","openMenu","setSelectedTextContent","selectedTextContent","selectedText","textContent","getNumberOfOptions","setAttrForOptionAtIndex","rmAttrForOptionAtIndex","valueText","getWindowInnerHeight","addBodyClass","removeBodyClass","menuFactory","selectedOption","selectedOptions","idx","handleDisplayKeyboard","listen","unlisten","EVENT_PHASE_AT_TARGET","eventPhase","isSpaceDown","isOpenerKey","some","prevSelectedIndex","trim","disableScroll","selectedRootOption","setMenuStylesForOpen","enableScroll","itemOffsetTop","adjustedTop","overflowsTop","overflowsBottom","option","PAGING_ITEM","handleSwitchPage","pageNum","pagenum","handleChangePage","input","previousElementSibling","Number","isNaN","handleChangePerPage","pageSize","loadData","loadPageData","then","json","data","totalCount","totalPages","renderPaging","pageArray","calculatePage","pageItems","pagingControl","renderPagingControl","recordPerPage","jumpControl"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;AC7DA;;;IAGMA,S;;;;;AAEJ;;;;;;0BAMaC,O,EAAS;AACpB,aAAO,IAAID,SAAJ,CAAcC,OAAd,CAAP;AACD;;;AAED,qBAAYA,OAAZ,EAAkC;AAAA;;AAAA,QAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAChC,SAAKD,OAAL,GAAeA,OAAf;AACA;AACAE,WAAOC,IAAP,CAAYF,MAAZ,EAAoBG,OAApB,CAA4B,UAACC,GAAD,EAAS;AACnC,YAAKA,GAAL,IAAYJ,OAAOI,GAAP,CAAZ;AACD,KAFD;;AAIA,SAAKC,IAAL;AACD;;;;2BAEM,CAGN;AAFC;AACA;;;AAGF;;;;8BACU,CAET;AADC;;;AAGF;;;;;;;;2BAKOC,O,EAASC,O,EAAS;AACvB,WAAKR,OAAL,CAAaS,gBAAb,CAA8BF,OAA9B,EAAuCC,OAAvC;AACD;;AAED;;;;;;;;6BAKSD,O,EAASC,O,EAAS;AACzB,WAAKR,OAAL,CAAaU,mBAAb,CAAiCH,OAAjC,EAA0CC,OAA1C;AACD;;AAED;;;;;;;;;;yBAOKD,O,EAASI,M,EAA6C;AAAA,UAArCC,OAAqC,uEAA3B,KAA2B;AAAA,UAApBC,UAAoB,uEAAP,KAAO;;AACzD,UAAIC,YAAJ;AACA,UAAI,OAAOC,WAAP,KAAuB,UAA3B,EAAuC;AACrCD,cAAM,IAAIC,WAAJ,CAAgBR,OAAhB,EAAyB;AAC7BI,wBAD6B;AAE7BC,0BAF6B;AAG7BC;AAH6B,SAAzB,CAAN;AAKD,OAND,MAMO;AACLC,cAAME,SAASC,WAAT,CAAqB,aAArB,CAAN;AACAH,YAAII,eAAJ,CAAoBX,OAApB,EAA6BK,OAA7B,EAAsCC,UAAtC,EAAkDF,MAAlD;AACD;;AAED,WAAKX,OAAL,CAAamB,aAAb,CAA2BL,GAA3B;AACD;;;;;;kBAGYf,S;;;;;;;;;;;;QC9BCqB,O,GAAAA,O;QA+BAC,M,GAAAA,M;QAmCAC,Q,GAAAA,Q;AAjHhB;;AAEA,IAAMC,WAAW,OAAjB;;AAEA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtB,SAAOA,QAAQ,IAAR,IAAgBA,SAASA,KAAKC,MAArC;AACD;;AAED,SAASC,SAAT,CAAmBF,IAAnB,EAAyB;AACvB,SAAOD,SAASC,IAAT,IAAiBA,IAAjB,GAAwBA,KAAKG,QAAL,KAAkB,CAAlB,IAAuBH,KAAKI,WAA3D;AACD;;AAED;;;;;;AAMA,SAASC,SAAT,CAAmB9B,OAAnB,EAA4B+B,QAA5B,EAAsCC,KAAtC,EAA6C;AAC3C,MAAMC,SAASjC,QAAQkC,aAAR,CAAsBL,WAAtB,CAAkCM,gBAAlC,CAAmDnC,OAAnD,EAA4D,IAA5D,CAAf;AACA,MAAI+B,QAAJ,EAAc;AACZ,QAAMK,WAAWH,OAAOI,gBAAP,CAAwBN,QAAxB,KAAqCE,OAAOF,QAAP,CAAtD;AACA,QAAIC,KAAJ,EAAW;AACT,UAAMM,MAAMC,WAAWH,QAAX,CAAZ;AACA,aAAOJ,UAAU,IAAV,IAAkBQ,SAASF,GAAT,CAAlB,GAAkCA,OAAO,CAAzC,GAA6CF,QAApD;AACD;AACD,WAAOA,QAAP;AACD;AACD,SAAOH,MAAP;AACD;;AAED,SAASQ,eAAT,CAAyBhB,IAAzB,EAA+B;AAC7B;AACA,MAAIiB,eAAejB,KAAKiB,YAAxB;;AAEA,SAAOA,gBAAgBjB,KAAKkB,OAAL,CAAaC,WAAb,OAA+B,MAA/C,IACPd,UAAUY,YAAV,EAAwB,UAAxB,MAAwC,QADxC,EACkD;AAChDA,mBAAeA,aAAaA,YAA5B;AACD;AACD,SAAOA,gBAAgB1B,SAAS6B,eAAhC;AACD;;AAED;;;;;AAKO,SAASzB,OAAT,CAAiB0B,MAAjB,EAAyB;AAC9B,MAAIC,UAAUD,MAAd;AACA,KAAG;AACD;AACAC,eAAW,CAAC,EAAEC,KAAKC,MAAL,KAAgB1B,QAAlB,CAAZ,CAFC,CAEwC;AAC1C,GAHD,QAGSP,SAASkC,cAAT,CAAwBH,OAAxB,CAHT;;AAKA,SAAOA,OAAP;AACD;;AAED;AACO,IAAMI,4BAAW,YAAM;AAC5B;AACA;AACA,MAAMC,KAAKC,UAAUC,SAArB;AACA;AACA,MAAI,SAASC,IAAT,CAAcH,EAAd,KAAqB,CAAE,UAAUG,IAAV,CAAeH,EAAf,CAAvB,IAA+C,WAAWG,IAAX,CAAgBH,EAAhB,CAAnD,EAAyE;AAAE;AACzE,WAAO,KAAP;AACD;AACD;AACA,SAAO,IAAP;AACD,CAVsB,EAAhB;;AAYP;;;;;;;;AAQO,SAAS/B,MAAT,CAAgBmC,EAAhB,EAAoB;AACzB,MAAI,CAACA,EAAL,EAAS;AACP;AACD;;AAED,MAAIC,gBAAJ;AAAA,MAAaC,YAAb;AAAA,MAAkBC,YAAlB;;AAEA;AACA;AACA;AACA,MAAI,CAACH,GAAGI,cAAH,GAAoBC,MAAzB,EAAiC;AAC/B,WAAO,EAACC,KAAK,CAAN,EAASC,MAAM,CAAf,EAAP;AACD;;AAED,MAAMC,OAAOR,GAAGS,qBAAH,EAAb;;AAEA;AACA,MAAID,KAAKE,KAAL,IAAcF,KAAKG,MAAvB,EAA+B;AAC7BR,UAAMH,GAAGtB,aAAT;AACAwB,UAAM/B,UAAUgC,GAAV,CAAN;AACAF,cAAUE,IAAId,eAAd;;AAEA,WAAO;AACLiB,WAAKE,KAAKF,GAAL,GAAWJ,IAAIU,WAAf,GAA6BX,QAAQY,SADrC;AAELN,YAAMC,KAAKD,IAAL,GAAYL,IAAIY,WAAhB,GAA8Bb,QAAQc;AAFvC,KAAP;AAID;AACD,SAAOP,IAAP;AACD;;AAED;;;;;AAKO,SAAS1C,QAAT,CAAkBG,IAAlB,EAAwB;AAC7B,MAAI,CAACA,IAAL,EAAW;AACT,WAAO,IAAP;AACD;;AAED,MAAIiB,qBAAJ;AAAA,MAAkB8B,iBAAlB;AAAA,MACEC,eAAe,EAACX,KAAK,CAAN,EAASC,MAAM,CAAf,EADjB;;AAGA,MAAIjC,UAAUL,IAAV,EAAgB,UAAhB,MAAgC,OAApC,EAA6C;AAC3C+C,eAAW/C,KAAKwC,qBAAL,EAAX;AACD,GAFD,MAEO;AACLvB,mBAAeD,gBAAgBhB,IAAhB,CAAf;AACA+C,eAAWnD,OAAOI,IAAP,CAAX;AACA,QAAIA,KAAKkB,OAAL,CAAaC,WAAb,OAA+B,MAAnC,EAA2C;AACzC6B,qBAAepD,OAAOqB,YAAP,CAAf;AACD;AACD+B,iBAAaX,GAAb,IAAoBhC,UAAUY,YAAV,EAAwB,gBAAxB,EAA0C,IAA1C,CAApB;AACA+B,iBAAaV,IAAb,IAAqBjC,UAAUY,YAAV,EAAwB,iBAAxB,EAA2C,IAA3C,CAArB;AACD;;AAED,SAAO;AACLoB,SAAKU,SAASV,GAAT,GAAeW,aAAaX,GAA5B,GAAkChC,UAAUL,IAAV,EAAgB,WAAhB,EAA6B,IAA7B,CADlC;AAELsC,UAAMS,SAAST,IAAT,GAAgBU,aAAaV,IAA7B,GAAoCjC,UAAUL,IAAV,EAAgB,YAAhB,EAA8B,IAA9B;AAFrC,GAAP;AAID;;AAED,IAAMiD,OAAO;AACXtD,kBADW;AAEX+B,kBAFW;AAGX9B,gBAHW;AAIXC;AAJW,CAAb;;kBAOeoD,I;;;;;;;;;;;;;;;AClJf;;;;AACA;;;;;;;;;;;;AACA;;AAEA,IAAMhB,MAAMhC,MAAZ;AACA,IAAMiD,MAAM3D,QAAZ;AACA,IAAM4D,OAAOD,IAAIC,IAAjB;;AAEA,IAAMC,MAAM,wBAAZ;;AAEA;AACA;AACA,IAAMC,UAAU;AACdC,WAAS,WADK;AAEdC,mBAAiB,iBAFH;AAGdC,QAAM,gBAHQ;AAIdC,aAAW,qBAJG;AAKdC,aAAW,qBALG;AAMdC,eAAa,uBANC;AAOdC,gBAAc,wBAPA;AAQdC,aAAW,WARG;AASdC,UAAQ,QATM;AAUdC,YAAU;AAVI,CAAhB;;AAaA;AACA,IAAMC,UAAU;AACdC,kBAAgB,+BADF,EACmC;AACjDC,sBAAoB,4CAFN,EAEoD;AAClEC,6BAA2B,iCAHb,EAGgD;AAC9DC,2BAAyB,uCAJX,EAIoD;AAClEC,kBAAgB,mBALF;AAMdC,gBAAc,iBANA;AAOdC,sBAAoB,eAPN;AAQdC,sBAAoB,eARN;AASdC,uBAAqB,OATP;AAUdC,mBAAiB,YAVH;AAWdC,qBAAmB,QAXL;AAYdZ,YAAU;AAZI,CAAhB;;AAeA,IAAMa,UAAU;AACd;AACAC,0BAAwB,EAFV;AAGd;AACAC,0BAAwB,GAJV;AAKd;AACAC,iCAA+B,GANjB;AAOd;AACAC,iCAA+B,GARjB;AASd;AACAC,iBAAe,CAVD;AAWdC,iBAAe,CAXD;AAYdC,iBAAe,GAZD;AAadC,iBAAe;AAbD,CAAhB;;IAgBMC,Q;;;;;;;AAwBJ;wBACW;AACT,aAAO,KAAKC,MAAZ;AACD;;AAED;;sBACSC,K,EAAO;AACd,UAAIA,KAAJ,EAAW;AACT,aAAKC,IAAL;AACD,OAFD,MAEO;AACL,aAAKC,IAAL;AACD;AACF;;;;;AAtBD;;;;;;0BAMalH,O,EAAmD;AAAA,UAA1CC,MAA0C,uEAAjC,EAACkH,eAAe,cAAhB,EAAiC;;AAC9D,aAAO,IAAIL,QAAJ,CAAa9G,OAAb,EAAsBC,MAAtB,CAAP;AACD;;;wBApBoB;AACnB,aAAO6E,OAAP;AACD;;;wBAEoB;AACnB,aAAOW,OAAP;AACD;;;wBAEoB;AACnB,aAAOY,OAAP;AACD;;;AA0BD,oBAAYrG,OAAZ,EAAqBC,MAArB,EAA6B;AAAA;;AAG3B;AAH2B,oHACrBD,OADqB,EACZC,MADY;;AAAA,UA0O7BmH,eA1O6B,GA0OX,UAACC,CAAD,EAAO;AAAA,UAChBC,MADgB,GACND,CADM,CAChBC,MADgB;AAAA,UAEhBtB,kBAFgB,GAE0CP,OAF1C,CAEhBO,kBAFgB;AAAA,UAEIG,eAFJ,GAE0CV,OAF1C,CAEIU,eAFJ;AAAA,UAEqBC,iBAFrB,GAE0CX,OAF1C,CAEqBW,iBAFrB;AAGvB;;AACA,UAAIkB,OAAOC,YAAP,CAAoBvB,kBAApB,MAA4C,MAAhD,EAAwD;AACtD;AACD;;AAED;AACA,UAAIsB,OAAOC,YAAP,CAAoBpB,eAApB,MAAyCC,iBAA7C,EAAgE;AAC9D;AACA,YAAIoB,OAAOF,OAAOG,UAAP,CAAkBC,iBAA7B;AACA,eAAOF,IAAP,EAAa;AACXA,eAAKG,SAAL,CAAeC,MAAf,CAAsB9C,QAAQU,QAA9B;AACAgC,iBAAOA,KAAKK,kBAAZ;AACD;AACDP,eAAOK,SAAP,CAAiBG,GAAjB,CAAqBhD,QAAQU,QAA7B;AACA;AACD;;AAED;AACA,UAAMuC,cAAc,MAAKC,SAAL,CAAeC,OAAf,CAAuBX,MAAvB,CAApB;AACA,UAAIS,cAAc,CAAlB,EAAqB;AACnB;AACD;;AAED;AACA,UAAI,MAAKG,sBAAT,EAAiC;AAC/B;AACD;;AAED;AACA,YAAKA,sBAAL,GAA8BC,WAAW,YAAM;AAC7C,cAAKD,sBAAL,GAA8B,CAA9B;AACA,cAAKhB,IAAL;;AAEA;AACA,cAAKkB,OAAL,CAAaC,iBAAb;AACA,cAAKD,OAAL,CAAaE,oBAAb,CAAkCP,WAAlC;AACA,cAAKK,OAAL,CAAaG,cAAb;AACD,OAR6B,EAQ3BlC,QAAQC,sBARmB,CAA9B;AASD,KAnR4B;;AAAA,UA2R7BkC,gBA3R6B,GA2RV,UAAC1H,GAAD,EAAS;AAC1B;AACA,UAAIA,IAAI2H,MAAJ,IAAc3H,IAAI4H,OAAlB,IAA6B5H,IAAI6H,OAArC,EAA8C;AAC5C,eAAO,IAAP;AACD;;AAJyB,UAMnBC,OANmB,GAMH9H,GANG,CAMnB8H,OANmB;AAAA,UAMVvI,GANU,GAMHS,GANG,CAMVT,GANU;;AAO1B,UAAMwI,UAAUxI,QAAQ,OAAR,IAAmBuI,YAAY,EAA/C;AACA,UAAME,UAAUzI,QAAQ,OAAR,IAAmBuI,YAAY,EAA/C;AACA,UAAMG,WAAW1I,QAAQ,QAAR,IAAoBuI,YAAY,EAAjD;;AAEA,UAAIC,WAAWC,OAAf,EAAwB;AACtB,cAAK1B,eAAL,CAAqBtG,GAArB;AACD;;AAED,UAAIiI,QAAJ,EAAc;AACZ,cAAKX,OAAL,CAAaY,YAAb;AACA,cAAKC,KAAL;AACD;;AAED,aAAO,IAAP;AACD,KAhT4B;;AAAA,UAyT7BC,kBAzT6B,GAyTR,UAACpI,GAAD,EAAS;AAC5B;AACA,UAAIA,IAAI2H,MAAJ,IAAc3H,IAAI4H,OAAlB,IAA6B5H,IAAI6H,OAArC,EAA8C;AAC5C,eAAO,IAAP;AACD;;AAJ2B,UAMrBC,OANqB,GAMK9H,GANL,CAMrB8H,OANqB;AAAA,UAMZvI,GANY,GAMKS,GANL,CAMZT,GANY;AAAA,UAMP8I,QANO,GAMKrI,GANL,CAMPqI,QANO;;AAO5B,UAAMC,QAAQ/I,QAAQ,KAAR,IAAiBuI,YAAY,CAA3C;AACA,UAAMS,YAAYhJ,QAAQ,SAAR,IAAqBuI,YAAY,EAAnD;AACA,UAAMU,cAAcjJ,QAAQ,WAAR,IAAuBuI,YAAY,EAAvD;AACA,UAAME,UAAUzI,QAAQ,OAAR,IAAmBuI,YAAY,EAA/C;;AAEA,UAAMW,mBAAmB,MAAKnB,OAAL,CAAaoB,mBAAb,EAAzB;AACA,UAAMC,gBAAgB,MAAKrB,OAAL,CAAasB,gBAAb,KAAkC,CAAxD;;AAEA,UAAIP,YAAYC,KAAZ,IAAqBG,qBAAqB,CAA9C,EAAiD;AAC/C,cAAKnB,OAAL,CAAauB,gBAAb,CAA8BF,aAA9B;AACA3I,YAAI8I,cAAJ;AACA,eAAO,KAAP;AACD;;AAED,UAAI,CAACT,QAAD,IAAaC,KAAb,IAAsBG,qBAAqBE,aAA/C,EAA8D;AAC5D,cAAKrB,OAAL,CAAauB,gBAAb,CAA8B,CAA9B;AACA7I,YAAI8I,cAAJ;AACA,eAAO,KAAP;AACD;;AAED;AACA,UAAIP,aAAaC,WAAb,IAA4BR,OAAhC,EAAyC;AACvChI,YAAI8I,cAAJ;AACD;;AAED,UAAIP,SAAJ,EAAe;AACb,YAAIE,qBAAqB,CAArB,IAA0B,MAAKnB,OAAL,CAAayB,SAAb,EAA9B,EAAwD;AACtD,gBAAKzB,OAAL,CAAauB,gBAAb,CAA8BF,aAA9B;AACD,SAFD,MAEO;AACL,gBAAKrB,OAAL,CAAauB,gBAAb,CAA8BJ,mBAAmB,CAAjD;AACD;AACF,OAND,MAMO,IAAID,WAAJ,EAAiB;AACtB,YAAIC,qBAAqBE,aAArB,IAAsC,MAAKrB,OAAL,CAAayB,SAAb,EAA1C,EAAoE;AAClE,gBAAKzB,OAAL,CAAauB,gBAAb,CAA8B,CAA9B;AACD,SAFD,MAEO;AACL,gBAAKvB,OAAL,CAAauB,gBAAb,CAA8BJ,mBAAmB,CAAjD;AACD;AACF;;AAED,aAAO,IAAP;AACD,KAxW4B;;AAAA,UA+W7BO,mBA/W6B,GA+WP,UAAChJ,GAAD,EAAS;AAC7B,UAAI0C,KAAK1C,IAAIwG,MAAb;;AAEA,aAAO9D,MAAMA,OAAOmB,IAAI9B,eAAxB,EAAyC;AACvC,YAAI,MAAKuF,OAAL,CAAa2B,mBAAb,CAAiCvG,EAAjC,EAAqCsB,QAAQQ,SAA7C,CAAJ,EAA6D;AAC3D;AACD;AACD9B,aAAKA,GAAGiE,UAAR;AACD;;AAED,YAAKW,OAAL,CAAaY,YAAb;;AAEA,UAAMgB,aAAa,MAAKhK,OAAL,CAAaiK,gBAAb,CAA8BxE,QAAQD,QAAtC,CAAnB;;AAEA,SAAGpF,OAAH,CAAW8J,IAAX,CAAgBF,UAAhB,EAA4B,UAACxG,EAAD,EAAQ;AAClCA,WAAGmE,SAAH,CAAaC,MAAb,CAAoB9C,QAAQU,QAA5B;AACD,OAFD;;AAIA,YAAK2E,KAAL,CAAW/J,OAAX,CAAmB,UAACoD,EAAD,EAAQ;AACzBA,WAAG4G,KAAH,CAASC,cAAT,CAAwB,SAAxB;AACD,OAFD;;AAIA,YAAKnD,IAAL,CAAUpG,GAAV;AACD,KAtY4B;;AAAA,UA4Y7BwJ,gBA5Y6B,GA4YV,UAACxJ,GAAD,EAAS;AAC1B,UAAMyJ,OAAO,EAAb;;AAEA,UAAI,MAAKC,iBAAL,IAA0B,MAAKC,aAAnC,EAAkD;AAChD3J,YAAI8I,cAAJ;AACA9I,YAAI4J,eAAJ;AACD;;AAED;AACA,UAAIC,eAAJ;AAT0B,UAUnBhK,MAVmB,GAUGG,GAVH,CAUnBH,MAVmB;AAAA,UAUXiK,UAVW,GAUG9J,GAVH,CAUX8J,UAVW;;AAW1B,UAAIjK,MAAJ,EAAY;AACV,YAAIA,SAAS,CAAb,EAAgB;AAAE;AAChBgK,mBAAS,IAAT;AACD,SAFD,MAEO,IAAIhK,SAAS,CAAb,EAAgB;AAAE;AACvBgK,mBAAS,MAAT;AACD;AACF,OAND,MAMO,IAAIC,UAAJ,EAAgB;AAAE;AACvB,YAAIA,aAAa,CAAjB,EAAoB;AAAE;AACpBD,mBAAS,IAAT;AACD;AACD,YAAIC,aAAa,CAAjB,EAAoB;AAAE;AACpBD,mBAAS,MAAT;AACD;AACF;;AAxByB,UA0BnBE,SA1BmB,GA0BN,MAAKC,cAAL,CAAoBV,KA1Bd,CA0BnBS,SA1BmB;;;AA4B1B,UAAIE,IAAIlG,IAAImG,IAAJ,CAASH,SAAT,CAAR;AACAE,UAAIA,IAAIxI,WAAWwI,EAAE,CAAF,CAAX,EAAiB,EAAjB,CAAJ,GAA2B,CAA/B;;AAEA,UAAKJ,WAAW,IAAX,IAAmBI,MAAM,CAA1B,IAAiCJ,WAAW,MAAX,IAAqB3H,KAAKiI,GAAL,CAASF,CAAT,MAAgB,MAAKG,SAA/E,EAA2F;AACzF;AACD;;AAED,UAAIP,WAAW,IAAX,IAAmBI,IAAI,CAA3B,EAA8B;AAC5B,cAAKD,cAAL,CAAoBV,KAApB,CAA0BS,SAA1B,mBAAoD7H,KAAKmI,GAAL,CAASJ,IAAIR,IAAb,EAAmB,CAAnB,CAApD;AACD,OAFD,MAEO,IAAII,WAAW,MAAX,IAAqB3H,KAAKiI,GAAL,CAASF,CAAT,IAAc,MAAKG,SAA5C,EAAuD;AAC5D,cAAKJ,cAAL,CAAoBV,KAApB,CAA0BS,SAA1B,mBAAoD7H,KAAKoI,GAAL,CAASL,IAAIR,IAAb,EAAmB,CAAC,MAAKW,SAAzB,CAApD;AACD;AACF,KApb4B;;AAI3B,QAAI,MAAK/D,aAAL,KAAuBkE,SAA3B,EAAsC;AACpC,YAAKlE,aAAL,GAAqB,cAArB;AACD;;AAED;AACA,QAAI,MAAKmE,mBAAL,KAA6BD,SAAjC,EAA4C;AAC1C,YAAKC,mBAAL,GAA2B,IAA3B;AACD;;AAED;AACA,UAAKC,aAAL,GAAqB,IAArB;;AAEA;AACA,UAAKnD,OAAL,GAAe,MAAKoD,aAAL,EAAf;;AAEA;AACA,UAAKzE,MAAL,GAAc,KAAd;AACA;AACA,UAAK0E,WAAL,GAAmB,CAAnB;AACA;AACA,UAAKC,WAAL,GAAmB,CAAnB;AACA;AACA,UAAKC,WAAL,GAAmB,CAAnB;AACA;AACA;AACA,UAAKC,MAAL,GAAc,CAAd;AACA;AACA;AACA,UAAKC,MAAL,GAAc,CAAd;AACA;AACA;AACA,UAAKC,OAAL,GAAe,KAAf;AACA;AACA,UAAK5D,sBAAL,GAA8B,CAA9B;AACA;AACA,UAAK6D,kBAAL,GAA0B,CAA1B;AACA;AACA;AACA,UAAKC,UAAL,GAAkB,IAAlB;AACA;AACA;AACA,UAAKC,SAAL,GAAiB,CAAjB;AACA;AACA;AACA,UAAKC,UAAL,GAAkB,CAAlB;;AAEA,UAAKC,mBAAL,GAA2B,IAA3B,CAlD2B,CAkDM;AACjC,UAAKC,wBAAL,GAAgC,IAAhC,CAnD2B,CAmDW;;AAEtC,UAAKC,MAAL;AArD2B;AAsD5B;;AAED;;;;;;;;oCAIgB;AAAA;;AACd,aAAO;AACLC,kBAAU,kBAACC,SAAD;AAAA,iBAAe,OAAKvM,OAAL,CAAa2H,SAAb,CAAuBG,GAAvB,CAA2ByE,SAA3B,CAAf;AAAA,SADL;AAELC,qBAAa,qBAACD,SAAD;AAAA,iBAAe,OAAKvM,OAAL,CAAa2H,SAAb,CAAuBC,MAAvB,CAA8B2E,SAA9B,CAAf;AAAA,SAFR;AAGLE,kBAAU,kBAACF,SAAD;AAAA,iBAAe,OAAKvM,OAAL,CAAa2H,SAAb,CAAuB+E,QAAvB,CAAgCH,SAAhC,CAAf;AAAA,SAHL;AAILI,yBAAiB;AAAA,iBAAMC,QAAQ,OAAK9B,cAAb,CAAN;AAAA,SAJZ;AAKLf,6BAAqB,6BAACzC,MAAD,EAASiF,SAAT;AAAA,iBAAuBjF,OAAOK,SAAP,CAAiB+E,QAAjB,CAA0BH,SAA1B,CAAvB;AAAA,SALhB;AAMLM,4BAAoB,8BAAM;AAAA,cACjB/B,cADiB,UACjBA,cADiB;;AAExB,iBAAO,EAAC5G,OAAO4G,eAAegC,WAAvB,EAAoC3I,QAAQ2G,eAAeiC,YAA3D,EAAP;AACD,SATI;AAULC,mBAAW;AAAA,iBAAM,OAAKhN,OAAL,CAAaiN,aAAb,IAA8B,OAAKjN,OAAL,CAAaiN,aAAb,CAA2BtF,SAA3B,CAAqC+E,QAArC,CAA8C,aAA9C,CAApC;AAAA,SAVN;AAWLQ,6BAAqB;AAAA,iBAAM,OAAKlN,OAAL,CAAaiN,aAAb,CAA2BhJ,qBAA3B,EAAN;AAAA,SAXhB;AAYLkJ,6BAAqB,+BAAM;AACzB,iBAAO,EAACjJ,OAAOR,IAAI0J,UAAZ,EAAwBjJ,QAAQT,IAAI2J,WAApC,EAAP;AACD,SAdI;AAeLC,kBAAU,kBAACC,CAAD,EAAIxC,CAAJ,EAAU;AAClB,iBAAK/K,OAAL,CAAaoK,KAAb,CAAmB,oCAAyB1G,GAAzB,CAAnB,eAA6D6J,CAA7D,UAAmExC,CAAnE;AACD,SAjBI;AAkBLyC,uBAAe,uBAACD,CAAD,EAAIxC,CAAJ,EAAU;AACvB,iBAAKD,cAAL,CAAoBV,KAApB,CAA0B,oCAAyB1G,GAAzB,CAA1B,eAAoE6J,CAApE,UAA0ExC,CAA1E;AACD,SApBI;AAqBLrB,0BAAkB;AAAA,iBAAM,OAAKS,KAAL,CAAWtG,MAAjB;AAAA,SArBb;AAsBL4J,kCAA0B,kCAACC,KAAD,EAAW;AAAA,6BACY,OAAKvD,KAAL,CAAWuD,KAAX,CADZ;AAAA,cACjB5J,GADiB,gBAC5B6J,SAD4B;AAAA,cACExJ,MADF,gBACZ4I,YADY;;AAEnC,iBAAO,EAACjJ,QAAD,EAAMK,cAAN,EAAP;AACD,SAzBI;AA0BLyJ,0CAAkC,0CAACF,KAAD,EAAQ1G,KAAR;AAAA,iBAChC,OAAKmD,KAAL,CAAWuD,KAAX,EAAkBtD,KAAlB,CAAwByD,WAAxB,CAAoC,kBAApC,EAAwD7G,KAAxD,CADgC;AAAA,SA1B7B;AA4BLsB,8BAAsB,8BAACoF,KAAD,EAAW;AAC/B,cAAI,OAAKvB,mBAAT,EAA8B;AAC5B,mBAAKA,mBAAL,CAAyB/L,OAAzB,CAAiC,UAACoD,EAAD,EAAQ;AACvCA,iBAAGmE,SAAH,CAAaC,MAAb,CAAoB9C,QAAQS,MAA5B;AACD,aAFD;AAGD;;AAED,iBAAKyC,SAAL,CAAe0F,KAAf,EAAsB/F,SAAtB,CAAgCG,GAAhC,CAAoChD,QAAQS,MAA5C;;AAEA,iBAAK4G,mBAAL,GAA2B,EAA3B;AACA,iBAAKC,wBAAL,GAAgC,EAAhC,CAV+B,CAUK;;AAEpC,iBAAKD,mBAAL,CAAyB2B,IAAzB,CAA8B,OAAK9F,SAAL,CAAe0F,KAAf,CAA9B;AACA,iBAAKtB,wBAAL,CAA8B0B,IAA9B,CAAmC,mCAAwB,OAAK9F,SAAL,CAAe0F,KAAf,CAAxB,EAA+C,OAAKvG,aAApD,CAAnC;AACA,cAAIM,aAAa,OAAKO,SAAL,CAAe0F,KAAf,EAAsBjG,UAAtB,CAAiCA,UAAlD;;AAEA;AACA,iBAAOA,cAAcA,WAAWE,SAAX,CAAqB+E,QAArB,CAA8B5H,QAAQQ,SAAtC,CAArB,EAAuE;AACrEmC,uBAAWE,SAAX,CAAqBG,GAArB,CAAyBhD,QAAQS,MAAjC;AACA,mBAAK4G,mBAAL,CAAyB4B,OAAzB,CAAiCtG,UAAjC;AACA,mBAAK2E,wBAAL,CAA8B2B,OAA9B,CAAsC,mCAAwBtG,UAAxB,EAAoC,OAAKN,aAAzC,CAAtC;AACAM,yBAAaA,WAAWA,UAAX,CAAsBA,UAAnC;AACD;AACF,SAnDI,EAmDF;AACHuG,yBAAiB,2BAAM;AACrB,iBAAKhG,SAAL,CAAe5H,OAAf,CAAuB,UAAC6N,IAAD,EAAU;AAC/BA,iBAAKtG,SAAL,CAAeC,MAAf,CAAsB9C,QAAQS,MAA9B;AACD,WAFD;AAGD,SAxDI,EAwDF;AACH8C,2BAAmB,6BAAM;AACvB,aAAGjI,OAAH,CAAW8J,IAAX,CAAgB,OAAKlK,OAAL,CAAaiK,gBAAb,CAA8BxE,QAAQG,yBAAtC,CAAhB,EAAkF,UAACpC,EAAD,EAAQ;AACxFA,eAAGmE,SAAH,CAAaC,MAAb,CAAoB9C,QAAQU,QAA5B;AACD,WAFD;AAGD,SA7DI;AA8DL+C,wBAAgB,0BAAM;AACpB,iBAAK2F,IAAL,CAAUzI,QAAQK,cAAlB,EAAkC;AAChC4H,mBAAO,OAAKtB,wBADoB;AAEhC+B,uBAAW,OAAKC,eAFgB,EAEC;AACjCjE,mBAAO,OAAKgC;AAHoB,WAAlC;AAKD,SApEI,EAoEF;AACHnD,sBAAc;AAAA,iBAAM,OAAKkF,IAAL,CAAUzI,QAAQM,YAAlB,EAAgC,EAAhC,CAAN;AAAA,SArET;AAsELsI,mBAAW,qBAAM;AACf,iBAAK9C,aAAL,GAAqB5G,IAAI2J,aAAzB;AACD,SAxEI;AAyELC,sBAAc,wBAAM;AAClB,cAAI,OAAKhD,aAAT,EAAwB;AACtB,mBAAKA,aAAL,CAAmBiD,KAAnB;AACD;AACF,SA7EI;AA8EL3E,mBAAW;AAAA,iBAAMlF,IAAI2J,aAAJ,KAAsB,OAAKtO,OAAjC;AAAA,SA9EN;AA+ELwO,eAAO;AAAA,iBAAM,OAAKxO,OAAL,CAAawO,KAAb,EAAN;AAAA,SA/EF;AAgFLhF,6BAAqB;AAAA,iBAAM,OAAKW,KAAL,CAAWlC,OAAX,CAAmBtD,IAAI2J,aAAvB,CAAN;AAAA,SAhFhB;AAiFL3E,0BAAkB,0BAAC+D,KAAD;AAAA,iBAAW,OAAK1F,SAAL,CAAe0F,KAAf,EAAsBc,KAAtB,EAAX;AAAA,SAjFb;AAkFLC,4BAAoB,4BAACC,MAAD,EAAY;AAC9B,iBAAK1O,OAAL,CAAaoK,KAAb,CAAsB,oCAAyB1G,GAAzB,CAAtB,gBAAgEgL,MAAhE;AACD,SApFI;AAqFLC,qBAAa,qBAACrN,QAAD,EAAc;AACzB,iBAAKtB,OAAL,CAAaoK,KAAb,CAAmBrG,IAAnB,GAA0B,UAAUzC,QAAV,GAAqBA,SAASyC,IAA9B,GAAqC,IAA/D;AACA,iBAAK/D,OAAL,CAAaoK,KAAb,CAAmBwE,KAAnB,GAA2B,WAAWtN,QAAX,GAAsBA,SAASsN,KAA/B,GAAuC,IAAlE;AACA,iBAAK5O,OAAL,CAAaoK,KAAb,CAAmBtG,GAAnB,GAAyB,SAASxC,QAAT,GAAoBA,SAASwC,GAA7B,GAAmC,IAA5D;AACA,iBAAK9D,OAAL,CAAaoK,KAAb,CAAmByE,MAAnB,GAA4B,YAAYvN,QAAZ,GAAuBA,SAASuN,MAAhC,GAAyC,IAArE;AACD,SA1FI;AA2FLC,yBAAiB;AAAA,iBAAMpL,IAAIqL,WAAJ,CAAgBC,GAAhB,EAAN;AAAA,SA3FZ,CA2FyC;AA3FzC,OAAP;AA6FD;;;2BAEM;AAAA,UACEtJ,cADF,GACiED,OADjE,CACEC,cADF;AAAA,UACkBC,kBADlB,GACiEF,OADjE,CACkBE,kBADlB;AAAA,UACsCE,uBADtC,GACiEJ,OADjE,CACsCI,uBADtC;;AAGL;;AACA,WAAKiF,cAAL,GAAsB,KAAK9K,OAAL,CAAaiP,aAAb,CAA2BvJ,cAA3B,CAAtB;AACA;AACA,WAAKyE,KAAL,GAAa,GAAG+E,KAAH,CAAShF,IAAT,CAAc,KAAKY,cAAL,CAAoBb,gBAApB,CAAqCtE,kBAArC,CAAd,CAAb;;AAEA;AACA,WAAKqC,SAAL,GAAiB,GAAGkH,KAAH,CAAShF,IAAT,CAAc,KAAKY,cAAL,CAAoBb,gBAApB,CAAqCpE,uBAArC,CAAd,CAAjB;;AAEA,UAAI,KAAKuI,eAAL,KAAyB/C,SAAzB,IAAsC,KAAKC,mBAA/C,EAAoE;AAClE,aAAK8C,eAAL,GAAuB,CAAvB;AACD;AACF;;AAED;;;;6BACS;AAAA,UACArJ,OADA,GACiBD,OADjB,CACAC,OADA;AAAA,UACSE,IADT,GACiBH,OADjB,CACSG,IADT;;;AAGP,UAAI,CAAC,KAAKmD,OAAL,CAAaqE,QAAb,CAAsB1H,OAAtB,CAAL,EAAqC;AACnC,cAAM,IAAIoK,KAAJ,+EAA+BpK,OAA/B,OAAN;AACD;;AAED,UAAI,CAAC,KAAKqD,OAAL,CAAauE,eAAb,EAAL,EAAqC;AACnC,cAAM,IAAIwC,KAAJ,CAAU,sBAAV,CAAN;AACD;;AAED;AACA,UAAI,KAAK/G,OAAL,CAAaqE,QAAb,CAAsBxH,IAAtB,CAAJ,EAAiC;AAC/B,aAAK8B,MAAL,GAAc,IAAd;AACD;;AAED;AACA,WAAKqB,OAAL,CAAa4F,eAAb;AACA;AACA,UAAI,KAAKI,eAAL,KAAyB/C,SAA7B,EAAwC;AACtC,aAAKjD,OAAL,CAAaE,oBAAb,CAAkC,KAAK8F,eAAvC;AACD;;AAED,WAAKgB,iBAAL;AACD;;;8BAES;AACRC,mBAAa,KAAKnH,sBAAlB;AACA;AACAoH,2BAAqB,KAAKvD,kBAA1B;AACA,WAAKwD,oBAAL;AACD;;AAED;;;;wCACoB;AAClB,WAAKvP,OAAL,CAAaS,gBAAb,CAA8B,OAA9B,EAAuC,KAAK2G,eAA5C;AACA,WAAKpH,OAAL,CAAaS,gBAAb,CAA8B,OAA9B,EAAuC,KAAK+H,gBAA5C;AACA,WAAKxI,OAAL,CAAaS,gBAAb,CAA8B,SAA9B,EAAyC,KAAKyI,kBAA9C;AACD;;AAED;;;;2CACuB;AACrB,WAAKlJ,OAAL,CAAaU,mBAAb,CAAiC,OAAjC,EAA0C,KAAK0G,eAA/C;AACA,WAAKpH,OAAL,CAAaU,mBAAb,CAAiC,OAAjC,EAA0C,KAAK8H,gBAA/C;AACA,WAAKxI,OAAL,CAAaU,mBAAb,CAAiC,SAAjC,EAA4C,KAAKwI,kBAAjD;AACAtE,WAAKlE,mBAAL,CAAyB,OAAzB,EAAkC,KAAKoJ,mBAAvC;AACA;AACD;;AAED;;;;yCACqB4D,K,EAAO;AAC1B,UAAIA,UAAUrC,SAAV,IAAuBqC,UAAU,IAArC,EAA2C;AACzC,aAAKU,eAAL,GAAuBV,KAAvB;AACA,aAAKtF,OAAL,CAAaE,oBAAb,CAAkCoF,KAAlC;AACD;AACF;;AAED;;;;;;AA+CA;;;;;;;;AA6BA;;;;;;AAMA;;;AAkDA;;;;;;;AA8BA;;;;;;;;;AA8CA;2BAC+B;AAAA;;AAAA,qFAAJ,EAAI;AAAA,iCAAzB8B,UAAyB;AAAA,UAAzBA,UAAyB,mCAAZ,IAAY;;AAC7B;AACA,WAAKpH,OAAL,CAAaiG,SAAb;AACA,WAAKjG,OAAL,CAAakE,QAAb,CAAsBxH,QAAQI,SAA9B;AACA,WAAK6G,kBAAL,GAA0B0D,sBAAsB,YAAM;AACpD,eAAKzD,UAAL,GAAkB,OAAK5D,OAAL,CAAayE,kBAAb,EAAlB;AACA;AACA,eAAK6C,qBAAL;AACA,eAAKC,YAAL;AACA,eAAKC,WAAL;AACA,eAAKxH,OAAL,CAAakE,QAAb,CAAsBxH,QAAQG,IAA9B;AACA,eAAK4K,WAAL,CAAiBL,UAAjB;;AAEA;AACA5K,aAAKnE,gBAAL,CAAsB,OAAtB,EAA+B,OAAKqJ,mBAApC;AACA;AACA;AACD,OAbyB,CAA1B;AAcA,WAAK/C,MAAL,GAAc,IAAd;AACD;;AAED;;;;;;;2BAIiB;AAAA;;AAAA,UAAZjG,GAAY,uEAAN,IAAM;;AACf,UAAMgP,WAAWhP,MACfA,IAAIwG,MAAJ,CAAWC,YAAX,CAAwB9B,QAAQO,kBAAhC,MAAwD,MADzC,GAEf,KAFF;;AAIA,UAAI8J,QAAJ,EAAc;AACZ;AACD;;AAEDlL,WAAKlE,mBAAL,CAAyB,OAAzB,EAAkC,KAAKoJ,mBAAvC;AACA;AACA,WAAK1B,OAAL,CAAakE,QAAb,CAAsBxH,QAAQI,SAA9B;;AAEAuK,4BAAsB,YAAM;AAC1B,eAAKM,sBAAL;AACA,eAAKH,WAAL;AACA,eAAKxH,OAAL,CAAaoE,WAAb,CAAyB1H,QAAQG,IAAjC;AACD,OAJD;AAKA,WAAK8B,MAAL,GAAc,KAAd;AACA;AACA,WAAKqB,OAAL,CAAamG,YAAb;AACD;;AAED;;;;;;qCAGiB;AACf,UAAMxM,WAAWL,OAAOS,gBAAP,CAAwB,KAAKgI,KAAL,CAAW,CAAX,CAAxB,CAAjB;AACA,UAAM6F,aAAajO,SAASM,gBAAT,CAA0B,aAA1B,CAAnB;AACA,UAAM4N,aAAalO,SAASM,gBAAT,CAA0B,aAA1B,CAAnB;AACA,UAAM6N,gBAAgBnO,SAASM,gBAAT,CAA0B,gBAA1B,CAAtB;;AAEA,aAAO8N,SAASH,UAAT,EAAqB,EAArB,IAA2BG,SAASF,UAAT,EAAqB,EAArB,CAA3B,GAAsDE,SAASD,aAAT,EAAwB,EAAxB,CAA7D;AACD;;AAED;;;;;;0CAGsB;AACpB,UAAMlM,OAAO,KAAK8G,cAAL,CAAoB7G,qBAApB,EAAb;;AADoB,kCAEH,KAAKmE,OAAL,CAAa+E,mBAAb,EAFG;AAAA,UAEbhJ,MAFa,yBAEbA,MAFa;;AAGpB,UAAM+H,aAAa,KAAKkE,cAAL,EAAnB;AACA,UAAMC,YAAYlM,SAASH,KAAKF,GAAhC;AACA,UAAMwM,iBAAiBtN,KAAKuN,KAAL,CAAWF,YAAYnE,UAAvB,CAAvB;AACA,WAAK1B,iBAAL,GAAyB8F,iBAAiBpE,UAA1C;AACA,WAAKzB,aAAL,GAAqB,KAAKN,KAAL,CAAWtG,MAAX,GAAoBqI,UAAzC;;AAEA,WAAKpB,cAAL,CAAoBV,KAApB,CAA0ByD,WAA1B,CAAsC,QAAtC,EAAmD,KAAKrD,iBAAxD;AACA;AACA,WAAK,IAAIgG,IAAIF,cAAb,EAA6BE,IAAI,KAAKrG,KAAL,CAAWtG,MAA5C,EAAoD2M,GAApD,EAAyD;AACvD,aAAKrG,KAAL,CAAWqG,CAAX,EAAcpG,KAAd,CAAoByD,WAApB,CAAgC,SAAhC,EAA2C,MAA3C;AACD;AACF;;AAED;;;;;;;4CAIwB;AAAA,UACfzI,WADe,GACcN,OADd,CACfM,WADe;AAAA,UACFC,YADE,GACcP,OADd,CACFO,YADE;;AAEtB,UAAMoL,WAAW,KAAKrI,OAAL,CAAasB,gBAAb,EAAjB;AAFsB,UAGfvF,MAHe,GAGL,KAAK6H,UAHA,CAGf7H,MAHe;;AAItB,UAAMuM,qBAAqBrK,QAAQE,sBAAR,GAAiC,IAA5D;AACA,UAAMoK,QAAQtK,QAAQI,6BAAtB;;AAEA,WAAK,IAAIiH,QAAQ,CAAjB,EAAoBA,QAAQ+C,QAA5B,EAAsC/C,OAAtC,EAA+C;AAAA,oCACF,KAAKtF,OAAL,CAAaqF,wBAAb,CAAsCC,KAAtC,CADE;AAAA,YACjCkD,OADiC,yBACtC9M,GADsC;AAAA,YAChBoI,UADgB,yBACxB/H,MADwB;;AAE7C,aAAK+H,UAAL,GAAkBA,UAAlB;AACA,YAAI2E,oBAAoBD,UAAUzM,MAAlC;AACA,YAAI,KAAKiE,OAAL,CAAaqE,QAAb,CAAsBrH,WAAtB,KAAsC,KAAKgD,OAAL,CAAaqE,QAAb,CAAsBpH,YAAtB,CAA1C,EAA+E;AAC7EwL,8BAAqB,CAAC1M,SAASyM,OAAT,GAAmB1E,UAApB,IAAkC/H,MAAvD;AACD;AACD,YAAM2M,YAAY,CAACH,QAAQE,qBAAqB,IAAIF,KAAzB,CAAT,IAA4CD,kBAA9D;AACA;AACA,aAAKtI,OAAL,CAAawF,gCAAb,CAA8CF,KAA9C,EAAwDoD,UAAUC,OAAV,CAAkB,CAAlB,CAAxD;AACD;AACF;;AAED;AACA;;;;mCACe;AAAA;;AACb,UAAI,CAAC,KAAK3I,OAAL,CAAa4E,SAAb,EAAL,EAA+B;AAC7B;AACD;;AAED;AACA,UAAIgE,WAAW,KAAf;AACA,UAAIC,aAAa,MAAjB;;AAEA,UAAMC,SAAS,KAAK9I,OAAL,CAAa8E,mBAAb,EAAf;AACA,UAAMiE,mBAAmB,KAAK/I,OAAL,CAAa+E,mBAAb,EAAzB;;AAEA,UAAMiE,cAAcF,OAAOpN,GAAP,GAAa,KAAKkI,UAAL,CAAgB7H,MAA7B,GAAsCgN,iBAAiBhN,MAA3E;AACA,UAAMkN,iBAAiB,KAAKrF,UAAL,CAAgB7H,MAAhB,GAAyB+M,OAAOrC,MAAvD;AACA,UAAMyC,yBAAyBF,cAAc,CAA7C;;AAEA,UAAIE,sBAAJ,EAA4B;AAC1B,YAAID,iBAAiBD,WAArB,EAAkC;AAChCJ,qBAAW,QAAX;AACD;AACF;;AAED,UAAMO,eAAeL,OAAOnN,IAAP,GAAc,KAAKiI,UAAL,CAAgB9H,KAA9B,GAAsCiN,iBAAiBjN,KAA5E;AACA,UAAMsN,gBAAgB,KAAKxF,UAAL,CAAgB9H,KAAhB,GAAwBgN,OAAOtC,KAArD;AACA,UAAM6C,0BAA0BF,eAAe,CAA/C;;AAEA,UAAIE,2BAA2BD,gBAAgBD,YAA/C,EAA6D;AAC3DN,qBAAa,OAAb;AACD;;AAED,UAAM3P,uDACH2P,UADG,EACU,GADV,8BAEHD,QAFG,EAEQ,GAFR,aAAN;;AAKA,WAAK5I,OAAL,CAAaqG,kBAAb,CAAmCuC,QAAnC,SAA+CC,UAA/C;AACA,WAAK7I,OAAL,CAAauG,WAAb,CAAyBrN,QAAzB;AACD;;AAED;;;;;;;gCAIYkO,U,EAAY;AACtB,UAAIA,eAAe,IAAnB,EAAyB;AACvB;AACA,aAAKpH,OAAL,CAAaoG,KAAb;AACA;AACA,YAAI,CAAC,KAAKpG,OAAL,CAAayB,SAAb,EAAL,EAA+B;AAC7B,eAAKzB,OAAL,CAAauB,gBAAb,CAA8B,CAA9B;AACD;AACF,OAPD,MAOO;AACL,aAAKvB,OAAL,CAAauB,gBAAb,CAA8B6F,UAA9B;AACD;AACF;;AAED;;;;;;;6CAIyB;AACvB,UAAMiB,WAAW,KAAKrI,OAAL,CAAasB,gBAAb,EAAjB;AACA,WAAK,IAAI8G,IAAI,CAAb,EAAgBA,IAAIC,QAApB,EAA8BD,GAA9B,EAAmC;AACjC,aAAKpI,OAAL,CAAawF,gCAAb,CAA8C4C,CAA9C,EAAiD,IAAjD;AACD;AACF;;AAED;;;;;;;kCAIc;AAAA;;AACZ,WAAKvE,SAAL,GAAiB,KAAK7D,OAAL,CAAa0G,eAAb,EAAjB;AACA,WAAKrD,WAAL,GAAmB,KAAKG,MAAxB;AACA,WAAKF,WAAL,GAAmB,KAAKG,MAAxB;;AAEA,WAAKF,WAAL,GAAmB,KAAK5E,MAAL,GAAc,CAAd,GAAkB,CAArC;;AAEA;AACA,UAAI,CAAC,KAAK+E,OAAV,EAAmB;AACjB,aAAKA,OAAL,GAAe,IAAf;AACA,aAAKC,kBAAL,GAA0B0D,sBAAsB;AAAA,iBAAM,OAAKiC,aAAL,EAAN;AAAA,SAAtB,CAA1B;AACD;AACF;;AAED;;;;;;;oCAIgB;AAAA;;AACd,UAAMC,OAAO,KAAKvJ,OAAL,CAAa0G,eAAb,EAAb;AADc,UAGZvI,sBAHY,GAKVF,OALU,CAGZE,sBAHY;AAAA,UAGYG,aAHZ,GAKVL,OALU,CAGYK,aAHZ;AAAA,UAG2BC,aAH3B,GAKVN,OALU,CAG2BM,aAH3B;AAAA,UAG0CC,aAH1C,GAKVP,OALU,CAG0CO,aAH1C;AAAA,UAGyDC,aAHzD,GAKVR,OALU,CAGyDQ,aAHzD;AAAA,UAIZL,6BAJY,GAKVH,OALU,CAIZG,6BAJY;AAAA,UAImBC,6BAJnB,GAKVJ,OALU,CAImBI,6BAJnB;;;AAOd,UAAMmL,cAAc,iBAAM,CAACD,OAAO,KAAK1F,SAAb,IAA0B1F,sBAAhC,CAApB;;AAEA;AACA,UAAIsL,eAAe,iBACjB,CAACD,cAAcpL,6BAAf,KAAiD,IAAIA,6BAArD,CADiB,CAAnB;AAGA;AACA,UAAIsL,eAAeF,WAAnB;;AAEA,UAAIlG,cAAc,KAAKA,WAAvB;AACA,UAAI,KAAKC,WAAL,KAAqB,CAAzB,EAA4B;AAC1B;AACA,YAAI,KAAKO,UAAT,EAAqB;AACnBR,wBAAc1I,KAAKoI,GAAL,CAAS,KAAKc,UAAL,GAAkB,KAAKF,UAAL,CAAgB7H,MAA3C,EAAmDuH,WAAnD,CAAd;AACD;AACD;AACAmG,uBAAe,iBAAMD,cAAcpL,6BAApB,CAAf;AACA;AACAsL,uBAAe,iBACb,CAACF,cAAcnL,6BAAf,KAAiD,IAAIA,6BAArD,CADa,CAAf;AAGD;;AAED;AACA,UAAMsL,QAAQ,0BAAeF,YAAf,EAA6BnL,aAA7B,EAA4CC,aAA5C,EAA2DC,aAA3D,EAA0EC,aAA1E,CAAd;AACA,UAAMmL,QAAQ,0BAAeF,YAAf,EAA6BpL,aAA7B,EAA4CC,aAA5C,EAA2DC,aAA3D,EAA0EC,aAA1E,CAAd;;AAEA;AACA,WAAK+E,MAAL,GAAc,KAAKH,WAAL,GAAmB,CAAC,KAAKE,WAAL,GAAmB,KAAKF,WAAzB,IAAwCsG,KAAzE;AACA,UAAME,YAAY,KAAK,KAAKrG,MAAL,KAAgB,CAAhB,GAAoB,CAApB,GAAwB,KAAKA,MAAlC,CAAlB;AACA,WAAKC,MAAL,GAAcH,cAAc,CAAC,KAAKC,WAAL,GAAmBD,WAApB,IAAmCsG,KAA/D;AACA,UAAME,YAAY,KAAK,KAAKrG,MAAL,KAAgB,CAAhB,GAAoB,CAApB,GAAwB,KAAKA,MAAlC,CAAlB;;AAEA;AACA,WAAKzD,OAAL,CAAakF,QAAb,CAAsB,KAAK1B,MAA3B,EAAmC,KAAKC,MAAxC;AACA,WAAKzD,OAAL,CAAaoF,aAAb,CAA2ByE,SAA3B,EAAsCC,SAAtC;;AAEA;AACA;AACA,UAAIN,cAAc,CAAlB,EAAqB;AACnB,aAAK7F,kBAAL,GAA0B0D,sBAAsB;AAAA,iBAAM,OAAKiC,aAAL,EAAN;AAAA,SAAtB,CAA1B;AACD,OAFD,MAEO;AACL,aAAK3F,kBAAL,GAA0B,CAA1B;AACA,aAAKD,OAAL,GAAe,KAAf;AACA,aAAK1D,OAAL,CAAaoE,WAAb,CAAyB1H,QAAQI,SAAjC;AACD;AACF;;;;;;kBAIY4B,Q;;;;;;;;;;;;;;ACjxBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;QAGEqL,S;QACAC,Y;QACAC,M;QACAvL,Q;QACAwL,M;QACAC,M;;;;;;;;;;;;;;;;;ACbF;;;;AAEA,IAAM7O,MAAMhC,MAAZ;AACA,IAAMiC,MAAM3C,QAAZ;uBACuBwR,MAAMC,S;IAAtBrS,O,oBAAAA,O;IAASsS,G,oBAAAA,G;;IAEVP,S;AAeJ,qBAAYnS,OAAZ,EAAkC;AAAA;;AAAA,QAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAAA,SA2SlC0S,WA3SkC,GA2SpB,UAACC,KAAD,EAAW;AACvB,YAAKC,OAAL;AACD,KA7SiC;;AAChC,SAAK7S,OAAL,GAAeA,OAAf;AACA,SAAK8S,aAAL,GAAqB9S,QAAQ2C,OAAR,KAAoB,MAApB,GAA6Be,GAA7B,GAAmC1D,OAAxD;AACA,SAAKC,MAAL,GAAc,KAAK8S,SAAL,CAAe9S,MAAf,CAAd;AAHgC,mBAIM,KAAKA,MAJX;AAAA,QAIzB+S,IAJyB,YAIzBA,IAJyB;AAAA,QAInBC,aAJmB,YAInBA,aAJmB;AAAA,QAIJC,MAJI,YAIJA,MAJI;AAKhC;;AACA,SAAKC,YAAL,GAAuBH,IAAvB,UAAgCC,aAAhC;AACA,SAAKG,OAAL,GAAe,EAAf;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,YAAL,GAAoB,IAApB;AACA,SAAKC,YAAL,GAAoB,CAApB;;AAEA;AACA,QAAI,CAACL,MAAL,EAAa;AACX,UAAMM,cAAc7P,IAAI8P,aAAJ,CAAkB,OAAlB,CAApB;AACAD,kBAAYE,SAAZ;AAOA/P,UAAIgQ,oBAAJ,CAAyB,MAAzB,EAAiC,CAAjC,EAAoCC,MAApC,CAA2CJ,WAA3C;AACD;;AAED;AACA,SAAKV,aAAL,CAAmBrS,gBAAnB,CAAoC,gBAAU,YAAV,GAAyB,gBAA7D,EAA+E,KAAKkS,WAApF,EAAiG,KAAjG;AA1BgC,mBA2BO,KAAK1S,MA3BZ;AAAA,QA2BzB4T,SA3ByB,YA2BzBA,SA3ByB;AAAA,QA2BdC,SA3Bc,YA2BdA,SA3Bc;AAAA,QA2BH5C,MA3BG,YA2BHA,MA3BG;AA4BhC;;AACA,QAAI4C,SAAJ,EAAe;AACb,WAAKC,aAAL;AACD;;AAED;AACA,SAAKC,SAAL,GAAoBhB,IAApB,UAA6BC,aAA7B,SAA8CA,aAA9C;AACA,SAAKgB,UAAL,GAAkBtQ,IAAIsL,aAAJ,CAAkB,KAAK+E,SAAvB,CAAlB;;AAEA;AACA,QAAI9C,WAAW,KAAf,EAAsB;AACpB;AACA,UAAMgD,eAAevQ,IAAIsG,gBAAJ,CAAqB,KAAKkJ,YAA1B,CAArB;AACA/S,cAAQ8J,IAAR,CAAagK,YAAb,EAA2B,UAAClU,OAAD,EAAa;AACtCA,gBAAQS,gBAAR,CAAyB,OAAzB,EAAkC,UAAC4G,CAAD,EAAO;AACvCA,YAAEuC,cAAF;AACAvC,YAAEqD,eAAF;AACA,cAAMlH,KAAK6D,EAAE8M,aAAb;AAHuC,cAIhCnB,IAJgC,GAIxBxP,GAAG4Q,OAJqB,CAIhCpB,IAJgC;AAAA,yBAKL,MAAK/S,MALA;AAAA,cAKhCoU,YALgC,YAKhCA,YALgC;AAAA,cAKlBC,SALkB,YAKlBA,SALkB;;AAMvC,cAAM9P,WAAW,MAAKvE,MAAL,CAAYoB,MAA7B;;AAEA,cAAMkT,WAAW5Q,IAAIsL,aAAJ,CAAqBqF,SAArB,uBAAgDtB,IAAhD,SAA0DvL,UAA3E;AACA,cAAM3D,MAAMuQ,iBAAiB,QAAjB,GAA4B,kBAAOE,QAAP,EAAiBzQ,GAA7C,GAAmD,oBAASyQ,QAAT,EAAmBzQ,GAAlF;AACA,cAAM0Q,aAAaH,iBAAiB,UAAjB,GAA8B,MAAKI,YAAL,EAA9B,GAAoD,CAAvE;;AAEA;AACA,gBAAK3B,aAAL,CAAmB4B,QAAnB,CAA4B,CAA5B,EAA+B5Q,MAAM0Q,UAAN,GAAmBhQ,QAAlD;AACAhB,aAAGmR,IAAH;AACA,gBAAK9B,OAAL;AACD,SAhBD,EAgBG,KAhBH;AAiBD,OAlBD;AAmBD;;AAED;AA9DgC,QA+DzB+B,YA/DyB,GA+DT,KAAK3U,MA/DI,CA+DzB2U,YA/DyB;AAAA,QAgE3BC,OAhE2B,GAgEhB,KAAK5U,MAhEW,CAgE3B4U,OAhE2B;;AAiEhC,QAAIA,OAAJ,EAAa;AACX,UAAI,CAACrC,MAAMsC,OAAN,CAAcD,OAAd,CAAL,EAA6B;AAC3BA,kBAAU,CAACA,OAAD,CAAV;AACD;AACD,WAAKA,OAAL,GAAe,EAAf;AAJW,UAKJP,SALI,GAKS,KAAKrU,MALd,CAKJqU,SALI;;AAMXO,cAAQzU,OAAR,CAAgB,UAAC2U,MAAD,EAAY;AAC1B;AACA,YAAMC,WAAW,IAAID,MAAJ,QAAiBH,YAAjB,CAAjB;AACAI,iBAASC,KAAT;AACA,cAAKJ,OAAL,CAAa/G,IAAb,CAAkBkH,QAAlB;AACD,OALD;AAMD;;AAED;AACA;AACA,QAAInB,SAAJ,EAAe;AACb,WAAKqB,OAAL;AACA,WAAKrC,OAAL;AACD;AACF;;;;8BAES5S,M,EAAQ;AAChB,UAAMkV,uBAAchD,UAAUiD,aAAxB,EAA0CnV,MAA1C,CAAN;;AADgB,UAGT+S,IAHS,GAGDmC,OAHC,CAGTnC,IAHS;AAAA,UAIXsB,SAJW,GAIEa,OAJF,CAIXb,SAJW;;;AAMhB,UAAI,OAAOtB,IAAP,KAAgB,QAApB,EAA8B;AAAE;AAAF,YACvBqC,EADuB,GACjBrC,IADiB,CACvBqC,EADuB;;AAE5B,YAAI,CAACA,EAAL,EAAS;AACPA,eAAK,mBAAQ,WAAR,CAAL;AACArC,eAAKqC,EAAL,GAAUA,EAAV;AACD;AACDF,gBAAQnC,IAAR,SAAmBqC,EAAnB;AACD;;AAED,UAAI,CAACf,SAAL,EAAgB;AACdA,oBAAY3Q,IAAIiB,IAAhB,CADc,CACQ;AACvB;AACD,UAAI,OAAO0P,SAAP,KAAqB,QAAzB,EAAmC;AAAA,yBACtBA,SADsB;AAAA,YAC5Be,GAD4B,cAC5BA,EAD4B;;AAEjC,YAAI,CAACA,GAAL,EAAS;AACPA,gBAAK,mBAAQ,WAAR,CAAL;AACAf,oBAAUe,EAAV,GAAeA,GAAf;AACD;AACDF,gBAAQb,SAAR,SAAwBe,GAAxB;AACD;;AAED,UAAMC,aAAa,KAAKxC,aAAL,KAAuB,KAAKA,aAAL,CAAmBpR,MAA1C,GACjB,UADiB,GAEjB,QAFF;;AAIA,UAAM2S,eAAec,QAAQI,MAAR,KAAmB,MAAnB,GACnBD,UADmB,GAEnBH,QAAQI,MAFV;;AAIAJ,cAAQd,YAAR,GAAuBA,YAAvB;;AAEA,aAAOc,OAAP;AACD;;AAED;;;;;;oCAGgB;AACd,UAAMK,QAAQ,KAAKxV,OAAL,CAAaiK,gBAAb,CAA8B,mBAA9B,CAAd;AACA;AACA,UAAMwL,UAAU;AACdC,eAAO,CADO;AAEdC,kBAAU,EAFI;AAGdC,eAAO,CAHO;AAIdC,gBAAQ,IAJM;AAKdC,cAAM,IALQ;AAMdC,cAAM;AANQ,OAAhB;;AASA;AACA,UAAIC,YAAY,CAAhB;AACA;AACA,UAAIC,WAAW,IAAf;;AAEA7V,cAAQ8J,IAAR,CAAasL,KAAb,EAAoB,UAAChS,EAAD,EAAKkK,KAAL,EAAe;AACjC,YAAIwI,QAAQ,IAAZ;AACA,YAAMR,QAAQ,IAAIvF,SAAS3M,GAAGb,OAAH,CAAW,CAAX,CAAT,EAAwB,EAAxB,CAAlB;AACA,YAAMmT,OAAOtS,GAAGkQ,SAAhB;;AAEA,YAAIhG,UAAU,CAAd,EAAiB;AACf;AACAwI,kBAAQ;AACNR,wBADM;AAENC,sBAAU,EAFJ;AAGNC,mBAAO,CAHD;AAINC,oBAAQJ,OAJF;AAKNK,sBALM;AAMNtS;AANM,WAAR;AAQAiS,kBAAQE,QAAR,CAAiB7H,IAAjB,CAAsBoI,KAAtB;AACD,SAXD,MAWO;AACL,cAAIR,UAAUM,SAAd,EAAyB;AAAE;AACzBE,oBAAQ;AACNR,0BADM;AAENC,wBAAU,EAFJ;AAGNC,qBAAOK,SAASL,KAHV;AAINC,sBAAQI,SAASJ,MAJX;AAKNC,wBALM;AAMNtS;AANM,aAAR;AAQAyS,qBAASJ,MAAT,CAAgBF,QAAhB,CAAyB7H,IAAzB,CAA8BoI,KAA9B;AACD,WAVD,MAUO,IAAIR,QAAQM,SAAZ,EAAuB;AAAE;AAC9BE,oBAAQ;AACNR,0BADM;AAENC,wBAAU,EAFJ;AAGNC,qBAAOK,SAASL,KAAT,GAAiB,CAHlB;AAINC,sBAAQI,QAJF;AAKNH,wBALM;AAMNtS;AANM,aAAR;AAQAyS,qBAASN,QAAT,CAAkB7H,IAAlB,CAAuBoI,KAAvB;AACD,WAVM,MAUA;AAAE;AACP,gBAAIC,WAAWF,SAASJ,MAAxB;AACA,mBAAOM,SAAST,KAAT,IAAkBA,KAAlB,IAA2B,CAACS,SAASJ,IAA5C,EAAkD;AAChDI,yBAAWA,SAASN,MAApB;AACD;AACDK,oBAAQ;AACNR,0BADM;AAENC,wBAAU,EAFJ;AAGNC,qBAAOO,SAASP,KAAT,GAAiB,CAHlB;AAINC,sBAAQM,QAJF;AAKNL,wBALM;AAMNtS;AANM,aAAR;AAQA2S,qBAASR,QAAT,CAAkB7H,IAAlB,CAAuBoI,KAAvB;AACD;AACF;AACDD,mBAAWC,KAAX;AACAF,oBAAYN,KAAZ;AACD,OAvDD;;AAyDA,UAAMU,OAAO,KAAKC,iBAAL,CAAuBZ,QAAQE,QAA/B,EAAyC,KAAK1V,MAAL,CAAY6C,MAArD,CAAb;AACAa,UAAIsL,aAAJ,CAAkB,KAAKhP,MAAL,CAAY+S,IAA9B,EAAoCU,SAApC,GAAgD0C,IAAhD;AACD;;AAED;;;;;;;;;sCAMkBE,K,EAAOxT,M,EAAQ;AAAA,qBACE,KAAK7C,MADP;AAAA,UACxBgT,aADwB,YACxBA,aADwB;AAAA,UACTsD,OADS,YACTA,OADS;;AAE/B,UAAIH,OAAO,EAAX;AACA,UAAIE,SAASA,MAAMzS,MAAN,GAAe,CAA5B,EAA+B;AAC7BuS,+BAAqBnD,aAArB,SAAsCA,aAAtC,mBAAgEsD,gBAAcA,OAAd,GAA0B,EAA1F;AACA,aAAK,IAAI/F,IAAI,CAAR,EAAWgG,MAAMF,MAAMzS,MAA5B,EAAoC2M,IAAIgG,GAAxC,EAA6ChG,GAA7C,EAAkD;AAChD,cAAMhJ,OAAO8O,MAAM9F,CAAN,CAAb;AACA;AACA,cAAMiG,WAAWzV,SAASyS,aAAT,CAAuB,GAAvB,CAAjB;AACAgD,mBAASpB,EAAT,GAAcvS,UAAU0N,IAAI,CAAd,CAAd;AACAiG,mBAASlK,SAAT,GAAwB0G,aAAxB;AACA,cAAI,KAAKhT,MAAL,CAAYiR,MAAhB,EAAwB;AACtBuF,qBAASC,IAAT,UAAoB5T,UAAU0N,IAAI,CAAd,CAApB;AACD,WAFD,MAEO;AACLiG,qBAASrC,OAAT,CAAiBpB,IAAjB,SAA2BlQ,UAAU0N,IAAI,CAAd,CAA3B;AACD;;AAEDiG,mBAASE,YAAT,CAAsB,aAAtB,EAAqC,IAArC;AACAnP,eAAKhE,EAAL,CAAQoT,YAAR,CAAqBH,QAArB,EAA+BjP,KAAKhE,EAAL,CAAQqT,UAAvC;;AAEAT,kBAAQ,MAAR;AACA,cAAI,KAAKnW,MAAL,CAAYiR,MAAhB,EAAwB;AACtBkF,mCAAqBnD,aAArB,uBAAoDnQ,MAApD,IAA6D0N,IAAI,CAAjE,WAAuEhJ,KAAKsO,IAA5E;AACD,WAFD,MAEO;AAAE;AACPM,mCAAqBnD,aAArB,6BAA0DnQ,MAA1D,IAAmE0N,IAAI,CAAvE,oBAAsFhJ,KAAKsO,IAA3F;AACD;AACD,cAAItO,KAAKmO,QAAL,IAAiBnO,KAAKmO,QAAL,CAAc9R,MAAd,GAAuB,CAA5C,EAA+C;AAC7CuS,oBAAQ,KAAKC,iBAAL,CAAuB7O,KAAKmO,QAA5B,OAAyC7S,MAAzC,IAAkD0N,IAAI,CAAtD,QAAR;AACD;AACD4F,kBAAQ,OAAR;AACD;AACDA,gBAAQ,OAAR;AACD;AACD,aAAOA,IAAP;AACD;;AAED;;;;;;8BAGU;AAAA;;AAAA,UACD/B,YADC,GACe,KAAKpU,MADpB,CACDoU,YADC;;AAER,UAAMG,aAAaH,iBAAiB,UAAjB,GAA8B,KAAKI,YAAL,EAA9B,GAAoD,CAAvE;;AAEA,WAAKrB,OAAL,GAAe,EAAf;AACA,WAAKC,OAAL,GAAe,EAAf;AACA,WAAKE,YAAL,GAAoB,KAAKuD,eAAL,EAApB;;AAGA;AACA,UAAM5C,eAAevQ,IAAIsG,gBAAJ,CAAqB,KAAKkJ,YAA1B,CAArB;;AAEAT,UAAIxI,IAAJ,CAASgK,YAAT,EAAuB,UAAClU,OAAD,EAAa;AAClC;AACA,YAAIsH,SAAS,IAAb;AAFkC,uBAGN,OAAKrH,MAHC;AAAA,YAG3BiR,MAH2B,YAG3BA,MAH2B;AAAA,YAGnBoD,SAHmB,YAGnBA,SAHmB;;AAIlC,YAAMyC,WAAW7F,SAASlR,QAAQuH,YAAR,CAAqB,MAArB,CAAT,GAAwCvH,QAAQoU,OAAR,CAAgBpB,IAAzE;AACA,YAAMgE,iBAAiB9F,SACrBlR,QAAQuH,YAAR,CAAqB,MAArB,CADqB,GAElB+M,SAFkB,uBAEStU,QAAQoU,OAAR,CAAgBpB,IAFzB,OAAvB;;AAIA,YAAIgE,cAAJ,EAAoB;AAClB1P,mBAAS3D,IAAIsL,aAAJ,CAAkB+H,cAAlB,EAAkCvP,UAA3C;AACA,cAAMwP,YAAY3P,OAAOrD,qBAAP,EAAlB;AACA,cAAIgT,UAAU/S,KAAV,IAAmB+S,UAAU9S,MAAjC,EAAyC;AACvC,mBAAO,CACL,CAACkQ,iBAAiB,QAAjB,GAA4B,kBAAO/M,MAAP,EAAexD,GAA3C,GAAiD,oBAASwD,MAAT,EAAiBxD,GAAnE,IAA0E0Q,UADrE,EAELuC,QAFK,CAAP;AAID;AACF;AACD,eAAO,IAAP;AACD,OApBD,EAoBGG,IApBH,CAoBQ,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAChB,YAAI,CAACD,CAAD,IAAM,CAACC,CAAX,EAAc;AACZ,iBAAO,CAAP;AACD;AACD,eAAOD,EAAE,CAAF,IAAOC,EAAE,CAAF,CAAd;AACD,OAzBD,EAyBGhX,OAzBH,CAyBW,UAAC6N,IAAD,EAAU;AACnB,YAAIA,IAAJ,EAAU;AACR,iBAAKmF,OAAL,CAAatF,IAAb,CAAkBG,KAAK,CAAL,CAAlB;AACA,iBAAKoF,OAAL,CAAavF,IAAb,CAAkBG,KAAK,CAAL,CAAlB;AACD;AACF,OA9BD;AA+BD;;AAED;;;;;;AAKA;;;;8BAIU;AACR;AACA,UAAMoJ,YAAY,KAAK5C,YAAL,KAAsB,KAAKxU,MAAL,CAAYoB,MAAlC,GAA2C,CAA7D;AACA,UAAMkS,eAAe,KAAKuD,eAAL,EAArB;AACA,UAAMQ,YAAY,KAAKrX,MAAL,CAAYoB,MAAZ,GACdkS,YADc,GAEd,KAAKgE,eAAL,EAFJ;;AAIA;AACA,UAAI,KAAKhE,YAAL,KAAsBA,YAA1B,EAAwC;AACtC,aAAK2B,OAAL;AACD;;AAED;AACA,UAAImC,aAAaC,SAAjB,EAA4B;AAC1B;AACA,YAAMhQ,SAAS,KAAK+L,OAAL,CAAa,KAAKA,OAAL,CAAaxP,MAAb,GAAsB,CAAnC,CAAf;;AAEA,YAAI,KAAKyP,YAAL,KAAsBhM,MAA1B,EAAkC;AAChC,eAAKkQ,QAAL,CAAclQ,MAAd;AACD;AACD;AACD;;AAED;AACA,UAAI,KAAKgM,YAAL,IAAqB+D,YAAY,KAAKjE,OAAL,CAAa,CAAb,CAAjC,IAAoD,KAAKA,OAAL,CAAa,CAAb,IAAkB,CAA1E,EAA6E;AAC3E,aAAKE,YAAL,GAAoB,IAApB;AACA,aAAKmE,cAAL;AACA;AACD;;AAED,WAAK,IAAIjH,IAAI,KAAK4C,OAAL,CAAavP,MAA1B,EAAkC2M,GAAlC,GAAwC;AACtC,YAAMkH,iBAAiB,KAAKpE,YAAL,KAAsB,KAAKD,OAAL,CAAa7C,CAAb,CAAtB,IAClB6G,aAAa,KAAKjE,OAAL,CAAa5C,CAAb,CADK,KAEjB,KAAK4C,OAAL,CAAa5C,IAAI,CAAjB,MAAwBnF,SAAxB,IACFgM,YAAY,KAAKjE,OAAL,CAAa5C,IAAI,CAAjB,CAHO,CAAvB;;AAKA,YAAIkH,cAAJ,EAAoB;AAClB,eAAKF,QAAL,CAAc,KAAKnE,OAAL,CAAa7C,CAAb,CAAd;AACD;AACF;AACF;;AAED;;;;;;;6BAISlJ,M,EAAQ;AACf,WAAKgM,YAAL,GAAoBhM,MAApB;;AAEA,WAAKmQ,cAAL;;AAHe,UAKRvG,MALQ,GAKE,KAAKjR,MALP,CAKRiR,MALQ;;AAMf,UAAIyG,UAAU,KAAKxE,YAAL,CAAkByE,KAAlB,CAAwB,GAAxB,CAAd;AACA,UAAMC,eAAe,EAArB,CAPe,CAOU;AACzB;AACA,UAAMC,YAAYxQ,OAAOsQ,KAAP,CAAa,GAAb,CAAlB;AACAD,gBAAUA,QAAQjF,GAAR,CAAY,UAACqF,KAAD,EAAW;AAC/B,YAAMhB,WAAW,EAAjB;AACA,YAAIiB,UAAU,EAAd;AACAF,kBAAU1X,OAAV,CAAkB,UAAC6X,EAAD,EAAKvK,KAAL,EAAe;AAC/B,cAAIA,UAAU,CAAd,EAAiB;AACfsK,uBAAWC,EAAX;AACD,WAFD,MAEO;AACLD,6BAAeC,EAAf;AACAlB,qBAASjJ,IAAT,CAAcoD,SAAY6G,KAAZ,eAA2BC,OAA3B,UAA4CD,KAA5C,oBAAgEC,OAAhE,OAAd;AACD;AACF,SAPD;AAQAH,qBAAa/J,IAAb,CAAkBiJ,SAASA,SAASlT,MAAT,GAAkB,CAA3B,CAAlB;AACA,eAAOkT,SAASmB,IAAT,CAAc,GAAd,CAAP;AACD,OAbS,CAAV;;AAeA,UAAMC,QAAQxU,IAAIsG,gBAAJ,CAAqB0N,QAAQO,IAAR,CAAa,GAAb,CAArB,CAAd;;AAEA,WAAK,IAAI1H,IAAI,CAAR,EAAWgG,MAAM2B,MAAMtU,MAA5B,EAAoC2M,IAAIgG,GAAxC,EAA6ChG,GAA7C,EAAkD;AAChD2H,cAAM3H,CAAN,EAAS7I,SAAT,CAAmBG,GAAnB,CAAuB,QAAvB;AACD;;AAED,WAAK+M,OAAL,CAAazU,OAAb,CAAqB,UAAC2U,MAAD,EAAY;AAC/B,YAAI,OAAOA,OAAOqD,UAAd,KAA6B,UAAjC,EAA6C;AAC3CrD,iBAAOqD,UAAP,CAAkBP,YAAlB;AACD;AACF,OAJD;;AAMA;;AAEA;;;AAGD;;;qCAEgB;AACf;AACA,UAAMQ,YAAY1U,IAAIsG,gBAAJ,CAAwB,KAAKkJ,YAA7B,aAAlB;AACA,UAAIkF,SAAJ,EAAe;AACb,aAAK,IAAI7H,IAAI,CAAR,EAAWgG,MAAM6B,UAAUxU,MAAhC,EAAwC2M,IAAIgG,GAA5C,EAAiDhG,GAAjD,EAAsD;AACpD6H,oBAAU7H,CAAV,EAAa7I,SAAb,CAAuBC,MAAvB,CAA8B,QAA9B;AACD;AACF;AACF;;AAED;;;;8BACU;AACR;AACA,WAAKkL,aAAL,CAAmBpS,mBAAnB,CAAuC,gBAAU,YAAV,GAAyB,gBAAhE,EAAkF,KAAKiS,WAAvF,EAAoG,KAApG;;AAEA,WAAK3S,OAAL,GAAe,IAAf;AACA,WAAK8S,aAAL,GAAqB,IAArB;AACA,WAAK7S,MAAL,GAAc,IAAd;AACA,WAAK+S,IAAL,GAAY,IAAZ;AACA,WAAKG,YAAL,GAAoB,IAApB;AACA,WAAKmB,SAAL,GAAiB,IAAjB;AACA,WAAKlB,OAAL,GAAe,IAAf;AACA,WAAKC,OAAL,GAAe,IAAf;AACA,WAAKC,YAAL,GAAoB,IAApB;AACA,WAAKC,YAAL,GAAoB,IAApB;;AAEA;AACA,UAAI,KAAKsB,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAazU,OAAb,CAAqB,UAAC2U,MAAD,EAAY;AAC/BA,iBAAOuD,OAAP;AACD,SAFD;AAGA,aAAKzD,OAAL,GAAe,IAAf;AACD;AACF;;;mCAEc;AACb,aAAO,KAAK/B,aAAL,KAAuBpP,GAAvB,GACL,KAAKoP,aAAL,CAAmB1O,WADd,GAEL,KAAK0O,aAAL,CAAmBuE,SAFrB;AAGD;;;sCAEiB;AAChB,aAAO,KAAKvE,aAAL,CAAmBS,YAAnB,IACLvQ,KAAKoI,GAAL,CACEzH,IAAIiB,IAAJ,CAAS2O,YADX,EAEE5P,IAAId,eAAJ,CAAoB0Q,YAFtB,CADF;AAKD;;;sCAEiB;AAChB,aAAO,KAAKT,aAAL,KAAuBpP,GAAvB,GACLA,IAAI2J,WADC,GAEL,KAAKyF,aAAL,CAAmB7O,qBAAnB,GAA2CE,MAF7C;AAGD;;;;;;AAldGgO,S,CACGiD,a,GAAgB;AACrB/T,UAAQ,CADa;AAErBkU,UAAQ,MAFa;AAGrBvC,QAAM,EAHe,EAGX;AACVuD,WAAS,IAJY,EAIN;AACftD,iBAAe,MALM,EAKE;AACvBqB,aAAW,IANU,EAMJ;AACjBT,aAAW,IAPU,EAOJ;AACjB/Q,UAAQ,OARa,EAQJ;AACjBoO,UAAQ,IATa,EASP;AACdqH,aAAW,IAVU,EAUJ;AACjBrF,UAAQ,KAXa,CAWN;AAXM,C;kBAqdVf,S;;;;;;;;;;;;;;;;;AC5df;;;;;;;;IAEOhP,O,kBAAAA,O;;;AAEP,IAAMO,MAAMhC,MAAZ;AACA,IAAMiC,MAAM3C,QAAZ;AACA,IAAMwX,YAAY,uBAAuB9U,GAAvB,GAA6B,mBAA7B,GAAmD,QAArE;;AAEA,IAAMmB,MAAM,wBAAZ;;IAEMuN,Y;AAMJ,wBAAYqG,SAAZ,EAAoC;AAAA,QAAbxY,MAAa,uEAAJ,EAAI;;AAAA;;AAAA;;AAClC,SAAKwY,SAAL,GAAiBA,SAAjB;AACA,SAAKxY,MAAL,gBAAkBmS,aAAagD,aAA/B,EAAiDnV,MAAjD;;AAFkC,QAI7ByY,UAJ6B,GAIf,KAAKzY,MAJU,CAI7ByY,UAJ6B;;AAKlC,QAAI,CAACA,UAAL,EAAiB;AACfA,mBAAa1X,SAAS6B,eAAT,CAAyB8V,YAAzB,GAAwC,EAArD;AACA,WAAK1Y,MAAL,CAAYyY,UAAZ,GAAyBA,UAAzB;AACD;;AARiC,QAU3BzE,UAV2B,GAUbwE,SAVa,CAU3BxE,UAV2B;;AAWlCA,eAAW7J,KAAX,CAAiBS,SAAjB,GAA6B,eAA7B;AACAoJ,eAAW7J,KAAX,CAAiBiG,SAAjB,GAAgCqI,UAAhC;AACA,SAAKzE,UAAL,GAAkBA,UAAlB;;AAEAvQ,QAAIjD,gBAAJ,CAAqB+X,SAArB,EAAgC,KAAKI,gBAArC,EAAuD,KAAvD;AACD;;AAED;;;;;4BAMQ;AACN;AACA;AACA,WAAK3E,UAAL,CAAgBxT,gBAAhB,CAAiC0C,UAAU,YAAV,GAAyB,gBAA1D,EAA4E,KAAK0V,YAAL,CAAkB,IAAlB,CAA5E,EAAqG,KAArG;AACD;;AAkDD;;;;8BAgCU;AACRC,cAAQC,IAAR,CAAa,KAAb;AACArV,UAAIhD,mBAAJ,CAAwB8X,SAAxB,EAAmC,KAAKI,gBAAxC,EAA0D,KAA1D;AACD;;;;;;AAvHGxG,Y,CACGgD,a,GAAgB;AACrBsD,cAAY,IADS,EACH;AAClBnO,QAAM,EAFe,CAEX;AAFW,C;;;;;OAwBvBqO,gB,GAAmB,YAAM;AACvB,QAAMF,aAAa/U,IAAId,eAAJ,CAAoB8V,YAApB,GAAmC,EAAtD;AACA,UAAK1E,UAAL,CAAgB7J,KAAhB,CAAsBiG,SAAtB,GAAqCqI,UAArC;AACD,G;;OAQDG,Y,GAAe,UAACG,OAAD,EAAa;AAC1B;AACA,WAAO,UAACpG,KAAD,EAAW;AAAA,wBACqB,MAAKqB,UAD1B;AAAA,UACTV,YADS,eACTA,YADS;AAAA,UACKoF,YADL,eACKA,YADL;AAAA,UAETpO,IAFS,GAED,MAAKtK,MAFJ,CAETsK,IAFS;;AAGhB,YAAKW,SAAL,GAAiBqI,eAAeoF,YAAhC,CAHgB,CAG8B;;AAE9C;AACA,UAAIhO,eAAJ;AANgB,UAOThK,MAPS,GAOaiS,KAPb,CAOTjS,MAPS;AAAA,UAODiK,UAPC,GAOagI,KAPb,CAODhI,UAPC;;AAQhB,UAAIjK,MAAJ,EAAY;AACV,YAAIA,SAAS,CAAb,EAAgB;AAAE;AAChBgK,mBAAS,IAAT;AACD,SAFD,MAEO,IAAIhK,SAAS,CAAb,EAAgB;AAAE;AACvBgK,mBAAS,MAAT;AACD;AACF,OAND,MAMO,IAAIC,UAAJ,EAAgB;AAAE;AACvB,YAAIA,aAAa,CAAjB,EAAoB;AAAE;AACpBD,mBAAS,IAAT;AACD;AACD,YAAIC,aAAa,CAAjB,EAAoB;AAAE;AACpBD,mBAAS,MAAT;AACD;AACF;;AArBe,UAuBTE,SAvBS,GAuBI,MAAKoJ,UAAL,CAAgB7J,KAvBpB,CAuBTS,SAvBS;;;AAyBhB,UAAIE,IAAIlG,IAAImG,IAAJ,CAASH,SAAT,CAAR;AACAE,UAAIA,IAAIxI,WAAWwI,EAAE,CAAF,CAAX,EAAiB,EAAjB,CAAJ,GAA2B,CAA/B;;AAEA,UAAIiO,WAAW,MAAK9N,SAAL,GAAiB,CAA5B,KACAP,WAAW,MAAX,IAAqB3H,KAAKiI,GAAL,CAASF,CAAT,IAAc,MAAKG,SAAzC,IAAwDP,WAAW,IAAX,IAAmBI,IAAI,CAD9E,CAAJ,EACuF;AACrF6H,cAAMhJ,cAAN;AACAgJ,cAAMlI,eAAN;AACD;;AAED,UAAKC,WAAW,IAAX,IAAmBI,MAAM,CAA1B,IAAiCJ,WAAW,MAAX,IAAqB3H,KAAKiI,GAAL,CAASF,CAAT,MAAgB,MAAKG,SAA/E,EAA2F;AACzF;AACD;;AAED,UAAIP,WAAW,IAAX,IAAmBI,IAAI,CAA3B,EAA8B;AAC5B,cAAKkJ,UAAL,CAAgB7J,KAAhB,CAAsBS,SAAtB,mBAAgD7H,KAAKmI,GAAL,CAASJ,IAAIR,IAAb,EAAmB,CAAnB,CAAhD;AACD,OAFD,MAEO,IAAII,WAAW,MAAX,IAAqB3H,KAAKiI,GAAL,CAASF,CAAT,IAAc,MAAKG,SAA5C,EAAuD;AAC5D,cAAK+I,UAAL,CAAgB7J,KAAhB,CAAsBS,SAAtB,mBAAgD7H,KAAKoI,GAAL,CAASL,IAAIR,IAAb,EAAmB,CAAC,MAAKW,SAAzB,CAAhD;AACD;AACF,KA3CD;AA4CD,G;;OAGDkN,U,GAAa,UAACP,YAAD,EAAkB;AAAA,QACtBtN,IADsB,GACd,MAAKtK,MADS,CACtBsK,IADsB;AAAA,QAEtB0J,UAFsB,SAEtBA,UAFsB;AAAA,QAGtBV,YAHsB,GAGQU,UAHR,CAGtBV,YAHsB;AAAA,QAGRoF,YAHQ,GAGQ1E,UAHR,CAGR0E,YAHQ;;AAI7B,QAAIzN,YAAYqI,eAAeoF,YAA/B,CAJ6B,CAIgB;AAC7C,QAAIzN,cAAc,CAAlB,EAAqB;AACnB;AACD;AACDA,iBAAa,CAAb,CAR6B,CAQb;AAChB;AACA;AACA,QAAM+N,WAAWhF,WAAWhH,aAAX,CAAyBhJ,qBAAzB,EAAjB;AACA,QAAMkQ,gBAAgBxQ,IAAIsG,gBAAJ,CAAqB4N,aAAaK,IAAb,CAAkB,GAAlB,CAArB,CAAtB;AACA,QAAI/D,aAAJ,EAAmB;AACjB3B,YAAMC,SAAN,CAAgBrS,OAAhB,CAAwB8J,IAAxB,CAA6BiK,aAA7B,EAA4C,UAAC3Q,EAAD,EAAQ;AAClD,YAAIQ,OAAOR,GAAGS,qBAAH,EAAX;AACA,eAAOD,KAAKF,GAAL,GAAW,CAAX,IAAgBE,KAAK6K,MAAL,GAAc,CAA9B,KAAoC7K,KAAKF,GAAL,GAAWmV,SAASnV,GAApB,IAA2BE,KAAK6K,MAAL,GAAcoK,SAASpK,MAAtF,CAAP,EAAsG;AAAE;AAAF,cAC7FhE,SAD6F,GAChFoJ,WAAW7J,KADqE,CAC7FS,SAD6F;;AAEpG,cAAIE,IAAIlG,IAAImG,IAAJ,CAASH,SAAT,CAAR;AACAE,cAAIA,IAAIxI,WAAWwI,EAAE,CAAF,CAAX,EAAiB,EAAjB,CAAJ,GAA2B,CAA/B;AACA,cAAI/G,KAAKF,GAAL,GAAWmV,SAASnV,GAAxB,EAA6B;AAC3BmQ,uBAAW7J,KAAX,CAAiBS,SAAjB,mBAA2C7H,KAAKmI,GAAL,CAASJ,IAAIR,IAAb,EAAmB,CAAnB,CAA3C;AACD,WAFD,MAEO;AACL0J,uBAAW7J,KAAX,CAAiBS,SAAjB,mBAA2C7H,KAAKoI,GAAL,CAASL,IAAIR,IAAb,EAAmB,CAACW,SAApB,CAA3C;AACD;AACDlH,iBAAOR,GAAGS,qBAAH,EAAP;AACD;AACF,OAbD;AAcD;AACF,G;;;kBASYmO,Y;;;;;;;;;;;;;;;;;ACrIf;;;;AACA;;;;;;;;;;AAKA;AACA,IAAMtN,UAAU;AACdC,WAAS,eADK;AAEdmU,aAAW,kBAFG;AAGdC,WAAS,uBAHK;AAId5T,UAAQ,sBAJM;AAKd6T,YAAU;AALI,CAAhB;;AAQA,IAAM3T,UAAU;AACd4T,YAAU,eADI;AAEdC,YAAU,eAFI;AAGdC,WAAS,cAHK;AAIdC,aAAW,gBAJG;AAKdC,uBAAqB,0BALP;AAMdC,qBAAmB;AANL,CAAhB;;AASA,IAAMrT,UAAU;AACdsT,WAAS,EADK,EACD;AACbC,wBAAsB,GAFR,EAEa;AAC3BC,2BAAyB,GAHX,EAGgB;AAC9BC,mBAAiB,GAJH,CAIQ;AAJR,CAAhB;;AAOA;AACA,IAAMC,gCAAgC;AACpCC,WAAS,WAD2B;AAEpCC,aAAW,aAFyB;AAGpCC,YAAU,YAH0B;AAIpCC,SAAO,SAJ6B;AAKpCxF,QAAM;AAL8B,CAAtC;;IAQMtC,M;;;;;;;AAcJ;;;;;;0BAMarS,O,EAAuC;AAAA,qFAAJ,EAAI;AAAA,gCAA7Boa,SAA6B;AAAA,UAA7BA,SAA6B,kCAAjB/O,SAAiB;;AAClD,UAAMgP,SAAS,IAAIhI,MAAJ,CAAWrS,OAAX,CAAf;AACA,UAAIoa,cAAc/O,SAAlB,EAA6B;AAC3BgP,eAAOD,SAAP,GAAmB,sBAAuBA,SAA1C;AACD;AACD,aAAOC,MAAP;AACD;;AAED;;;;;;;kCAIqBrF,Q,EAAU;AAC7B,UAAMsF,UAAU,8BAAmBC,YAAY9H,SAA/B,CAAhB;;AAEA;AACA,aAAO;AACL+H,2BAAmB;AAAA,iBAAM,gCAAqB9Y,MAArB,CAAN;AAAA,SADd;AAEL+Y,qBAAa;AAAA,iBAAMzF,SAASoF,SAAf;AAAA,SAFR;AAGLM,kBAAU;AAAA,iBAAM1F,SAAShV,OAAT,CAAiBsa,OAAjB,EAA0B,SAA1B,CAAN;AAAA,SAHL;AAILK,oBAAY;AAAA,iBAAM3F,SAASlF,QAAf;AAAA,SAJP;AAKLxD,kBAAU,kBAACC,SAAD;AAAA,iBAAeyI,SAAShV,OAAT,CAAiB2H,SAAjB,CAA2BG,GAA3B,CAA+ByE,SAA/B,CAAf;AAAA,SALL;AAMLC,qBAAa,qBAACD,SAAD;AAAA,iBAAeyI,SAAShV,OAAT,CAAiB2H,SAAjB,CAA2BC,MAA3B,CAAkC2E,SAAlC,CAAf;AAAA,SANR;AAOLqO,+BAAuB,+BAACra,OAAD,EAAUC,OAAV;AAAA,iBACrBwU,SAAShV,OAAT,CAAiBS,gBAAjB,CAAkCF,OAAlC,EAA2CC,OAA3C,EAAoD,yBAApD,CADqB;AAAA,SAPlB;AASLqa,iCAAyB,iCAACta,OAAD,EAAUC,OAAV;AAAA,iBACvBwU,SAAShV,OAAT,CAAiBU,mBAAjB,CAAqCH,OAArC,EAA8CC,OAA9C,EAAuD,yBAAvD,CADuB;AAAA,SATpB;AAWLsa,+BAAuB,+BAACta,OAAD;AAAA,iBAAakB,OAAOjB,gBAAP,CAAwB,QAAxB,EAAkCD,OAAlC,CAAb;AAAA,SAXlB;AAYLua,iCAAyB,iCAACva,OAAD;AAAA,iBAAakB,OAAOhB,mBAAP,CAA2B,QAA3B,EAAqCF,OAArC,CAAb;AAAA,SAZpB;AAaLwa,2BAAmB,2BAACC,OAAD,EAAUjU,KAAV;AAAA,iBAAoBgO,SAAShV,OAAT,CAAiBoK,KAAjB,CAAuByD,WAAvB,CAAmCoN,OAAnC,EAA4CjU,KAA5C,CAApB;AAAA,SAbd;AAcLkU,2BAAmB,2BAACD,OAAD;AAAA,iBAAajG,SAAShV,OAAT,CAAiBoK,KAAjB,CAAuBC,cAAvB,CAAsC4Q,OAAtC,CAAb;AAAA,SAdd;AAeLE,6BAAqB;AAAA,iBAAMnG,SAAShV,OAAT,CAAiBiE,qBAAjB,EAAN;AAAA,SAfhB;AAgBLmX,6BAAqB;AAAA,iBAAO,EAAC7N,GAAG7L,OAAO4C,WAAX,EAAwByG,GAAGrJ,OAAO0C,WAAlC,EAAP;AAAA;AAhBhB,OAAP;AAkBD;;AAED;;;;;;;2CAI8B;AAC5B,aAAO;AACLiX,qBAAa,KADR,EACe;AACpBC,8BAAsB,KAFjB,EAEwB;AAC7BC,+BAAuB,KAHlB,EAGyB;AAC9BC,8BAAsB,KAJjB,EAIwB;AAC7BC,6BAAqB,CALhB,EAKmB;AACxBC,yBAAiB,IANZ,EAMkB;AACvBC,wBAAgB,KAPX,CAOkB;AAPlB,OAAP;AASD;;;wBApEoB;AACnB,aAAO7W,OAAP;AACD;;;wBAEoB;AACnB,aAAOW,OAAP;AACD;;;wBAEoB;AACnB,aAAOY,OAAP;AACD;;;AA4DD,kBAAYrG,OAAZ,EAAqBC,MAArB,EAA6B;AAAA;;AAE3B;AACA;AAH2B,gHACrBD,OADqB,EACZC,MADY;;AAI3B,UAAK6P,QAAL,GAAgB,MAAKA,QAAL,IAAiB,KAAjC;;AAEA;AACA,UAAKsK,SAAL,GAAiB,MAAKA,SAAL,IAAkB,KAAnC;;AAEA;AACA,UAAKhS,OAAL,GAAeiK,OAAO7G,aAAP,OAAf;;AAEA;AACA,UAAKoQ,WAAL,GAAmB,CAAnB;;AAEA;AACA,UAAKC,UAAL,GAAkB,EAAC3X,OAAO,CAAR,EAAWC,QAAQ,CAAnB,EAAlB;;AAEA;AACA,UAAK2X,eAAL,GAAuBzJ,OAAO0J,oBAAP,EAAvB;;AAEA;AACA,UAAKC,QAAL,GAAgB,CAAhB;;AAEA;AACA,UAAKC,WAAL,GAAmB,CAAnB;;AAEA;AACA,UAAKC,SAAL,GAAiB,CAAjB;;AAEA;AACA,UAAKC,eAAL,GAAuB;AACrBpY,YAAM,CADe;AAErBD,WAAK;AAFgB,KAAvB;;AAKA;AACA,UAAKsY,KAAL,GAAa,CAAb;;AAEA;AACA,UAAKC,eAAL,GAAuB,IAAvB;;AAEA;AACA,UAAKC,wBAAL,GAAgC,IAAhC;;AAEA;AACA,UAAKC,2BAAL,GAAmC,KAAnC;;AAEA;AACA,UAAKC,uBAAL,GAA+B,YAAM;AACnC,YAAKD,2BAAL,GAAmC,IAAnC;AACA,YAAKE,wBAAL;AACD,KAHD;;AAKA;AACA,UAAKC,aAAL,GAAqB,CACnB,EAAClF,UAAU,YAAX,EAAyBmF,YAAY,UAArC,EADmB,EAEnB,EAACnF,UAAU,aAAX,EAA0BmF,YAAY,WAAtC,EAFmB,EAGnB,EAACnF,UAAU,WAAX,EAAwBmF,YAAY,SAApC,EAHmB,EAInB,EAACnF,UAAU,SAAX,EAAsBmF,YAAY,OAAlC,EAJmB,EAKnB,EAACnO,OAAO,OAAR,EAAiBmG,MAAM,MAAvB,EALmB,CAArB;;AAQA;AACA,UAAKiI,SAAL,GAAiB;AACfpF,gBAAU,kBAACnQ,CAAD;AAAA,eAAO,MAAKmQ,QAAL,CAAcnQ,CAAd,CAAP;AAAA,OADK;AAEfsV,kBAAY,oBAACtV,CAAD;AAAA,eAAO,MAAKsV,UAAL,CAAgBtV,CAAhB,CAAP;AAAA,OAFG;AAGfmH,aAAO;AAAA,eAAMiB,sBACX;AAAA,iBAAM,MAAKrH,OAAL,CAAakE,QAAb,CAAsBxH,QAAQqU,OAA9B,CAAN;AAAA,SADW,CAAN;AAAA,OAHQ;AAMfxE,YAAM;AAAA,eAAMlF,sBACV;AAAA,iBAAM,MAAKrH,OAAL,CAAaoE,WAAb,CAAyB1H,QAAQqU,OAAjC,CAAN;AAAA,SADU,CAAN;AAAA;AANS,KAAjB;;AAWA,UAAK0D,KAAL;AA3E2B;AA4E5B;;AAED;;;;;kCACc;AACZ,aAAO,KAAKzU,OAAL,CAAaoS,iBAAb,EAAP;AACD;;AAED;;;;4BACQ;AAAA;;AACN,UAAI,CAAC,KAAKsC,WAAL,EAAL,EAAyB;AACvB;AACD;;AAED,WAAK1N,iBAAL;;AALM,UAOCrK,OAPD,GAOuBD,OAPvB,CAOCC,OAPD;AAAA,UAOUmU,SAPV,GAOuBpU,OAPvB,CAOUoU,SAPV;;AAQNzJ,4BAAsB,YAAM;AAC1B,eAAKrH,OAAL,CAAakE,QAAb,CAAsBvH,OAAtB;AACA,YAAI,OAAKqD,OAAL,CAAaqS,WAAb,EAAJ,EAAgC;AAC9B,iBAAKrS,OAAL,CAAakE,QAAb,CAAsB4M,SAAtB;AACD;AACD,eAAK6D,cAAL;AACD,OAND;AAOD;;AAED;;;;;;;6BAIS;AAAA;;AACP,UAAI,KAAKnB,WAAT,EAAsB;AACpBtM,6BAAqB,KAAKsM,WAA1B;AACD;AACD,WAAKA,WAAL,GAAmBnM,sBAAsB,YAAM;AAC7C,eAAKsN,cAAL;AACA,eAAKnB,WAAL,GAAmB,CAAnB;AACD,OAHkB,CAAnB;AAID;;AAED;;;;qCACiB;AACf,WAAKoB,UAAL,GAAkB,KAAK5U,OAAL,CAAa+S,mBAAb,EAAlB;AADe,wBAES,KAAK6B,UAFd;AAAA,UAER9Y,KAFQ,eAERA,KAFQ;AAAA,UAEDC,MAFC,eAEDA,MAFC;;AAIf;;AACA,UAAM8Y,SAASja,KAAKoI,GAAL,CAASlH,KAAT,EAAgBC,MAAhB,CAAf;AACA;AACA,UAAM+Y,WAAWla,KAAKma,IAAL,CAAUna,KAAKoa,GAAL,CAASlZ,KAAT,EAAgB,CAAhB,IAAqBlB,KAAKoa,GAAL,CAASjZ,MAAT,EAAiB,CAAjB,CAA/B,CAAjB;;AAEA;AACA,WAAK8X,WAAL,GAAmBgB,SAAS5W,QAAQuT,oBAApC;;AAEA;AACA,WAAKsC,SAAL,GAAiBgB,WAAW7W,QAAQsT,OAApC;AACA;AACA,WAAKyC,KAAL,GAAa,KAAKF,SAAL,GAAiB,KAAKD,WAAnC;AACA,WAAKD,QAAL,GAAgB,OAAOhZ,KAAKma,IAAL,CAAU,KAAKjB,SAAL,GAAiB,IAA3B,CAAvB;AACA,WAAKmB,sBAAL;AACD;;;6CAEwB;AAAA,UAErBhE,QAFqB,GAGnB5T,OAHmB,CAErB4T,QAFqB;AAAA,UAEXC,QAFW,GAGnB7T,OAHmB,CAEX6T,QAFW;AAAA,UAEDC,OAFC,GAGnB9T,OAHmB,CAED8T,OAFC;AAAA,UAEQC,SAFR,GAGnB/T,OAHmB,CAEQ+T,SAFR;;;AAKvB,WAAKpR,OAAL,CAAa4S,iBAAb,CAA+B3B,QAA/B,EAA4C,KAAK4C,WAAjD;AACA,WAAK7T,OAAL,CAAa4S,iBAAb,CAA+BxB,SAA/B,EAA0C,KAAK4C,KAA/C;;AAEA,UAAI,KAAKhU,OAAL,CAAaqS,WAAb,EAAJ,EAAgC;AAAA,2BACN,KAAKuC,UADC;AAAA,YACvB9Y,KADuB,gBACvBA,KADuB;AAAA,YAChBC,MADgB,gBAChBA,MADgB;;AAE9B,aAAKgY,eAAL,GAAuB;AACrBpY,gBAAMf,KAAKsa,KAAL,CAAYpZ,QAAQ,CAAT,GAAe,KAAK+X,WAAL,GAAmB,CAA7C,CADe;AAErBnY,eAAKd,KAAKsa,KAAL,CAAYnZ,SAAS,CAAV,GAAgB,KAAK8X,WAAL,GAAmB,CAA9C;AAFgB,SAAvB;;AAKA,aAAK7T,OAAL,CAAa4S,iBAAb,CAA+B1B,QAA/B,EAA4C,KAAK6C,eAAL,CAAqBpY,IAAjE;AACA,aAAKqE,OAAL,CAAa4S,iBAAb,CAA+BzB,OAA/B,EAA2C,KAAK4C,eAAL,CAAqBrY,GAAhE;AACD;AACF;;AAED;;;;wCACoB;AAAA;;AAClB,WAAK4Y,aAAL,CAAmBtc,OAAnB,CAA2B,UAAC2Y,IAAD,EAAU;AACnC7Y,eAAOC,IAAP,CAAY4Y,IAAZ,EAAkB3Y,OAAlB,CAA0B,UAACmd,CAAD,EAAO;AAC/B,iBAAKnV,OAAL,CAAawS,qBAAb,CAAmC7B,KAAKwE,CAAL,CAAnC,EAA4C,OAAKX,SAAL,CAAeW,CAAf,CAA5C;AACD,SAFD;AAGD,OAJD;;AAMA;AACA,WAAKnV,OAAL,CAAa0S,qBAAb,CAAmC,KAAK0C,MAAxC;AACD;;AAED;;;;2CACuB;AAAA;;AACrB,WAAKd,aAAL,CAAmBtc,OAAnB,CAA2B,UAAC2Y,IAAD,EAAU;AACnC7Y,eAAOC,IAAP,CAAY4Y,IAAZ,EAAkB3Y,OAAlB,CAA0B,UAACmd,CAAD,EAAO;AAC/B,iBAAKnV,OAAL,CAAayS,uBAAb,CAAqC9B,KAAKwE,CAAL,CAArC,EAA8C,OAAKX,SAAL,CAAeW,CAAf,CAA9C;AACD,SAFD;AAGD,OAJD;AAKA,WAAKnV,OAAL,CAAa2S,uBAAb,CAAqC,KAAKyC,MAA1C;AACD;;AAED;;;;;;;;;6BAMSnW,C,EAAG;AAAA;;AACV,UAAI,KAAKe,OAAL,CAAauS,UAAb,EAAJ,EAA+B;AAC7B;AACD;;AAHS,UAKHmB,eALG,GAKgB,IALhB,CAKHA,eALG;;AAMV,UAAIA,gBAAgBT,WAApB,EAAiC;AAC/B;AACD;;AAEDS,sBAAgBT,WAAhB,GAA8B,IAA9B;AACAS,sBAAgBH,cAAhB,GAAiCtU,MAAM,IAAvC;AACAyU,sBAAgBJ,eAAhB,GAAkCrU,CAAlC;AACAyU,sBAAgBP,qBAAhB,GAAwCO,gBAAgBH,cAAhB,GAAiC,KAAjC,GACtCtU,EAAEoW,IAAF,KAAW,WAAX,IAA0BpW,EAAEoW,IAAF,KAAW,YAArC,IAAqDpW,EAAEoW,IAAF,KAAW,aADlE;AAGA3B,sBAAgBL,mBAAhB,GAAsCiC,KAAK1O,GAAL,EAAtC;;AAEAS,4BAAsB,YAAM;AAC1B;AACA;AACA;AACAqM,wBAAgBN,oBAAhB,GAAwCnU,KAAKA,EAAEoW,IAAF,KAAW,SAAjB,GAA8B,OAAKrV,OAAL,CAAasS,QAAb,EAA9B,GAAwD,IAA/F;AACA,YAAIoB,gBAAgBN,oBAApB,EAA0C;AACxC,iBAAKmC,iBAAL;AACD,SAFD,MAEO;AACL;AACA,iBAAK7B,eAAL,GAAuBzJ,OAAO0J,oBAAP,EAAvB;AACD;AACF,OAXD;AAYD;;AAED;;;;wCACoB;AAAA;;AAAA,UACXtC,mBADW,GAC+BhU,OAD/B,CACXgU,mBADW;AAAA,UACUC,iBADV,GAC+BjU,OAD/B,CACUiU,iBADV;AAAA,UAGhBnU,MAHgB,GAKdT,OALc,CAGhBS,MAHgB;AAAA,UAIhB6T,QAJgB,GAKdtU,OALc,CAIhBsU,QAJgB;AAAA,UAMXS,uBANW,GAMgBxT,OANhB,CAMXwT,uBANW;;;AAQlB,UAAI+D,iBAAiB,EAArB;AACA,UAAIC,eAAe,EAAnB;;AAEA,UAAI,CAAC,KAAKzV,OAAL,CAAaqS,WAAb,EAAL,EAAiC;AAAA,oCACA,KAAKqD,oBAAL,EADA;AAAA,YACxBC,UADwB,yBACxBA,UADwB;AAAA,YACZC,QADY,yBACZA,QADY;;AAE/BJ,yBAAoBG,WAAWxQ,CAA/B,YAAuCwQ,WAAWhT,CAAlD;AACA8S,uBAAkBG,SAASzQ,CAA3B,YAAmCyQ,SAASjT,CAA5C;AACD;;AAED,WAAK3C,OAAL,CAAa4S,iBAAb,CAA+BvB,mBAA/B,EAAoDmE,cAApD;AACA,WAAKxV,OAAL,CAAa4S,iBAAb,CAA+BtB,iBAA/B,EAAkDmE,YAAlD;AACA;AACAxO,mBAAa,KAAKgN,eAAlB;AACAhN,mBAAa,KAAKiN,wBAAlB;AACA,WAAK2B,mBAAL;AACA,WAAK7V,OAAL,CAAaoE,WAAb,CAAyB4M,QAAzB;;AAEA;AACA,WAAKhR,OAAL,CAAa+S,mBAAb;AACA,WAAK/S,OAAL,CAAakE,QAAb,CAAsB/G,MAAtB;AACA,WAAK8W,eAAL,GAAuBlU,WAAW;AAAA,eAAM,OAAKqU,uBAAL,EAAN;AAAA,OAAX,EAAiD3C,uBAAjD,CAAvB;AACD;;AAED;;;;;;;2CAIuB;AAAA,UACdiC,eADc,GACK,IADL,CACdA,eADc;AAAA,UAEdJ,eAFc,GAE4BI,eAF5B,CAEdJ,eAFc;AAAA,UAEGH,qBAFH,GAE4BO,eAF5B,CAEGP,qBAFH;AAAA,yBAGG,KAAKyB,UAHR;AAAA,UAGd9Y,KAHc,gBAGdA,KAHc;AAAA,UAGPC,MAHO,gBAGPA,MAHO;;;AAKrB,UAAI4Z,mBAAJ;AACA,UAAIxC,qBAAJ,EAA2B;AACzBwC,qBAAa,oCAAyBrC,eAAzB,EACX,KAAKtT,OAAL,CAAagT,mBAAb,EADW,EACyB,KAAKhT,OAAL,CAAa+S,mBAAb,EADzB,CAAb;AAGD,OAJD,MAIO;AACL4C,qBAAa;AACXxQ,aAAGrJ,QAAQ,CADA;AAEX6G,aAAG5G,SAAS;AAFD,SAAb;AAID;AACD;AACA4Z,mBAAa;AACXxQ,WAAGwQ,WAAWxQ,CAAX,GAAgB,KAAK0O,WAAL,GAAmB,CAD3B;AAEXlR,WAAGgT,WAAWhT,CAAX,GAAgB,KAAKkR,WAAL,GAAmB;AAF3B,OAAb;;AAKA,UAAM+B,WAAW;AACfzQ,WAAIrJ,QAAQ,CAAT,GAAe,KAAK+X,WAAL,GAAmB,CADtB;AAEflR,WAAI5G,SAAS,CAAV,GAAgB,KAAK8X,WAAL,GAAmB;AAFvB,OAAjB;;AAKA,aAAO,EAAC8B,sBAAD,EAAaC,kBAAb,EAAP;AACD;;AAED;;;;;;+CAG2B;AAAA;;AAAA,UAClB5E,QADkB,GACNtU,OADM,CAClBsU,QADkB;AAAA,6BAEmB,KAAK0C,eAFxB;AAAA,UAElBR,oBAFkB,oBAElBA,oBAFkB;AAAA,UAEID,WAFJ,oBAEIA,WAFJ;;AAGzB,UAAM6C,qBAAqB5C,wBAAwB,CAACD,WAApD;AACA,UAAI6C,sBAAsB,KAAK3B,2BAA/B,EAA4D;AAC1D,aAAK0B,mBAAL;AACA,aAAK7V,OAAL,CAAakE,QAAb,CAAsB8M,QAAtB;AACA,aAAKkD,wBAAL,GAAgCnU,WAAW,YAAM;AAC/C,iBAAKC,OAAL,CAAaoE,WAAb,CAAyB4M,QAAzB;AACD,SAF+B,EAE7B/S,QAAQyT,eAFqB,CAAhC;AAGD;AACF;;AAED;;;;;;0CAGsB;AAAA,UACbvU,MADa,GACHT,OADG,CACbS,MADa;;AAEpB,WAAK6C,OAAL,CAAaoE,WAAb,CAAyBjH,MAAzB;AACA,WAAKgX,2BAAL,GAAmC,KAAnC;AACA,WAAKnU,OAAL,CAAa+S,mBAAb;AACD;;AAED;;;;;;;;+BAKW9T,C,EAAG;AAAA;;AAAA,UACLyU,eADK,GACc,IADd,CACLA,eADK;AAEZ;;AACA,UAAI,CAACA,gBAAgBT,WAArB,EAAkC;AAChC;AACD;AACD;AACA,UAAIS,gBAAgBH,cAApB,EAAoC;AAClC,YAAMwC,YAAY,IAAlB;AACA,YAAMC,sBAAYtC,eAAZ,CAAN;AACArM,8BAAsB;AAAA,iBAAM,OAAK4O,mBAAL,CAAyBF,SAAzB,EAAoCC,MAApC,CAAN;AAAA,SAAtB;AACA,aAAKtC,eAAL,GAAuBzJ,OAAO0J,oBAAP,EAAvB;AACA;AACD;;AAED,UAAMuC,uBAAuBvE,8BAA8B1S,EAAEoW,IAAhC,CAA7B;AACA,UAAMc,yBAAyBzC,gBAAgBJ,eAAhB,CAAgC+B,IAA/D;AACA;AACA;AACA;AACA;AACA,UAAMe,sBAAsBF,yBAAyBC,sBAArD;AACA,UAAIE,0BAA0BD,mBAA9B;AACA,UAAI1C,gBAAgBP,qBAApB,EAA2C;AACzCkD,kCAA0BpX,EAAEoW,IAAF,KAAW,SAArC;AACD;;AAED,UAAMW,qBAAYtC,eAAZ,CAAN;AACArM,4BAAsB,YAAM;AAC1B,YAAI+O,mBAAJ,EAAyB;AACvB,iBAAK1C,eAAL,CAAqBR,oBAArB,GAA4C,IAA5C;AACA,iBAAK+C,mBAAL,CAAyBhX,CAAzB,EAA4B+W,KAA5B;AACD;;AAED,YAAIK,uBAAJ,EAA6B;AAC3B,iBAAK3C,eAAL,GAAuBzJ,OAAO0J,oBAAP,EAAvB;AACD;AACF,OATD;AAUD;;AAED;;;;;;;;wCAKoB1U,C,SAAkD;AAAA,UAA9CkU,qBAA8C,SAA9CA,qBAA8C;AAAA,UAAvBC,oBAAuB,SAAvBA,oBAAuB;AAAA,UAC7DrC,OAD6D,GAClDrU,OADkD,CAC7DqU,OAD6D;;AAEpE,UAAIoC,yBAAyBC,oBAA7B,EAAmD;AACjD;AACA,aAAKpT,OAAL,CAAaoE,WAAb,CAAyB2M,OAAzB;AACA,aAAKsD,wBAAL;AACD;AACF;;;;;;kBAIYpK,M;;;;;;;;;;;;ACjef;;;;AAIA,IAAIqM,8BAAJ;;AAEA;;;;;;AAMA,IAAIC,yBAAJ;;AAEA;;;;;AAKA,SAASC,sBAAT,CAAgCC,SAAhC,EAA2C;AACzC;AACA;AACA,MAAM7d,WAAW6d,UAAU7d,QAA3B;AACA,MAAMwG,OAAOxG,SAASyS,aAAT,CAAuB,KAAvB,CAAb;AACAjM,OAAK+E,SAAL,GAAiB,0BAAjB;AACAvL,WAAS4D,IAAT,CAAcka,WAAd,CAA0BtX,IAA1B;;AAEA;AACA;AACA;AACA;AACA,MAAMuX,gBAAgBF,UAAU1c,gBAAV,CAA2BqF,IAA3B,CAAtB;AACA,MAAMwX,kBAAkBD,kBAAkB,IAAlB,IAA0BA,cAAcE,cAAd,KAAiC,OAAnF;AACAzX,OAAKI,MAAL;AACA,SAAOoX,eAAP;AACD;;AAED;;;;;;;;;;;AAWA,SAASE,oBAAT,CAA8BL,SAA9B,EAA+D;AAAA,MAAtBM,YAAsB,uEAAP,KAAO;;AAC7D,MAAI,OAAOT,qBAAP,KAAiC,SAAjC,IAA8C,CAACS,YAAnD,EAAiE;AAC/D,WAAOT,qBAAP;AACD;;AAED,MAAMU,0BAA0BP,UAAUQ,GAAV,IAAiB,OAAOR,UAAUQ,GAAV,CAAcC,QAArB,KAAkC,UAAnF;AACA,MAAI,CAACF,uBAAL,EAA8B;AAC5B;AACD;;AAED,MAAMG,4BAA4BV,UAAUQ,GAAV,CAAcC,QAAd,CAAuB,YAAvB,EAAqC,KAArC,CAAlC;AACA;AACA;AACA,MAAME,oCACJX,UAAUQ,GAAV,CAAcC,QAAd,CAAuB,mBAAvB,KACAT,UAAUQ,GAAV,CAAcC,QAAd,CAAuB,OAAvB,EAAgC,WAAhC,CAFF;;AAKA,MAAIC,6BAA6BC,iCAAjC,EAAoE;AAClEd,4BAAwB,CAACE,uBAAuBC,SAAvB,CAAzB;AACD,GAFD,MAEO;AACLH,4BAAwB,KAAxB;AACD;AACD,SAAOA,qBAAP;AACD;;AAED;;;;;;;;AAQA,SAASe,YAAT,GAAgE;AAAA,MAA1CC,SAA0C,uEAA9Bhe,MAA8B;AAAA,MAAtByd,YAAsB,uEAAP,KAAO;;AAC9D,MAAIR,qBAAqBtT,SAArB,IAAkC8T,YAAtC,EAAoD;AAClD,QAAIrC,cAAc,KAAlB;AACA,QAAI;AACF;AACA4C,gBAAU1e,QAAV,CAAmBP,gBAAnB,CAAoC,MAApC,EAA4C,IAA5C,EAAkD,EAAC,IAAIkf,OAAJ,GAAc;AAC/D7C,wBAAc,IAAd;AACD,SAFiD,EAAlD;AAGD,KALD,CAKE,OAAOzV,CAAP,EAAU;AACV;AACD;;AAEDsX,uBAAmB7B,WAAnB;AACD;;AAED,SAAO6B,mBAAmB,EAACgB,SAAS,IAAV,EAAnB,GAAqC,KAA5C;AACD;;AAED;;;;;AAKA,SAASC,kBAAT,CAA4BC,oBAA5B,EAAkD;AAChD,SAAO,CACL,uBADK,EACoB,mBADpB,EACyC,SADzC,EAELC,MAFK,CAEE,UAACC,CAAD;AAAA,WAAOA,KAAKF,oBAAZ;AAAA,GAFF,EAEoCG,GAFpC,EAAP;AAGD;;AAED;;;;;;;AAOA,SAASC,wBAAT,CAAkCC,EAAlC,EAAsCC,UAAtC,EAAkDC,UAAlD,EAA8D;AAAA,MACrD7S,CADqD,GAC7C4S,UAD6C,CACrD5S,CADqD;AAAA,MAClDxC,CADkD,GAC7CoV,UAD6C,CAClDpV,CADkD;;AAE5D,MAAMsV,YAAY9S,IAAI6S,WAAWrc,IAAjC;AACA,MAAMuc,YAAYvV,IAAIqV,WAAWtc,GAAjC;;AAEA,MAAIyc,oBAAJ;AACA,MAAIC,oBAAJ;AACA;AACA,MAAIN,GAAGzC,IAAH,KAAY,YAAhB,EAA8B;AAC5B8C,kBAAcL,GAAGO,cAAH,CAAkB,CAAlB,EAAqBC,KAArB,GAA6BL,SAA3C;AACAG,kBAAcN,GAAGO,cAAH,CAAkB,CAAlB,EAAqBE,KAArB,GAA6BL,SAA3C;AACD,GAHD,MAGO;AACLC,kBAAcL,GAAGQ,KAAH,GAAWL,SAAzB;AACAG,kBAAcN,GAAGS,KAAH,GAAWL,SAAzB;AACD;;AAED,SAAO,EAAC/S,GAAGgT,WAAJ,EAAiBxV,GAAGyV,WAApB,EAAP;AACD;;QAEOtB,oB,GAAAA,oB;QAAsBO,Y,GAAAA,Y;QAAcG,kB,GAAAA,kB;QAAoBK,wB,GAAAA,wB;;;;;;;;;;;;ACzIhE;AACA,IAAIW,oCAAJ;;AAEA;;;;;;;AAOA,SAASC,wBAAT,CAAkCnB,SAAlC,EAAmE;AAAA,MAAtBP,YAAsB,uEAAP,KAAO;;AACjE,MAAIyB,gCAAgCvV,SAAhC,IAA6C8T,YAAjD,EAA+D;AAC7D,QAAM3b,KAAKkc,UAAU1e,QAAV,CAAmByS,aAAnB,CAAiC,KAAjC,CAAX;AACAmN,kCAA8B,eAAepd,GAAG4G,KAAlB,GAA0B,WAA1B,GAAwC,iBAAtE;AACD;;AAED,SAAOwW,2BAAP;AACD;;AAED;;;;;;;;;;AAUA,SAASE,KAAT,CAAe9Z,KAAf,EAAwC;AAAA,MAAlBmE,GAAkB,uEAAZ,CAAY;AAAA,MAATC,GAAS,uEAAH,CAAG;;AACtC,SAAOpI,KAAKmI,GAAL,CAASC,GAAT,EAAcpI,KAAKoI,GAAL,CAASD,GAAT,EAAcnE,KAAd,CAAd,CAAP;AACD;;AAGD;;;;;;;;;;;;;;;;AAgBA,SAAS+Z,cAAT,CAAwBpP,IAAxB,EAA8BqP,EAA9B,EAAkCC,EAAlC,EAAsCC,EAAtC,EAA0CC,EAA1C,EAA8C;AAC5C,SAAOC,oBAAoBC,wBAAwB1P,IAAxB,EAA8BqP,EAA9B,EAAkCE,EAAlC,CAApB,EAA2DD,EAA3D,EAA+DE,EAA/D,CAAP;AACD;;AAED;;;;;;;;;;AAUA,SAASC,mBAAT,CAA6BE,CAA7B,EAAgCC,EAAhC,EAAoCC,EAApC,EAAwC;AACtC;AACA,MAAIF,MAAM,CAAN,IAAWA,MAAM,CAArB,EAAwB;AACtB,WAAOA,CAAP;AACD;;AAED;AACA,MAAIG,MAAMH,IAAIC,EAAd;AACA,MAAIG,MAAMH,KAAKD,KAAKE,KAAKD,EAAV,CAAf;AACA,MAAMI,MAAMH,KAAKF,KAAK,IAAIE,EAAT,CAAjB;;AAEA;AACAC,SAAOH,KAAKI,MAAMD,GAAX,CAAP;AACAC,SAAOJ,KAAKK,MAAMD,GAAX,CAAP;;AAEA;AACA,SAAOD,MAAMH,KAAKI,MAAMD,GAAX,CAAb;AACD;;AAED;;;;;;;;AAQA,SAASJ,uBAAT,CAAiCO,IAAjC,EAAuCZ,EAAvC,EAA2CE,EAA3C,EAA+C;AAC7C,MAAMW,UAAU,IAAhB;AACA,MAAMC,gBAAgB,CAAtB,CAF6C,CAEpB;;AAEzB,MAAIF,QAAQ,CAAZ,EAAe;AACb,WAAO,CAAP;AACD,GAFD,MAEO,IAAIA,QAAQ,CAAZ,EAAe;AACpB,WAAO,CAAP;AACD;;AAED;AACA,MAAIN,IAAIM,IAAR;;AAEA;AACA,MAAIG,OAAO,CAAX;AACA,MAAIC,OAAO,CAAX;AACA,MAAIhb,QAAQ,CAAZ;AACA,OAAK,IAAIwJ,IAAI,CAAb,EAAgBA,IAAIsR,aAApB,EAAmCtR,GAAnC,EAAwC;AACtCxJ,YAAQoa,oBAAoBE,CAApB,EAAuBN,EAAvB,EAA2BE,EAA3B,CAAR;AACA,QAAMe,aAAa,CAACb,oBAAoBE,IAAIO,OAAxB,EAAiCb,EAAjC,EAAqCE,EAArC,IAA2Cla,KAA5C,IAAqD6a,OAAxE;AACA,QAAI7e,KAAKiI,GAAL,CAASjE,QAAQ4a,IAAjB,IAAyBC,OAA7B,EAAsC;AACpC,aAAOP,CAAP;AACD,KAFD,MAEO,IAAIte,KAAKiI,GAAL,CAASgX,UAAT,IAAuBJ,OAA3B,EAAoC;AACzC;AACD,KAFM,MAEA;AACL,UAAI7a,QAAQ4a,IAAZ,EAAkB;AAChBG,eAAOT,CAAP;AACD,OAFD,MAEO;AACLU,eAAOV,CAAP;AACD;AACDA,WAAK,CAACta,QAAQ4a,IAAT,IAAiBK,UAAtB;AACD;AACF;;AAED;AACA;AACA;AACA,OAAK,IAAIzR,KAAI,CAAb,EAAgBxN,KAAKiI,GAAL,CAASjE,QAAQ4a,IAAjB,IAAyBC,OAAzB,IAAoCrR,KAAIsR,aAAxD,EAAuEtR,IAAvE,EAA4E;AAC1E,QAAIxJ,QAAQ4a,IAAZ,EAAkB;AAChBG,aAAOT,CAAP;AACAA,UAAI,CAACA,IAAIU,IAAL,IAAa,CAAjB;AACD,KAHD,MAGO;AACLA,aAAOV,CAAP;AACAA,UAAI,CAACA,IAAIS,IAAL,IAAa,CAAjB;AACD;AACD/a,YAAQoa,oBAAoBE,CAApB,EAAuBN,EAAvB,EAA2BE,EAA3B,CAAR;AACD;AACD,SAAOI,CAAP;AACD;;AAED;AACA,SAASY,uBAAT,CAAiCliB,OAAjC,EAA0C8f,MAA1C,EAAkD;AAChD,MAAMrY,aAAazH,QAAQyH,UAA3B;AACA,MAAMkO,WAAWlO,WAAWkO,QAA5B;AACA,MAAIjI,QAAQ,CAAZ;AACA,OAAK,IAAI8C,IAAI,CAAR,EAAWgG,MAAMb,SAAS9R,MAA/B,EAAuC2M,IAAIgG,GAA3C,EAAgDhG,GAAhD,EAAqD;AACnD,QAAIsP,UAAUnK,SAASnF,CAAT,EAAY7I,SAAZ,CAAsB+E,QAAtB,CAA+BoT,MAA/B,CAAd,EAAsD;AACpD;AACD;AACD,QAAInK,SAASnF,CAAT,MAAgBxQ,OAApB,EAA6B;AAC3B,aAAO0N,KAAP;AACD;AACDA;AACD;AACD,SAAO,CAAC,CAAR;AACD;;QAEOmT,wB,GAAAA,wB;QAA0BC,K,GAAAA,K;QAAOC,c,GAAAA,c;QAAgBmB,uB,GAAAA,uB;;;;;;;;;;;;;;;;AC9JzD;;;;AACA;;;;;;;;;;;;AAEA,IAAMxe,MAAMhC,MAAZ;AACA,IAAMiD,MAAM3D,QAAZ;AACA,IAAM4D,OAAOD,IAAIC,IAAjB;;AAEA;AACA,SAASud,qBAAT,CAA+B3e,EAA/B,EAAmC;AACjC,MAAM4e,WAAW5e,GAAGiE,UAAH,CAAcA,UAA/B;AACA,MAAI2a,SAASza,SAAT,CAAmB+E,QAAnB,CAA4B,WAA5B,CAAJ,EAA8C;AAC5C,WAAOlJ,EAAP;AACD;AACD,SAAO2e,sBAAsBC,QAAtB,CAAP;AACD;;AAED;AACA;AACO,IAAMtd,4BAAU;AACrBC,WAAS,QADY;AAErBsd,YAAU,iBAFW;AAGrBpd,QAAM,aAHe;AAIrBqd,eAAa,oBAJQ;AAKrBC,qBAAmB;AALE,CAAhB;;AAQA,IAAM9c,4BAAU;AACrB+c,gBAAc,eADO;AAErBC,gBAAc,eAFO;AAGrBC,eAAa,cAHQ;AAIrBC,wBAAsB;AAJD,CAAhB;;AAOP,IAAMC,aAAa,CACjB,EAACviB,KAAK,SAAN,EAAiBuI,SAAS,EAA1B,EAA8Bia,SAAS,SAAvC,EADiB,EAEjB,EAACxiB,KAAK,WAAN,EAAmBuI,SAAS,EAA5B,EAAgCia,SAAS,SAAzC,EAFiB,EAGjB,EAACxiB,KAAK,OAAN,EAAeuI,SAAS,EAAxB,EAA4Bia,SAAS,OAArC,EAHiB,CAAnB;;IAMMvQ,M;;;;;;;AAoBJ;wBACgB;AACd,aAAO,KAAKwQ,gBAAL,GAAwB,KAAKA,gBAAL,EAAxB,GAAkD,EAAzD;AACD;;;wBAEa;AACZ;AACA,aAAO,KAAK9P,IAAL,CAAUhL,SAAjB;AACD;;AAED;;;;wBACsB;AACpB,aAAO,KAAKhI,OAAL,CAAaiK,gBAAb,CAA8B,iBAA9B,CAAP;AACD;;;;;AAvBD;;;;;;0BAMajK,O,EAASC,M,EAAQ;AAC5B,aAAO,IAAIqS,MAAJ,CAAWtS,OAAX,EAAoBC,MAApB,CAAP;AACD;;;wBAhBoB;AACnB,aAAO6E,OAAP;AACD;;;wBAEoB;AACnB,aAAOW,OAAP;AACD;;;AA2BD,kBAAYzF,OAAZ,EAAqBC,MAArB,EAA6B;AAAA;;AAG3B;AAH2B,gHACrBD,OADqB,EACZC,MADY;;AAAA,UAiK7B8iB,cAjK6B,GAiKZ,UAACjiB,GAAD,EAAS;AACxBA,UAAI8I,cAAJ;AACA,UAAI,CAAC,MAAKxB,OAAL,CAAa4a,UAAb,EAAL,EAAgC;AAC9B,cAAKC,IAAL;AACD;AACF,KAtK4B;;AAAA,UAgM7BC,gBAhM6B,GAgMV,gBAAc;AAAA,UAAZviB,MAAY,QAAZA,MAAY;AAAA,UACxB+M,KADwB,GACR/M,MADQ,CACxB+M,KADwB;AAAA,UACjBvD,KADiB,GACRxJ,MADQ,CACjBwJ,KADiB;;AAG/B;;AACA,UAAI,CAAC,MAAKgZ,oBAAL,CAA0BzV,KAA1B,CAAL,EAAuC;AACrC,YAAM8I,MAAMrM,MAAMtG,MAAlB;AACA,YAAMsK,YAAY,MAAK/F,OAAL,CAAagb,kBAAb,CAAgCjZ,MAAMqM,MAAM,CAAZ,CAAhC,CAAlB;AACA,cAAK6M,gBAAL,CAAsBlV,SAAtB;AACA,cAAK/F,OAAL,CAAakb,YAAb;AACD;AACD,YAAKra,KAAL;AACD,KA3M4B;;AAAA,UA6M7Bsa,aA7M6B,GA6Mb,YAAM;AACpB,YAAKta,KAAL;AACD,KA/M4B;;AAI3B,UAAKb,OAAL,GAAe,MAAKoD,aAAL,EAAf;;AAEA,UAAKgY,aAAL,GAAqB,CAAC,CAAtB,CAN2B,CAMF;AACzB,UAAK1T,QAAL,GAAgB,KAAhB,CAP2B,CAOJ;AACvB,UAAKjG,SAAL,GAAiB,KAAjB,CAR2B,CAQH;;AAExB;AACA,QAAI,MAAKyB,mBAAL,KAA6BD,SAAjC,EAA4C;AAC1C,YAAKC,mBAAL,GAA2B,IAA3B;AACD;;AAED;AACA,QAAI,MAAKmY,YAAL,KAAsBpY,SAA1B,EAAqC;AACnC,YAAKoY,YAAL,GAAoB,IAApB;AACD;;AAED;AACA,QAAI,MAAKC,OAAL,KAAiBrY,SAArB,EAAgC;AAC9B,YAAKqY,OAAL,GAAe,IAAf;AACD;;AAED;AACA,QAAI,CAAC,MAAKZ,gBAAV,EAA4B;AAC1B,YAAKA,gBAAL,GAAwB,UAACa,MAAD,EAAY;AAAA,YAC3BH,aAD2B,SAC3BA,aAD2B;;AAElC,YAAIA,gBAAgB,CAAC,CAArB,EAAwB;AACtB;AACA,iBAAO;AACLxc,mBAAO,MAAK4c,OAAL,CAAaJ,aAAb,EAA4BpP,OAA5B,CAAoCpN,KADtC;AAEL8O,kBAAM,MAAK1N,OAAL,CAAayb,uBAAb,CAAqCL,aAArC;AAFD,WAAP;AAID;AACD,eAAO,EAAP;AACD,OAVD;AAWD;;AAED,UAAKnX,MAAL;AACA,UAAKyX,kBAAL;AAzC2B;AA0C5B;;AAED;;;;;;;;oCAIgB;AAAA;;AACd,aAAO;AACLxX,kBAAU,kBAACC,SAAD;AAAA,iBAAe,OAAKvM,OAAL,CAAa2H,SAAb,CAAuBG,GAAvB,CAA2ByE,SAA3B,CAAf;AAAA,SADL;AAELC,qBAAa,qBAACD,SAAD;AAAA,iBAAe,OAAKvM,OAAL,CAAa2H,SAAb,CAAuBC,MAAvB,CAA8B2E,SAA9B,CAAf;AAAA,SAFR;AAGLwX,iBAAS,iBAACC,IAAD,EAAOhd,KAAP;AAAA,iBAAiB,OAAKhH,OAAL,CAAa2W,YAAb,CAA0BqN,IAA1B,EAAgChd,KAAhC,CAAjB;AAAA,SAHJ;AAILid,gBAAQ,gBAACD,IAAD;AAAA,iBAAU,OAAKhkB,OAAL,CAAakkB,eAAb,CAA6BF,IAA7B,CAAV;AAAA,SAJH;AAKL7I,6BAAqB;AAAA,iBAAM,OAAKgJ,WAAL,CAAiBlgB,qBAAjB,EAAN;AAAA,SALhB;AAMLuK,eAAO;AAAA,iBAAM,OAAK2V,WAAL,CAAiB3V,KAAjB,EAAN;AAAA,SANF;AAOL4V,sBAAc,wBAAM;AAClB,iBAAKD,WAAL,CAAiBE,QAAjB,GAA4B,CAA5B;AACD,SATI;AAULC,wBAAgB,0BAAM;AACpB,iBAAKH,WAAL,CAAiBE,QAAjB,GAA4B,CAAC,CAA7B;AACD,SAZI;AAaLE,wBAAgB,wBAACC,YAAD,EAAexd,KAAf;AAAA,iBAAyB,OAAKyd,MAAL,CAAYra,KAAZ,CAAkByD,WAAlB,CAA8B2W,YAA9B,EAA4Cxd,KAA5C,CAAzB;AAAA,SAbX;AAcL0d,uBAAe,uBAACV,IAAD,EAAOhd,KAAP;AAAA,iBAAiB,OAAKyd,MAAL,CAAY9N,YAAZ,CAAyBqN,IAAzB,EAA+Bhd,KAA/B,CAAjB;AAAA,SAdV;AAeL2d,sBAAc,sBAACX,IAAD;AAAA,iBAAU,OAAKS,MAAL,CAAYP,eAAZ,CAA4BF,IAA5B,CAAV;AAAA,SAfT;AAgBLY,+BAAuB;AAAA,iBAAM,OAAKH,MAAL,CAAY1X,YAAlB;AAAA,SAhBlB;AAiBL8X,kBAAU,kBAACrV,UAAD;AAAA,iBAAgB,OAAKwD,IAAL,CAAU/L,IAAV,CAAe,EAACuI,sBAAD,EAAf,CAAhB;AAAA,SAjBL;AAkBLwT,oBAAY;AAAA,iBAAM,OAAKhQ,IAAL,CAAUiQ,IAAhB;AAAA,SAlBP;AAmBL6B,gCAAwB,gCAACC,mBAAD,EAAyB;AAC/C,iBAAKC,YAAL,CAAkBC,WAAlB,GAAgCF,mBAAhC;AACD,SArBI;AAsBLG,4BAAoB;AAAA,iBAAM,OAAKtB,OAAL,CAAa/f,MAAnB;AAAA,SAtBf;AAuBLggB,iCAAyB,iCAACnW,KAAD;AAAA,iBAAW,OAAKkW,OAAL,CAAalW,KAAb,EAAoBuX,WAA/B;AAAA,SAvBpB;AAwBLE,iCAAyB,iCAACzX,KAAD,EAAQsW,IAAR,EAAchd,KAAd;AAAA,iBAAwB,OAAK4c,OAAL,CAAalW,KAAb,EAAoBiJ,YAApB,CAAiCqN,IAAjC,EAAuChd,KAAvC,CAAxB;AAAA,SAxBpB;AAyBLoe,gCAAwB,gCAAC1X,KAAD,EAAQsW,IAAR;AAAA,iBAAiB,OAAKJ,OAAL,CAAalW,KAAb,EAAoBwW,eAApB,CAAoCF,IAApC,CAAjB;AAAA,SAzBnB;AA0BLZ,4BAAoB,4BAACnV,IAAD,EAAU;AAC5B,cAAMuI,MAAM,OAAKoN,OAAL,CAAa/f,MAAzB;AACA,eAAK,IAAI2M,IAAI,CAAb,EAAgBA,IAAIgG,GAApB,EAAyBhG,GAAzB,EAA8B;AAC5B,gBAAI,OAAKoT,OAAL,CAAapT,CAAb,MAAoBvC,IAAxB,EAA8B;AAC5B,qBAAOuC,CAAP;AACD;AACF;AACD,iBAAO,CAAC,CAAR;AACD,SAlCI;AAmCL8S,sBAAc,wBAAM;AAClB,cAAMtQ,OAAO,OAAKA,IAAlB;AACA,iBAAK9E,IAAL,CAAUzI,QAAQgd,YAAlB,EAAgC;AAC9B/U,mBAAOsF,KAAK5G,wBADkB;AAE9BjC,mBAAO6I,KAAK7G,mBAFkB;AAG9BkZ,uBAAW,OAAKA;AAHc,WAAhC;AAKD,SA1CI;AA2CLC,8BAAsB;AAAA,iBAAM5hB,IAAI2J,WAAV;AAAA,SA3CjB;AA4CLkY,sBAAc,sBAAChZ,SAAD;AAAA,iBAAe3H,KAAK+C,SAAL,CAAeG,GAAf,CAAmByE,SAAnB,CAAf;AAAA,SA5CT;AA6CLiZ,yBAAiB,yBAACjZ,SAAD;AAAA,iBAAe3H,KAAK+C,SAAL,CAAeC,MAAf,CAAsB2E,SAAtB,CAAf;AAAA;AA7CZ,OAAP;AA+CD;;AAED;;;;2BAC6C;AAAA,UAAxCkZ,WAAwC,uEAA1B,UAACjiB,EAAD;AAAA,eAAQ,uBAAaA,EAAb,CAAR;AAAA,OAA0B;;AAC3C,WAAK2gB,WAAL,GAAmB,KAAKnkB,OAAL,CAAaiP,aAAb,CAA2BxJ,QAAQ+c,YAAnC,CAAnB;AACA,WAAKwC,YAAL,GAAoB,KAAKhlB,OAAL,CAAaiP,aAAb,CAA2BxJ,QAAQkd,oBAAnC,CAApB;AACA,WAAK8B,MAAL,GAAc,KAAKzkB,OAAL,CAAaiP,aAAb,CAA2BxJ,QAAQid,WAAnC,CAAd;AACA,WAAK1P,IAAL,GAAYyS,YAAY,KAAKhB,MAAjB,CAAZ;AACD;;;yCAEoB;AACnB;AACA,UAAMiB,iBAAiB,KAAKC,eAAL,CAAqB,CAArB,CAAvB;AACA,UAAMC,MAAMF,iBAAiB,KAAK9B,OAAL,CAAa3b,OAAb,CAAqByd,cAArB,CAAjB,GAAyD,KAAKpa,mBAAL,GAA2B,CAA3B,GAA+B,CAAC,CAArG;;AAEA,UAAIsa,MAAM,CAAC,CAAX,EAAc;AACZ,aAAKpC,aAAL,GAAqBoC,GAArB;AACA,aAAK5S,IAAL,CAAU1K,oBAAV,CAA+Bsd,GAA/B;AACD;;AAED;AACA,UAAI,KAAK5lB,OAAL,CAAauH,YAAb,CAA0B,eAA1B,MAA+C,MAAnD,EAA2D;AACzD,aAAKuI,QAAL,GAAgB,IAAhB;AACD;AACF;;;6BAEQ;AACP,UAAI,KAAK4T,OAAT,EAAkB;AAChB,aAAKe,MAAL,CAAY9c,SAAZ,CAAsBG,GAAtB,CAA0BhD,QAAQyd,iBAAlC;AACD;AACD,WAAKnT,iBAAL;AACD;;;8BAES;AACR,WAAKG,oBAAL;AACD;;AAED;;;;wCACoB;AAClB,WAAK4U,WAAL,CAAiB1jB,gBAAjB,CAAkC,OAAlC,EAA2C,KAAKsiB,cAAhD;AACA,WAAKoB,WAAL,CAAiB1jB,gBAAjB,CAAkC,SAAlC,EAA6C,KAAKolB,qBAAlD;AACA,WAAK1B,WAAL,CAAiB1jB,gBAAjB,CAAkC,OAAlC,EAA2C,KAAKolB,qBAAhD;;AAEA;AACA,WAAK7S,IAAL,CAAU8S,MAAV,CAAiB,mBAASrgB,OAAT,CAAiBK,cAAlC,EAAkD,KAAKod,gBAAvD;AACA,WAAKlQ,IAAL,CAAU8S,MAAV,CAAiB,mBAASrgB,OAAT,CAAiBM,YAAlC,EAAgD,KAAKwd,aAArD;AAED;;AAED;;;;2CACuB;AACrB,WAAKY,WAAL,CAAiBzjB,mBAAjB,CAAqC,OAArC,EAA8C,KAAKqiB,cAAnD;AACA,WAAKoB,WAAL,CAAiBzjB,mBAAjB,CAAqC,SAArC,EAAgD,KAAKmlB,qBAArD;AACA,WAAK1B,WAAL,CAAiBzjB,mBAAjB,CAAqC,OAArC,EAA8C,KAAKmlB,qBAAnD;;AAEA;AACA,WAAK7S,IAAL,CAAU+S,QAAV,CAAmB,mBAAStgB,OAAT,CAAiBK,cAApC,EAAoD,KAAKod,gBAAzD;AACA,WAAKlQ,IAAL,CAAU+S,QAAV,CAAmB,mBAAStgB,OAAT,CAAiBM,YAApC,EAAkD,KAAKwd,aAAvD;AAED;;;yBAEI7V,K,EAAO;AACV,aAAO,KAAKkW,OAAL,CAAalW,KAAb,KAAuB,IAA9B;AACD;;;0CASqB5M,G,EAAK;AACzB;AACA;AACA,UAAMklB,wBAAwB,CAA9B;AACA,UAAIllB,IAAImlB,UAAJ,KAAmBD,qBAAvB,EAA8C;AAC5C;AACD;;AAED;AACA,UAAME,cAAcplB,IAAI2c,IAAJ,KAAa,SAAb,KAA2B3c,IAAIT,GAAJ,KAAY,OAAZ,IAAuBS,IAAI8H,OAAJ,KAAgB,EAAlE,CAApB;AACA,UAAIsd,WAAJ,EAAiB;AACfplB,YAAI8I,cAAJ;AACD;;AAED,UAAMuc,cAAcvD,WAAWwD,IAAX,CAAgB,iBAA6B;AAAA,YAA3B/lB,GAA2B,SAA3BA,GAA2B;AAAA,YAAtBuI,OAAsB,SAAtBA,OAAsB;AAAA,YAAbia,OAAa,SAAbA,OAAa;;AAC/D,eAAO/hB,IAAI2c,IAAJ,KAAaoF,OAAb,KAAyB/hB,IAAIT,GAAJ,KAAYA,GAAZ,IAAmBS,IAAI8H,OAAJ,KAAgBA,OAA5D,CAAP;AACD,OAFmB,CAApB;;AAIA,UAAIud,WAAJ,EAAiB;AACf,aAAKpD,cAAL,CAAoBjiB,GAApB;AACD;AACF;;AAED;;;;uCAkBmB;AACjB,aAAO,KAAK0iB,aAAZ;AACD;;;qCAEgB9V,K,EAAO;AACtB;AACA,UAAM2Y,oBAAoB,KAAK7C,aAA/B;AACA,UAAI6C,qBAAqB,CAAzB,EAA4B;AAC1B,aAAKje,OAAL,CAAagd,sBAAb,CAAoC,KAAK5B,aAAzC,EAAwD,eAAxD;AACD;;AAED,WAAKA,aAAL,GAAqB9V,SAAS,CAAT,IAAcA,QAAQ,KAAKtF,OAAL,CAAa8c,kBAAb,EAAtB,GAA0DxX,KAA1D,GAAkE,CAAC,CAAxF;AACA,UAAIqX,sBAAsB,EAA1B;AACA,UAAI,KAAKvB,aAAL,IAAsB,CAA1B,EAA6B;AAC3BuB,8BAAsB,KAAK3c,OAAL,CAAayb,uBAAb,CAAqC,KAAKL,aAA1C,EAAyD8C,IAAzD,EAAtB;AACA,aAAKle,OAAL,CAAa+c,uBAAb,CAAqC,KAAK3B,aAA1C,EAAyD,eAAzD,EAA0E,MAA1E;AACD;AACD,WAAKpb,OAAL,CAAa0c,sBAAb,CAAoCC,mBAApC;AACD;;;iCAEY;AACX,aAAO,KAAKjV,QAAZ;AACD;;;gCAEWA,Q,EAAU;AAAA,UACbuS,QADa,GACDvd,OADC,CACbud,QADa;;AAEpB,WAAKvS,QAAL,GAAgBA,QAAhB;AACA,UAAI,KAAKA,QAAT,EAAmB;AACjB,aAAK1H,OAAL,CAAakE,QAAb,CAAsB+V,QAAtB;AACA,aAAKja,OAAL,CAAa2b,OAAb,CAAqB,eAArB,EAAsC,MAAtC;AACA,aAAK3b,OAAL,CAAakc,cAAb;AACD,OAJD,MAIO;AACL,aAAKlc,OAAL,CAAaoE,WAAb,CAAyB6V,QAAzB;AACA,aAAKja,OAAL,CAAa6b,MAAb,CAAoB,eAApB;AACA,aAAK7b,OAAL,CAAagc,YAAb;AACD;AACF;;;2BAGM;AACL,UAAI,KAAKX,YAAT,EAAuB;AACrB,aAAK8C,aAAL;AACD;AAHI,UAIEthB,IAJF,GAIUH,OAJV,CAIEG,IAJF;AAKL;;AACA,UAAMuK,aAAa,KAAKgU,aAAL,GAAqB,CAArB,GAAyB,CAAzB,GAA6B,KAAKA,aAArD;AACA,UAAI,KAAKE,OAAT,EAAkB;AAChB,YAAM8C,qBAAqBrE,sBAAsB,KAAKyB,OAAL,CAAapU,UAAb,CAAtB,CAA3B;AACA,aAAKiX,oBAAL,CAA0BD,kBAA1B;AACD;AACD,WAAKpe,OAAL,CAAakE,QAAb,CAAsBrH,IAAtB;AACA,WAAKmD,OAAL,CAAayc,QAAb,CAAsBrV,UAAtB;AACA,WAAK3F,SAAL,GAAiB,IAAjB;AACD;;;4BAGO;AAAA,UACC5E,IADD,GACSH,OADT,CACCG,IADD;;AAEN,WAAKmD,OAAL,CAAaoE,WAAb,CAAyBvH,IAAzB;AACA,WAAKmD,OAAL,CAAaoG,KAAb;AACA,UAAI,KAAKiV,YAAT,EAAuB;AACrB,aAAKiD,YAAL;AACD;AACF;;;yCAEoBF,kB,EAAoB;AACvC,UAAMnZ,cAAc,KAAKjF,OAAL,CAAakd,oBAAb,EAApB;;AADuC,kCAEnB,KAAKld,OAAL,CAAa+S,mBAAb,EAFmB;AAAA,UAEhCpX,IAFgC,yBAEhCA,IAFgC;AAAA,UAE1BD,GAF0B,yBAE1BA,GAF0B;;AAIvC,WAAKsE,OAAL,CAAasc,aAAb,CAA2B,aAA3B,EAA0C,MAA1C;AACA,WAAKtc,OAAL,CAAamc,cAAb,CAA4B,SAA5B,EAAuC,OAAvC;AACA,UAAM7L,aAAa,KAAKtQ,OAAL,CAAawc,qBAAb,EAAnB;AACA,UAAM+B,gBAAgBH,mBAAmB7Y,SAAzC;AACA,WAAKvF,OAAL,CAAamc,cAAb,CAA4B,SAA5B,EAAuC,EAAvC;AACA,WAAKnc,OAAL,CAAauc,YAAb,CAA0B,aAA1B;;AAEA,UAAIiC,cAAc9iB,MAAM6iB,aAAxB;AACA,UAAME,eAAeD,cAAc,CAAnC;AACA,UAAME,kBAAkBF,cAAclO,UAAd,GAA2BrL,WAAnD;AACA,UAAIwZ,YAAJ,EAAkB;AAChBD,sBAAc,CAAd;AACD,OAFD,MAEO,IAAIE,eAAJ,EAAqB;AAC1BF,sBAAc5jB,KAAKoI,GAAL,CAAS,CAAT,EAAYiC,cAAcqL,UAA1B,CAAd;AACD;;AAED,WAAKtQ,OAAL,CAAamc,cAAb,CAA4B,MAA5B,EAAuCxgB,IAAvC;AACA,WAAKqE,OAAL,CAAamc,cAAb,CAA4B,KAA5B,EAAsCqC,WAAtC;AACA,WAAKxe,OAAL,CAAamc,cAAb,CAA4B,kBAA5B,cAA0DoC,aAA1D;AACD;;;8BAEStmB,G,EAAK;AACb;AACA,WAAK,IAAImQ,IAAI,CAAR,EAAWoT,UAAU,KAAKA,OAA1B,EAAmCmD,MAAxC,EAAiDA,SAASnD,QAAQpT,CAAR,CAA1D,EAAuEA,GAAvE,EAA4E;AAC1E,YAAIuW,OAAO1R,EAAP,KAAchV,GAAd,IAAqB0mB,OAAOxf,YAAP,CAAoB,MAApB,MAAgClH,GAAzD,EAA8D;AAC5D,iBAAO0mB,MAAP;AACD;AACF;AACD,aAAO,IAAP;AACD;;;oCAEe;AACd,WAAK3e,OAAL,CAAamd,YAAb,CAA0BzgB,QAAQwd,WAAlC;AACD;;;mCAEc;AACb,WAAKla,OAAL,CAAaod,eAAb,CAA6B1gB,QAAQwd,WAArC;AACD;;;yCAEoB5U,K,EAAO;AAC1B,UAAI,CAAC,KAAK8V,aAAN,IAAuB,CAAC9V,KAA5B,EAAmC;AACjC,eAAO,KAAP;AACD;AACD,UAAI,KAAK8V,aAAL,CAAmB3f,MAAnB,KAA8B6J,MAAM7J,MAAxC,EAAgD;AAC9C,eAAO,KAAP;AACD;AACD,UAAM2S,MAAM9I,MAAM7J,MAAlB;AACA,WAAK,IAAI2M,IAAI,CAAb,EAAgBA,IAAIgG,GAApB,EAAyBhG,GAAzB,EAA8B;AAC5B,YAAI,KAAKgT,aAAL,CAAmBhT,CAAnB,MAA0B9C,MAAM8C,CAAN,CAA9B,EAAwC;AACtC,iBAAO,KAAP;AACD;AACF;AACD,aAAO,IAAP;AACD;;;;;;kBAGY8B,M;;;;;;;;;;;;;;;;;;ACxZf;;;;;;;;;;;;AAEA,IAAM5O,MAAMhC,MAAZ;AACA,IAAMiD,MAAM3D,QAAZ;AACA,IAAM4D,OAAOD,IAAIC,IAAjB;;AAEA;AACA;AACO,IAAME,4BAAU;AACrBkiB,eAAa,aADQ;AAErB3E,YAAU,iBAFW;AAGrBpd,QAAM,aAHe;AAIrBqd,eAAa,oBAJQ;AAKrBC,qBAAmB;AALE,CAAhB;;AAQA,IAAM9c,4BAAU;AACrB+c,gBAAc,eADO;AAErBC,gBAAc,eAFO;AAGrBC,eAAa,cAHQ;AAIrBC,wBAAsB;AAJD,CAAhB;;IAODpQ,M;;;;;;;AAsBJ;;;;;;0BAMavS,O,EAASC,M,EAAQ;AAC5B,aAAO,IAAIsS,MAAJ,CAAWvS,OAAX,EAAoBC,MAApB,CAAP;AACD;;;wBAhBoB;AACnB,aAAO6E,OAAP;AACD;;AAdD;;;;;;;;;wBAgBqB;AACnB,aAAOW,OAAP;AACD;;;AAYD,kBAAYzF,OAAZ,EAAqBC,MAArB,EAA6B;AAAA;;AAE3B;AAF2B,gHACrBD,OADqB,eACRuS,OAAO6C,aADC,EACiBnV,MADjB;;AAAA,UAqE7BgnB,gBArE6B,GAqEV,UAACnmB,GAAD,EAAS;AAC1BA,UAAI8I,cAAJ;AAD0B,UAEnBtC,MAFmB,GAETxG,GAFS,CAEnBwG,MAFmB;AAAA,UAInBK,SAJmB,GAINL,MAJM,CAInBK,SAJmB;;;AAM1B,UAAIA,UAAU+E,QAAV,CAAmB5H,QAAQkiB,WAA3B,CAAJ,EAA6C;AAAE;AAC7C,YAAME,UAAU/W,SAAS7I,OAAO8M,OAAP,CAAe+S,OAAxB,EAAiC,EAAjC,CAAhB;AACA,cAAKC,gBAAL,CAAsBF,OAAtB;AACD,OAHD,MAGO,IAAIvf,UAAU+E,QAAV,CAAmB,aAAnB,CAAJ,EAAuC;AAC5C,YAAM2a,QAAQ/f,OAAOG,UAAP,CAAkB6f,sBAAlB,CAAyC3R,QAAzC,CAAkD,CAAlD,EAAqDA,QAArD,CAA8D,CAA9D,CAAd;AACA,YAAMuR,WAAU/W,SAASkX,MAAMrgB,KAAf,EAAsB,EAAtB,CAAhB;AACA,YAAI,CAACugB,OAAOC,KAAP,CAAaN,QAAb,CAAL,EAA4B;AAC1B,gBAAKE,gBAAL,CAAsBF,QAAtB;AACD;AACF;AACF,KArF4B;;AAAA,UAuF7BO,mBAvF6B,GAuFP,UAAC3mB,GAAD,EAAS;AAC7BA,UAAI8I,cAAJ;AAD6B,UAEtBtC,MAFsB,GAEZxG,GAFY,CAEtBwG,MAFsB;AAAA,UAItBK,SAJsB,GAITL,MAJS,CAItBK,SAJsB;;;AAM7B,UAAIA,UAAU+E,QAAV,CAAmB,cAAnB,CAAJ,EAAwC;AAAE;AACxC,YAAMgb,WAAWvX,SAAS7I,OAAON,KAAhB,EAAuB,EAAvB,CAAjB;AACA,cAAK0gB,QAAL,GAAgBA,QAAhB;AACA,cAAKC,QAAL;AACD;AACF,KAlG4B;;AAG3B,QAAI,MAAKT,OAAL,KAAiB7b,SAArB,EAAgC;AAC9B,YAAK6b,OAAL,GAAe,CAAf;AACD;;AAED;AACA,QAAI,MAAKQ,QAAL,KAAkBrc,SAAtB,EAAiC;AAC/B,YAAKqc,QAAL,GAAgB,EAAhB;AACD;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,UAAKtf,OAAL,GAAe,MAAKoD,aAAL,EAAf;;AAEA,UAAKa,MAAL;AAjC2B;AAkC5B;;AAED;;;;;;;;oCAIgB;AACd,aAAO,EAAP;AAED;;;2BAEM,CACN;;;6BAEQ;AACP,WAAK+C,iBAAL;AACA,WAAKuY,QAAL;AACD;;;8BAES;AACR,WAAKpY,oBAAL;AACD;;AAED;;;;wCACoB;AAClB,WAAKvP,OAAL,CAAaS,gBAAb,CAA8B,OAA9B,EAAuC,KAAKwmB,gBAA5C;AACA,WAAKjnB,OAAL,CAAaS,gBAAb,CAA8B,QAA9B,EAAwC,KAAKgnB,mBAA7C;AACD;;AAED;;;;2CACuB;AACrB,WAAKznB,OAAL,CAAaU,mBAAb,CAAiC,OAAjC,EAA0C,KAAKumB,gBAA/C;AACA,WAAKjnB,OAAL,CAAaS,gBAAb,CAA8B,QAA9B,EAAwC,KAAKgnB,mBAA7C;AACD;;;+BAiCqB;AAAA;;AAAA,UAAbP,OAAa,uEAAH,CAAG;;AACpB;AACA,UAAI,KAAKU,YAAL,IAAqB,OAAO,KAAKA,YAAZ,KAA6B,UAAtD,EAAkE;AAChE,aAAKA,YAAL,CAAkBV,OAAlB,EAA2B,KAAKQ,QAAhC,EAA0CG,IAA1C,CAA+C,UAACC,IAAD,EAAU;AAAA,2BACtBA,KAAKC,IADiB;AAAA,cAChDC,UADgD,cAChDA,UADgD;AAAA,cACpCC,UADoC,cACpCA,UADoC;;AAEvD,iBAAKA,UAAL,GAAkBA,UAAlB;AACA,iBAAKf,OAAL,GAAeA,OAAf;AACA,iBAAKc,UAAL,GAAkBA,UAAlB;AACA,iBAAKE,YAAL;AACD,SAND;AAOD,OARD,MAQO;AACL,aAAKhB,OAAL,GAAeA,OAAf;AACA,aAAKgB,YAAL;AACD;AACF;;;qCAEgBhB,O,EAAS;AACxB,UAAI,KAAKe,UAAL,KAAoB,CAAxB,EAA2B;AACzB;AACD;AACD,UAAIf,WAAW,CAAf,EAAkB;AAChBA,kBAAU,CAAV;AACD;;AAED,UAAIA,WAAW,KAAKe,UAApB,EAAgC;AAC9Bf,kBAAU,KAAKe,UAAf;AACD;;AAED,WAAKN,QAAL,CAAcT,OAAd;AACD;;AAED;;;;;;;oCAIgB;AACd,UAAMe,aAAa,KAAKA,UAAxB;AACA,UAAMf,UAAU,KAAKA,OAArB;;AAEA,UAAMiB,YAAY,EAAlB;AACA,UAAIF,aAAa,CAAjB,EAAoB;AAClB,aAAK,IAAIzX,IAAI,CAAb,EAAgBA,KAAKyX,UAArB,EAAiCzX,GAAjC,EAAsC;AACpC2X,oBAAUra,IAAV,CAAe0C,CAAf;AACD;AACF,OAJD,MAIO;AACL2X,kBAAUra,IAAV,CAAe,CAAf;AACA,YAAIoZ,UAAU,CAAd,EAAiB;AACfiB,oBAAUra,IAAV,CAAe,KAAf;AACD;;AAED,YAAIoZ,UAAU,CAAd,EAAiB;AACf,eAAK,IAAI1W,KAAI,CAAb,EAAgBA,MAAK,CAArB,EAAwBA,IAAxB,EAA6B;AAC3B2X,sBAAUra,IAAV,CAAe0C,EAAf;AACD;AACF,SAJD,MAIO,IAAI0W,WAAW,CAAX,IAAgBe,aAAaf,OAAb,IAAwB,CAA5C,EAA+C;AACpD,eAAK,IAAI1W,MAAI0W,UAAU,CAAvB,EAA0B1W,OAAK0W,UAAU,CAAzC,EAA4C1W,KAA5C,EAAiD;AAC/C2X,sBAAUra,IAAV,CAAe0C,GAAf;AACD;AACF,SAJM,MAIA;AACL,eAAK,IAAIA,MAAIyX,aAAa,CAA1B,EAA6BzX,MAAIyX,UAAjC,EAA6CzX,KAA7C,EAAkD;AAChD2X,sBAAUra,IAAV,CAAe0C,GAAf;AACD;AACF;;AAED;AACA,YAAIyX,aAAaf,OAAb,GAAuB,CAA3B,EAA8B;AAC5BiB,oBAAUra,IAAV,CAAe,KAAf;AACD;AACDqa,kBAAUra,IAAV,CAAema,UAAf;AACD;;AAED,aAAOE,SAAP;AACD;;;mCAEc;AAAA;;AACb,UAAMA,YAAY,KAAKC,aAAL,EAAlB;;AAEA,UAAIhS,OAAO,2BAAX;AACAA,0CAAiC,KAAK8Q,OAAL,KAAiB,CAAjB,GAAqB,WAArB,GAAmC,EAApE,0BAAyF,KAAKA,OAAL,GAAe,CAAxG;AACA,UAAMmB,YAAYF,UAAUzV,GAAV,CAAc,UAACzE,IAAD,EAAOP,KAAP,EAAiB;AAC/C,YAAIO,SAAS,KAAb,EAAoB;AAClB,iBAAO,2CAAP;AACD;AACD,2CAAgC,OAAKiZ,OAAL,KAAiBjZ,IAAjB,GAAwB,SAAxB,GAAoC,EAApE,yBAAyFA,IAAzF,UAAkGA,IAAlG;AAED,OANiB,CAAlB;AAOAmI,cAAQiS,UAAUnQ,IAAV,CAAe,EAAf,CAAR;AACA9B,0CAAiC,KAAK8Q,OAAL,KAAiB,KAAKe,UAAtB,GAAmC,WAAnC,GAAiD,EAAlF,0BAAuG,KAAKf,OAAL,GAAe,CAAtH;AACA9Q,cAAQ,OAAR;;AAEA,UAAI,KAAKkS,aAAT,EAAwB;AACtBlS,gBAAQ,KAAKmS,mBAAL,EAAR;AACD;AACD,WAAKvoB,OAAL,CAAa0T,SAAb,GAAyB0C,IAAzB;AACD;;;0CAEqB;AACpB,UAAIA,OAAO,6BAAX;AACAA,yDAA4C,KAAK6R,UAAjD,eAA+D,KAAKD,UAAL,IAAmB,CAAlF;;AAEA,UAAI,KAAKQ,aAAT,EAAwB;AACtBpS,8KAIuB,KAAKsR,QAAL,KAAkB,CAAlB,GAAsB,WAAtB,GAAoC,EAJ3D,mDAKwB,KAAKA,QAAL,KAAkB,EAAlB,GAAuB,WAAvB,GAAqC,EAL7D,oDAMwB,KAAKA,QAAL,KAAkB,EAAlB,GAAuB,WAAvB,GAAqC,EAN7D,oDAOwB,KAAKA,QAAL,KAAkB,EAAlB,GAAuB,WAAvB,GAAqC,EAP7D,qDAQyB,KAAKA,QAAL,KAAkB,GAAlB,GAAwB,WAAxB,GAAsC,EAR/D;AAaD;;AAED,UAAI,KAAKe,WAAT,EAAsB;AACpBrS;AAUD;;AAEDA,cAAQ,OAAR;;AAEA,aAAOA,IAAP;AACD;;;;;;AAxQG7D,M,CAQG6C,a,GAAgB;AACrBkT,iBAAe,IADM;AAErBE,iBAAe,IAFM;AAGrBC,eAAa;AAHQ,C;kBAmQVlW,M","file":"perfect.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"perfect\"] = factory();\n\telse\n\t\troot[\"perfect\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 54bb7ca0d4cd75184733","/**\n * 组件接口，所有的组件都应该继承该组件\n */\nclass Component {\n\n  /**\n   * 提供静态方法，用来挂载实例化组件\n   * 子组件可以覆盖该方法\n   * @param element\n   * @returns {Component}\n   */\n  static mount(element) {\n    return new Component(element);\n  }\n\n  constructor(element, config = {}) {\n    this.element = element;\n    // 设置 config 到 this 上\n    Object.keys(config).forEach((key) => {\n      this[key] = config[key];\n    });\n\n    this.init();\n  }\n\n  init() {\n    // 初始化\n    // 子组件可以覆盖该方法，具体实现要初始化的内容\n  }\n\n  // 卸载组件\n  unmount() {\n    // 子组件可以盖该方法\n  }\n\n  /**\n   * 公共方法，添加注册事件\n   * @param evtType\n   * @param handler\n   */\n  listen(evtType, handler) {\n    this.element.addEventListener(evtType, handler);\n  }\n\n  /**\n   * 公共方法，卸载已注册的事件\n   * @param evtType\n   * @param handler\n   */\n  unlisten(evtType, handler) {\n    this.element.removeEventListener(evtType, handler);\n  }\n\n  /**\n   * 公共方法，创建并分发事件\n   * @param evtType 事件名称\n   * @param detail 当事件初始化时传递的数据\n   * @param bubbles 表明该事件是否会冒泡\n   * @param cancelable 表明该事件是否可以被取消\n   */\n  emit(evtType, detail, bubbles = false, cancelable = false) {\n    let evt;\n    if (typeof CustomEvent === 'function') {\n      evt = new CustomEvent(evtType, {\n        detail,\n        bubbles,\n        cancelable,\n      });\n    } else {\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(evtType, bubbles, cancelable, detail);\n    }\n\n    this.element.dispatchEvent(evt);\n  }\n}\n\nexport default Component;\n\n\n\n// WEBPACK FOOTER //\n// ./components/base/component.js","// 提供工具类方法\n\nconst MAX_UUID = 1000000;\n\nfunction isWindow(elem) {\n  return elem != null && elem === elem.window;\n}\n\nfunction getWindow(elem) {\n  return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\n/**\n * getStyles\n * @param {type} element\n * @param {type} property\n * @returns {styles}\n */\nfunction getStyles(element, property, extra) {\n  const styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n  if (property) {\n    const cssValue = styles.getPropertyValue(property) || styles[property];\n    if (extra) {\n      const num = parseFloat(cssValue);\n      return extra === true || isFinite(num) ? num || 0 : cssValue;\n    }\n    return cssValue;\n  }\n  return styles;\n}\n\nfunction getOffsetParent(elem) {\n  /* eslint-disable prefer-destructuring */\n  let offsetParent = elem.offsetParent;\n\n  while (offsetParent && elem.tagName.toLowerCase() !== 'html' &&\n  getStyles(offsetParent, 'position') === 'static') {\n    offsetParent = offsetParent.offsetParent;\n  }\n  return offsetParent || document.documentElement;\n}\n\n/**\n * @description 生成唯一的 dom uuid\n * @param {string} prefix 前缀\n * @return {*} uuid\n */\nexport function getUuid(prefix) {\n  let _prefix = prefix;\n  do {\n    // eslint-disable-next-line no-bitwise\n    _prefix += ~~(Math.random() * MAX_UUID); // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(_prefix));\n\n  return _prefix;\n}\n\n// 根据浏览器设置其鼠标滑轮事件\nexport const isWheel = (() => {\n  // compatibility: mouse wheel event\n  // http://www.w3help.org/zh-cn/causes/SD9015\n  const ua = navigator.userAgent;\n  // ie 11 /gecko/i.test(ua) value is true ,so need to judge /firefox/i.test(ua)\n  if (/gecko/i.test(ua) && !(/webkit/i.test(ua)) && (/firefox/i.test(ua))) { // Firefox\n    return false;\n  }\n  // IE Safari Chrome Opera\n  return true;\n})();\n\n/**\n * 返回元素 offset\n * 不支持隐藏的元素\n * 参考 jQuery 实现\n * https://github.com/jquery/jquery/blob/master/src/offset.js\n * @param el\n * @returns {*}\n */\nexport function offset(el) {\n  if (!el) {\n    return;\n  }\n\n  let docElem, win, doc;\n\n  // Support: IE <=11 only\n  // Running getBoundingClientRect on a\n  // disconnected node in IE throws an error\n  if (!el.getClientRects().length) {\n    return {top: 0, left: 0};\n  }\n\n  const rect = el.getBoundingClientRect();\n\n  // Make sure element is not hidden (display: none)\n  if (rect.width || rect.height) {\n    doc = el.ownerDocument;\n    win = getWindow(doc);\n    docElem = doc.documentElement;\n\n    return {\n      top: rect.top + win.pageYOffset - docElem.clientTop,\n      left: rect.left + win.pageXOffset - docElem.clientLeft,\n    };\n  }\n  return rect;\n}\n\n/**\n * 返回其 position 坐标\n * @param elem\n * @return {*}\n */\nexport function position(elem) {\n  if (!elem) {\n    return null;\n  }\n\n  let offsetParent, offsetXY,\n    parentOffset = {top: 0, left: 0};\n\n  if (getStyles(elem, 'position') === 'fixed') {\n    offsetXY = elem.getBoundingClientRect();\n  } else {\n    offsetParent = getOffsetParent(elem);\n    offsetXY = offset(elem);\n    if (elem.tagName.toLowerCase() !== 'html') {\n      parentOffset = offset(offsetParent);\n    }\n    parentOffset.top += getStyles(offsetParent, 'borderTopWidth', true);\n    parentOffset.left += getStyles(offsetParent, 'borderLeftWidth', true);\n  }\n\n  return {\n    top: offsetXY.top - parentOffset.top - getStyles(elem, 'marginTop', true),\n    left: offsetXY.left - parentOffset.left - getStyles(elem, 'marginLeft', true),\n  };\n}\n\nconst util = {\n  getUuid,\n  isWheel,\n  offset,\n  position,\n};\n\nexport default util;\n\n\n\n// WEBPACK FOOTER //\n// ./components/base/util.js","import Component from '../../../base/component';\nimport {getTransformPropertyName, clamp, bezierProgress, getElementIndexOfParent} from './util';\n//import {isWheel} from '../../../base/util';\n\nconst win = window;\nconst dom = document;\nconst body = dom.body;\n\nconst reg = /translateY\\(([-\\w]+)\\)/;\n\n// 定义常量\n// class 样式\nconst classes = {\n  ELEMENT: 'list-menu',\n  LIST_MENU_ITEMS: 'list-menu-items',\n  OPEN: 'list-menu-open',\n  ANIMATING: 'list-menu-animating',\n  TOP_RIGHT: 'list-menu-top-right',\n  BOTTOM_LEFT: 'list-menu-bottom-left',\n  BOTTOM_RIGHT: 'list-menu-bottom-right',\n  LIST_ITEM: 'list-item',\n  ACTIVE: 'active',\n  EXPANDED: 'expanded',\n};\n\n/** @enum {string} */\nconst strings = {\n  ITEMS_SELECTOR: '.list-menu > .list-menu-items', // 第一层 items\n  LIST_ITEM_SELECTOR: '.list-menu > .list-menu-items > .list-item', // 第一层 item\n  LIST_ITEM_BRANCH_SELECTOR: '.list-item[aria-level=\"branch\"]', // 所有分支节点\n  LIST_ITEM_LEAF_SELECTOR: '.list-item:not([aria-level=\"branch\"])', // 所有叶子节点\n  SELECTED_EVENT: 'listmenu:selected',\n  CANCEL_EVENT: 'listmenu:cancel',\n  ARIA_DISABLED_ATTR: 'aria-disabled',\n  ARIA_CONTROLS_ATTR: 'aria-controls',\n  ARIA_CONTROLS_CLICK: 'click',\n  ARIA_LEVEL_ATTR: 'aria-level',\n  ARIA_LEVEL_BRANCH: 'branch',\n  EXPANDED: '.expanded',\n};\n\nconst numbers = {\n  // 打开列表菜单延迟时间\n  SELECTED_TRIGGER_DELAY: 50,\n  // 展开菜单动画持续时间\n  TRANSITION_DURATION_MS: 300,\n  // 菜单开始动画时 scaleX 值，取值为 (0 - 1)\n  TRANSITION_SCALE_ADJUSTMENT_X: 0.5,\n  // 菜单开始动画时 scaleY 值，取值为 (0 - 1)\n  TRANSITION_SCALE_ADJUSTMENT_Y: 0.2,\n  // 动画贝塞尔曲线参数，参见 ./animation/_variable.scss $animation-ease-out (cubic-bezier(0, 0, 0.2, 1)).\n  TRANSITION_X1: 0,\n  TRANSITION_Y1: 0,\n  TRANSITION_X2: 0.2,\n  TRANSITION_Y2: 1,\n};\n\nclass ListMenu extends Component {\n\n  static get classes() {\n    return classes;\n  }\n\n  static get strings() {\n    return strings;\n  }\n\n  static get numbers() {\n    return numbers;\n  }\n\n  /**\n   * 静态方法实例化 ListMenu 组件\n   * @param element\n   * @param config\n   * @returns {ListMenu}\n   */\n  static mount(element, config = {filterDivider: 'list-divider'}) {\n    return new ListMenu(element, config);\n  }\n\n  /** @return {boolean} */\n  get open() {\n    return this.isOpen;\n  }\n\n  /** @param {boolean} value */\n  set open(value) {\n    if (value) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  constructor(element, config) {\n    super(element, config);\n\n    // 是否过滤掉分隔符 list-divider，默认过滤\n    if (this.filterDivider === undefined) {\n      this.filterDivider = 'list-divider';\n    }\n\n    // 如果没有已选中的 option，是否默认选中第一个\n    if (this.selectedFirstOption === undefined) {\n      this.selectedFirstOption = true;\n    }\n\n    // 定义上一个获取焦点的元素\n    this.previousFocus = null;\n\n    // 创建适配器\n    this.adapter = this.createAdapter();\n\n    /** @private {boolean} */\n    this.isOpen = false;\n    /** @private {number} */\n    this.startScaleX = 0;\n    /** @private {number} */\n    this.startScaleY = 0;\n    /** @private {number} */\n    this.targetScale = 1;\n    /** @private {number} */\n    // 缩放 X 大小\n    this.scaleX = 0;\n    /** @private {number} */\n    // 缩放 Y 大小\n    this.scaleY = 0;\n    /** @private {boolean} */\n    // 判断 menu 是否在打开或关闭过程中\n    this.running = false;\n    /** @private {number} */\n    this.selectedTriggerTimerId = 0;\n    /** @private {number} */\n    this.animationRequestId = 0;\n    /** @private {!{ width: number, height: number }} */\n    // 返回菜单 items 大小\n    this.dimensions = null;\n    /** @private {number} */\n    // 开始时间\n    this.startTime = 0;\n    /** @private {number} */\n    // item 高度\n    this.itemHeight = 0;\n\n    this.previousActiveItems = null; // 记录当前选择的元素，对于级联菜单，包括从第一层到最里层\n    this.previousActiveItemsIndex = null; // 记录当前选择的元素 index\n\n    this.render();\n  }\n\n  /**\n   * 封装适配器方法\n   * @return {object}\n   */\n  createAdapter() {\n    return {\n      addClass: (className) => this.element.classList.add(className),\n      removeClass: (className) => this.element.classList.remove(className),\n      hasClass: (className) => this.element.classList.contains(className),\n      hasNecessaryDom: () => Boolean(this.itemsContainer),\n      eventTargetHasClass: (target, className) => target.classList.contains(className),\n      getInnerDimensions: () => {\n        const {itemsContainer} = this;\n        return {width: itemsContainer.offsetWidth, height: itemsContainer.offsetHeight};\n      },\n      hasAnchor: () => this.element.parentElement && this.element.parentElement.classList.contains('menu-anchor'),\n      getAnchorDimensions: () => this.element.parentElement.getBoundingClientRect(),\n      getWindowDimensions: () => {\n        return {width: win.innerWidth, height: win.innerHeight};\n      },\n      setScale: (x, y) => {\n        this.element.style[getTransformPropertyName(win)] = `scale(${x}, ${y})`;\n      },\n      setInnerScale: (x, y) => {\n        this.itemsContainer.style[getTransformPropertyName(win)] = `scale(${x}, ${y})`;\n      },\n      getNumberOfItems: () => this.items.length,\n      getYParamsForItemAtIndex: (index) => {\n        const {offsetTop: top, offsetHeight: height} = this.items[index];\n        return {top, height};\n      },\n      setTransitionDelayForItemAtIndex: (index, value) =>\n        this.items[index].style.setProperty('transition-delay', value),\n      setActiveItemAtIndex: (index) => {\n        if (this.previousActiveItems) {\n          this.previousActiveItems.forEach((el) => {\n            el.classList.remove(classes.ACTIVE);\n          });\n        }\n\n        this.leafItems[index].classList.add(classes.ACTIVE);\n\n        this.previousActiveItems = [];\n        this.previousActiveItemsIndex = []; // 记录活动元素 index\n\n        this.previousActiveItems.push(this.leafItems[index]);\n        this.previousActiveItemsIndex.push(getElementIndexOfParent(this.leafItems[index], this.filterDivider));\n        let parentNode = this.leafItems[index].parentNode.parentNode;\n\n        // 分支节点也设置 ACTIVE\n        while (parentNode && parentNode.classList.contains(classes.LIST_ITEM)) {\n          parentNode.classList.add(classes.ACTIVE);\n          this.previousActiveItems.unshift(parentNode);\n          this.previousActiveItemsIndex.unshift(getElementIndexOfParent(parentNode, this.filterDivider));\n          parentNode = parentNode.parentNode.parentNode;\n        }\n      }, // 设置当前活动 item 样式\n      clearActiveItem: () => {\n        this.leafItems.forEach((item) => {\n          item.classList.remove(classes.ACTIVE);\n        });\n      }, // 清空活动 item\n      removeExpandClass: () => {\n        [].forEach.call(this.element.querySelectorAll(strings.LIST_ITEM_BRANCH_SELECTOR), (el) => {\n          el.classList.remove(classes.EXPANDED);\n        });\n      },\n      notifySelected: () => {\n        this.emit(strings.SELECTED_EVENT, {\n          index: this.previousActiveItemsIndex,\n          leafIndex: this.activeItemIndex, // 叶子节点活动的 id\n          items: this.previousActiveItems,\n        });\n      }, // 选中某一 item，通过注册的事件调用该方法\n      notifyCancel: () => this.emit(strings.CANCEL_EVENT, {}),\n      saveFocus: () => {\n        this.previousFocus = dom.activeElement;\n      },\n      restoreFocus: () => {\n        if (this.previousFocus) {\n          this.previousFocus.focus();\n        }\n      },\n      isFocused: () => dom.activeElement === this.element,\n      focus: () => this.element.focus(),\n      getFocusedItemIndex: () => this.items.indexOf(dom.activeElement),\n      focusItemAtIndex: (index) => this.leafItems[index].focus(),\n      setTransformOrigin: (origin) => {\n        this.element.style[`${getTransformPropertyName(win)}-origin`] = origin;\n      },\n      setPosition: (position) => {\n        this.element.style.left = 'left' in position ? position.left : null;\n        this.element.style.right = 'right' in position ? position.right : null;\n        this.element.style.top = 'top' in position ? position.top : null;\n        this.element.style.bottom = 'bottom' in position ? position.bottom : null;\n      },\n      getAccurateTime: () => win.performance.now(), // 系统时间\n    };\n  }\n\n  init() {\n    const {ITEMS_SELECTOR, LIST_ITEM_SELECTOR, LIST_ITEM_LEAF_SELECTOR} = strings;\n\n    // 返回菜单 item 根容器\n    this.itemsContainer = this.element.querySelector(ITEMS_SELECTOR);\n    // 返回菜单第一层 items 中的所有 item\n    this.items = [].slice.call(this.itemsContainer.querySelectorAll(LIST_ITEM_SELECTOR));\n\n    // 返回菜单 items 中的所有叶子节点item\n    this.leafItems = [].slice.call(this.itemsContainer.querySelectorAll(LIST_ITEM_LEAF_SELECTOR));\n\n    if (this.activeItemIndex === undefined && this.selectedFirstOption) {\n      this.activeItemIndex = 0;\n    }\n  }\n\n  // 渲染组件\n  render() {\n    const {ELEMENT, OPEN} = classes;\n\n    if (!this.adapter.hasClass(ELEMENT)) {\n      throw new Error(`列表菜单根节点需要设置 class ${ELEMENT}.`);\n    }\n\n    if (!this.adapter.hasNecessaryDom()) {\n      throw new Error('列表菜单需要设置 items 元素节点.');\n    }\n\n    // 有 OPEN 样式时，表示打开状态\n    if (this.adapter.hasClass(OPEN)) {\n      this.isOpen = true;\n    }\n\n    // 先清空已经设置的 active\n    this.adapter.clearActiveItem();\n    // 设置当前活动的 item\n    if (this.activeItemIndex !== undefined) {\n      this.adapter.setActiveItemAtIndex(this.activeItemIndex);\n    }\n\n    this.addEventListeners();\n  }\n\n  unmount() {\n    clearTimeout(this.selectedTriggerTimerId);\n    // 取消当前进行的动画\n    cancelAnimationFrame(this.animationRequestId);\n    this.removeEventListeners();\n  }\n\n  // 设置监听事件\n  addEventListeners() {\n    this.element.addEventListener('click', this.handleClickMenu);\n    this.element.addEventListener('keyup', this.handleKeyboardUp);\n    this.element.addEventListener('keydown', this.handleKeyboardDown);\n  }\n\n  // 删除事件\n  removeEventListeners() {\n    this.element.removeEventListener('click', this.handleClickMenu);\n    this.element.removeEventListener('keyup', this.handleKeyboardUp);\n    this.element.removeEventListener('keydown', this.handleKeyboardDown);\n    body.removeEventListener('click', this.handleDocumentClick);\n    //this.itemsContainer.removeEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.handleItemScroll);\n  }\n\n  // 设置活动的元素\n  setActiveItemAtIndex(index) {\n    if (index !== undefined && index !== null) {\n      this.activeItemIndex = index;\n      this.adapter.setActiveItemAtIndex(index);\n    }\n  }\n\n  /**\n   * @param {!Event} e\n   * @private\n   */\n  handleClickMenu = (e) => {\n    const {target} = e;\n    const {ARIA_DISABLED_ATTR, ARIA_LEVEL_ATTR, ARIA_LEVEL_BRANCH} = strings;\n    // disabled 返回\n    if (target.getAttribute(ARIA_DISABLED_ATTR) === 'true') {\n      return;\n    }\n\n    // 点击分支节点\n    if (target.getAttribute(ARIA_LEVEL_ATTR) === ARIA_LEVEL_BRANCH) {\n      // 删除兄弟节点展开样式\n      let node = target.parentNode.firstElementChild;\n      while (node) {\n        node.classList.remove(classes.EXPANDED);\n        node = node.nextElementSibling;\n      }\n      target.classList.add(classes.EXPANDED);\n      return;\n    }\n\n    // 如果点击的是其他非叶子节点，则返回\n    const targetIndex = this.leafItems.indexOf(target);\n    if (targetIndex < 0) {\n      return;\n    }\n\n    // 防抖处理，防止多次点击\n    if (this.selectedTriggerTimerId) {\n      return;\n    }\n\n    // 动画结束后隐藏\n    this.selectedTriggerTimerId = setTimeout(() => {\n      this.selectedTriggerTimerId = 0;\n      this.hide();\n\n      // 去掉展开的级联节点\n      this.adapter.removeExpandClass();\n      this.adapter.setActiveItemAtIndex(targetIndex);\n      this.adapter.notifySelected();\n    }, numbers.SELECTED_TRIGGER_DELAY);\n  };\n\n  /**\n   * 处理键盘事件，对于 Enter, Space, Escape 需特殊处理\n   * @param {!Event} evt\n   * @return {boolean}\n   * @private\n   */\n  handleKeyboardUp = (evt) => {\n    // Do nothing if Alt, Ctrl or Meta are pressed.\n    if (evt.altKey || evt.ctrlKey || evt.metaKey) {\n      return true;\n    }\n\n    const {keyCode, key} = evt;\n    const isEnter = key === 'Enter' || keyCode === 13;\n    const isSpace = key === 'Space' || keyCode === 32;\n    const isEscape = key === 'Escape' || keyCode === 27;\n\n    if (isEnter || isSpace) {\n      this.handleClickMenu(evt);\n    }\n\n    if (isEscape) {\n      this.adapter.notifyCancel();\n      this.close();\n    }\n\n    return true;\n  };\n\n  /**\n   * 处理键盘事件 tab 和 arrows\n   * @param {!Event} evt\n   * @return {boolean}\n   * @private\n   */\n  /*eslint-disable complexity*/\n  handleKeyboardDown = (evt) => {\n    // Do nothing if Alt, Ctrl or Meta are pressed.\n    if (evt.altKey || evt.ctrlKey || evt.metaKey) {\n      return true;\n    }\n\n    const {keyCode, key, shiftKey} = evt;\n    const isTab = key === 'Tab' || keyCode === 9;\n    const isArrowUp = key === 'ArrowUp' || keyCode === 38;\n    const isArrowDown = key === 'ArrowDown' || keyCode === 40;\n    const isSpace = key === 'Space' || keyCode === 32;\n\n    const focusedItemIndex = this.adapter.getFocusedItemIndex();\n    const lastItemIndex = this.adapter.getNumberOfItems() - 1;\n\n    if (shiftKey && isTab && focusedItemIndex === 0) {\n      this.adapter.focusItemAtIndex(lastItemIndex);\n      evt.preventDefault();\n      return false;\n    }\n\n    if (!shiftKey && isTab && focusedItemIndex === lastItemIndex) {\n      this.adapter.focusItemAtIndex(0);\n      evt.preventDefault();\n      return false;\n    }\n\n    // Ensure Arrow{Up,Down} and space do not cause inadvertent scrolling\n    if (isArrowUp || isArrowDown || isSpace) {\n      evt.preventDefault();\n    }\n\n    if (isArrowUp) {\n      if (focusedItemIndex === 0 || this.adapter.isFocused()) {\n        this.adapter.focusItemAtIndex(lastItemIndex);\n      } else {\n        this.adapter.focusItemAtIndex(focusedItemIndex - 1);\n      }\n    } else if (isArrowDown) {\n      if (focusedItemIndex === lastItemIndex || this.adapter.isFocused()) {\n        this.adapter.focusItemAtIndex(0);\n      } else {\n        this.adapter.focusItemAtIndex(focusedItemIndex + 1);\n      }\n    }\n\n    return true;\n  };\n\n  /**\n   * 当点击非菜单区域时，隐藏菜单列表\n   * @param {!Event} evt\n   * @private\n   */\n  handleDocumentClick = (evt) => {\n    let el = evt.target;\n\n    while (el && el !== dom.documentElement) {\n      if (this.adapter.eventTargetHasClass(el, classes.LIST_ITEM)) {\n        return;\n      }\n      el = el.parentNode;\n    }\n\n    this.adapter.notifyCancel();\n\n    const expandedEl = this.element.querySelectorAll(strings.EXPANDED);\n\n    [].forEach.call(expandedEl, (el) => {\n      el.classList.remove(classes.EXPANDED);\n    });\n\n    this.items.forEach((el) => {\n      el.style.removeProperty('display');\n    });\n\n    this.hide(evt);\n  };\n\n  /**\n   * 滚动菜单列表时触发\n   * @param evt\n   */\n  handleItemScroll = (evt) => {\n    const step = 10;\n\n    if (this.visibleItemHeight <= this.maxItemHeight) {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n\n    // 判断鼠标滑轮向上还是向下滑动\n    let upDown;\n    const {detail, wheelDelta} = evt;\n    if (detail) {\n      if (detail < 0) { // up\n        upDown = 'up';\n      } else if (detail > 0) { // down\n        upDown = 'down';\n      }\n    } else if (wheelDelta) { //\n      if (wheelDelta > 0) { // up\n        upDown = 'up';\n      }\n      if (wheelDelta < 0) { // down\n        upDown = 'down';\n      }\n    }\n\n    const {transform} = this.itemsContainer.style;\n\n    let y = reg.exec(transform);\n    y = y ? parseFloat(y[1], 10) : 0;\n\n    if ((upDown === 'up' && y === 0) || (upDown === 'down' && Math.abs(y) === this.maxOffset)) {\n      return;\n    }\n\n    if (upDown === 'up' && y < 0) {\n      this.itemsContainer.style.transform = `translateY(${Math.min(y + step, 0)}px)`;\n    } else if (upDown === 'down' && Math.abs(y) < this.maxOffset) {\n      this.itemsContainer.style.transform = `translateY(${Math.max(y - step, -this.maxOffset)}px)`;\n    }\n  };\n\n  /** @param {{focusIndex: ?number}=} options */\n  show({focusIndex = null} = {}) {\n    // 设置当前焦点元素\n    this.adapter.saveFocus();\n    this.adapter.addClass(classes.ANIMATING);\n    this.animationRequestId = requestAnimationFrame(() => {\n      this.dimensions = this.adapter.getInnerDimensions();\n      //this.adjustMenuMaxHeight();\n      this.applyTransitionDelays();\n      this.autoPosition();\n      this.animateMenu();\n      this.adapter.addClass(classes.OPEN);\n      this.focusOnOpen(focusIndex);\n\n      // 添加 document 事件\n      body.addEventListener('click', this.handleDocumentClick);\n      // http://www.zhangxinxu.com/wordpress/2013/04/js-mousewheel-dommousescroll-event/\n      //this.itemsContainer.addEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.handleItemScroll);\n    });\n    this.isOpen = true;\n  }\n\n  /**\n   *  关闭隐藏菜单\n   * @param {Event=} evt\n   */\n  hide(evt = null) {\n    const disabled = evt ?\n      evt.target.getAttribute(strings.ARIA_DISABLED_ATTR) === 'true' :\n      false;\n\n    if (disabled) {\n      return;\n    }\n\n    body.removeEventListener('click', this.handleDocumentClick);\n    // 添加动画 class\n    this.adapter.addClass(classes.ANIMATING);\n\n    requestAnimationFrame(() => {\n      this.removeTransitionDelays();\n      this.animateMenu();\n      this.adapter.removeClass(classes.OPEN);\n    });\n    this.isOpen = false;\n    // 把焦点定位到上一个焦点\n    this.adapter.restoreFocus();\n  }\n\n  /**\n   * 计算 Item 的高度\n   */\n  calcItemHeight() {\n    const property = window.getComputedStyle(this.items[0]);\n    const lineHeight = property.getPropertyValue('line-height');\n    const paddingTop = property.getPropertyValue('padding-top');\n    const paddingBottom = property.getPropertyValue('padding-bottom');\n\n    return parseInt(lineHeight, 10) + parseInt(paddingTop, 10) + parseInt(paddingBottom, 10);\n  }\n\n  /**\n   * 调整菜单高度\n   */\n  adjustMenuMaxHeight() {\n    const rect = this.itemsContainer.getBoundingClientRect();\n    const {height} = this.adapter.getWindowDimensions();\n    const itemHeight = this.calcItemHeight();\n    const maxHeight = height - rect.top;\n    const visibleItemNum = Math.floor(maxHeight / itemHeight);\n    this.visibleItemHeight = visibleItemNum * itemHeight;\n    this.maxItemHeight = this.items.length * itemHeight;\n\n    this.itemsContainer.style.setProperty('height', `${this.visibleItemHeight}px`);\n    // 隐藏多余的 item\n    for (let i = visibleItemNum; i < this.items.length; i++) {\n      this.items[i].style.setProperty('display', 'none');\n    }\n  }\n\n  /**\n   * Calculates transition delays for individual menu items, so that they fade in one at a time.\n   * @private\n   */\n  applyTransitionDelays() {\n    const {BOTTOM_LEFT, BOTTOM_RIGHT} = classes;\n    const numItems = this.adapter.getNumberOfItems();\n    const {height} = this.dimensions;\n    const transitionDuration = numbers.TRANSITION_DURATION_MS / 1000;\n    const start = numbers.TRANSITION_SCALE_ADJUSTMENT_Y;\n\n    for (let index = 0; index < numItems; index++) {\n      const {top: itemTop, height: itemHeight} = this.adapter.getYParamsForItemAtIndex(index);\n      this.itemHeight = itemHeight;\n      let itemDelayFraction = itemTop / height;\n      if (this.adapter.hasClass(BOTTOM_LEFT) || this.adapter.hasClass(BOTTOM_RIGHT)) {\n        itemDelayFraction = ((height - itemTop - itemHeight) / height);\n      }\n      const itemDelay = (start + itemDelayFraction * (1 - start)) * transitionDuration;\n      // Use toFixed() here to normalize CSS unit precision across browsers\n      this.adapter.setTransitionDelayForItemAtIndex(index, `${itemDelay.toFixed(3)}s`);\n    }\n  }\n\n  /** @private */\n  // 自动计算位置\n  autoPosition() {\n    if (!this.adapter.hasAnchor()) {\n      return;\n    }\n\n    // Defaults: open from the top left.\n    let vertical = 'top';\n    let horizontal = 'left';\n\n    const anchor = this.adapter.getAnchorDimensions();\n    const windowDimensions = this.adapter.getWindowDimensions();\n\n    const topOverflow = anchor.top + this.dimensions.height - windowDimensions.height;\n    const bottomOverflow = this.dimensions.height - anchor.bottom;\n    const extendsBeyondTopBounds = topOverflow > 0;\n\n    if (extendsBeyondTopBounds) {\n      if (bottomOverflow < topOverflow) {\n        vertical = 'bottom';\n      }\n    }\n\n    const leftOverflow = anchor.left + this.dimensions.width - windowDimensions.width;\n    const rightOverflow = this.dimensions.width - anchor.right;\n    const extendsBeyondLeftBounds = leftOverflow > 0;\n\n    if (extendsBeyondLeftBounds && rightOverflow < leftOverflow) {\n      horizontal = 'right';\n    }\n\n    const position = {\n      [horizontal]: '0',\n      [vertical]: '0',\n    };\n\n    this.adapter.setTransformOrigin(`${vertical} ${horizontal}`);\n    this.adapter.setPosition(position);\n  }\n\n  /**\n   * @param {?number} focusIndex\n   * @private\n   */\n  focusOnOpen(focusIndex) {\n    if (focusIndex === null) {\n      // First, try focusing the menu.\n      this.adapter.focus();\n      // If that doesn't work, focus first item instead.\n      if (!this.adapter.isFocused()) {\n        this.adapter.focusItemAtIndex(0);\n      }\n    } else {\n      this.adapter.focusItemAtIndex(focusIndex);\n    }\n  }\n\n  /**\n   * 删除菜单动画延迟，设置 transition-delay 为 null\n   * @private\n   */\n  removeTransitionDelays() {\n    const numItems = this.adapter.getNumberOfItems();\n    for (let i = 0; i < numItems; i++) {\n      this.adapter.setTransitionDelayForItemAtIndex(i, null);\n    }\n  }\n\n  /**\n   * 设置打开或关闭菜单动画\n   * @private\n   */\n  animateMenu() {\n    this.startTime = this.adapter.getAccurateTime();\n    this.startScaleX = this.scaleX;\n    this.startScaleY = this.scaleY;\n\n    this.targetScale = this.isOpen ? 1 : 0;\n\n    // 处理菜单动画\n    if (!this.running) {\n      this.running = true;\n      this.animationRequestId = requestAnimationFrame(() => this.animationLoop());\n    }\n  }\n\n  /**\n   * 循环处理菜单动画\n   * @private\n   */\n  animationLoop() {\n    const time = this.adapter.getAccurateTime();\n    const {\n      TRANSITION_DURATION_MS, TRANSITION_X1, TRANSITION_Y1, TRANSITION_X2, TRANSITION_Y2,\n      TRANSITION_SCALE_ADJUSTMENT_X, TRANSITION_SCALE_ADJUSTMENT_Y,\n    } = numbers;\n\n    const currentTime = clamp((time - this.startTime) / TRANSITION_DURATION_MS);\n\n    // Animate X axis very slowly, so that only the Y axis animation is visible during fade-out.\n    let currentTimeX = clamp(\n      (currentTime - TRANSITION_SCALE_ADJUSTMENT_X) / (1 - TRANSITION_SCALE_ADJUSTMENT_X),\n    );\n    // No time-shifting on the Y axis when closing.\n    let currentTimeY = currentTime;\n\n    let startScaleY = this.startScaleY;\n    if (this.targetScale === 1) {\n      // Start with the menu at the height of a single item.\n      if (this.itemHeight) {\n        startScaleY = Math.max(this.itemHeight / this.dimensions.height, startScaleY);\n      }\n      // X axis moves faster, so time-shift forward.\n      currentTimeX = clamp(currentTime + TRANSITION_SCALE_ADJUSTMENT_X);\n      // Y axis moves slower, so time-shift backwards and adjust speed by the difference.\n      currentTimeY = clamp(\n        (currentTime - TRANSITION_SCALE_ADJUSTMENT_Y) / (1 - TRANSITION_SCALE_ADJUSTMENT_Y),\n      );\n    }\n\n    // 为 X 和 Y 轴方向设置贝塞尔曲线\n    const easeX = bezierProgress(currentTimeX, TRANSITION_X1, TRANSITION_Y1, TRANSITION_X2, TRANSITION_Y2);\n    const easeY = bezierProgress(currentTimeY, TRANSITION_X1, TRANSITION_Y1, TRANSITION_X2, TRANSITION_Y2);\n\n    // Calculate the scales to apply to the outer container and inner container.\n    this.scaleX = this.startScaleX + (this.targetScale - this.startScaleX) * easeX;\n    const invScaleX = 1 / (this.scaleX === 0 ? 1 : this.scaleX);\n    this.scaleY = startScaleY + (this.targetScale - startScaleY) * easeY;\n    const invScaleY = 1 / (this.scaleY === 0 ? 1 : this.scaleY);\n\n    // 改变 scale\n    this.adapter.setScale(this.scaleX, this.scaleY);\n    this.adapter.setInnerScale(invScaleX, invScaleY);\n\n    // Stop animation when we've covered the entire 0 - 1 range of time.\n    // 如果不在 0 到 1 之间则停止动画\n    if (currentTime < 1) {\n      this.animationRequestId = requestAnimationFrame(() => this.animationLoop());\n    } else {\n      this.animationRequestId = 0;\n      this.running = false;\n      this.adapter.removeClass(classes.ANIMATING);\n    }\n  }\n\n}\n\nexport default ListMenu;\n\n\n\n// WEBPACK FOOTER //\n// ./components/elements/menu/list-menu/list-menu.js","import ScrollSpy from './scroll-spy/scrollSpy';\nimport CatalogueSpy from './scroll-spy/plugins/catalogueSpy';\nimport Ripple from './ripple/ripple';\nimport ListMenu from './elements/menu/list-menu/list-menu';\nimport Select from './forms/select/select';\nimport Paging from './elements/paging/paging';\n\nexport {\n  ScrollSpy,\n  CatalogueSpy,\n  Ripple,\n  ListMenu,\n  Select,\n  Paging,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/perfect.js","import {getUuid, isWheel, offset, position} from '../base/util';\n\nconst win = window;\nconst doc = document;\nconst {forEach, map} = Array.prototype;\n\nclass ScrollSpy {\n  static defaultConfig = {\n    offset: 0,\n    method: 'auto',\n    menu: '', // 菜单导航\n    menuCls: null, // 自定义菜单样式\n    menuClsPrefix: 'menu', // 菜单样式前缀\n    container: null, // 需要监听的内容容器\n    immedLoad: true, // 是否立即监听，如果设为 false， 则通过滑动鼠标来激活监听\n    prefix: 'menu-', // 导航目录前缀\n    anchor: true, // 是否用锚点来控制，默认用锚点处理\n    animation: true, // 是否开启动画\n    extend: false, // 默认菜单没有展开\n  };\n\n  constructor(element, config = {}) {\n    this.element = element;\n    this.scrollElement = element.tagName === 'BODY' ? win : element;\n    this.config = this.getConfig(config);\n    const {menu, menuClsPrefix, extend} = this.config;\n    // 菜单 目录 等选择器\n    this.menuSelector = `${menu} .${menuClsPrefix}-title`;\n    this.offsets = [];\n    this.targets = [];\n    this.activeTarget = null;\n    this.scrollHeight = 0;\n\n    // 如果默认不展开，则用样式来控制\n    if (!extend) {\n      const extendStyle = doc.createElement('style');\n      extendStyle.innerHTML = `\n          .menu-catalogue .menu-catalogue {\n            display: none;\n          }\n          .active + .menu-catalogue {\n            display: block;\n          }`;\n      doc.getElementsByTagName('head')[0].append(extendStyle);\n    }\n\n    // 添加事件，页面滚动时，处理目录和内容对应坐标\n    this.scrollElement.addEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.scrollEvent, false);\n    const {immedLoad, initMenus, anchor} = this.config;\n    // 需要根据内容动态创建菜单列表\n    if (initMenus) {\n      this.generateMenus();\n    }\n\n    // 菜单面板\n    this.menuPanel = `${menu} .${menuClsPrefix}.${menuClsPrefix}-catalogue`;\n    this.$menuPanel = doc.querySelector(this.menuPanel);\n\n    // 不用锚点处理的情况\n    if (anchor === false) {\n      // fixme 待改进，改成 事件代理模式\n      const menuElements = doc.querySelectorAll(this.menuSelector);\n      forEach.call(menuElements, (element) => {\n        element.addEventListener('click', (e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const el = e.currentTarget;\n          const {menu} = el.dataset;\n          const {offsetMethod, container} = this.config;\n          const offsetXY = this.config.offset;\n\n          const targetEl = doc.querySelector(`${container} [data-target=\"${menu}\"]`).parentNode;\n          const top = offsetMethod === 'offset' ? offset(targetEl).top : position(targetEl).top;\n          const offsetBase = offsetMethod === 'position' ? this.getScrollTop() : 0;\n\n          // fixme\n          this.scrollElement.scrollTo(0, top + offsetBase - offsetXY);\n          el.blur();\n          this.process();\n        }, false);\n      });\n    }\n\n    // 加载插件\n    const {pluginConfig} = this.config;\n    let {plugins} = this.config;\n    if (plugins) {\n      if (!Array.isArray(plugins)) {\n        plugins = [plugins];\n      }\n      this.plugins = [];\n      const {container} = this.config;\n      plugins.forEach((plugin) => {\n        // 把当前实例传给插件\n        const instance = new plugin(this, pluginConfig);\n        instance.mount();\n        this.plugins.push(instance);\n      });\n    }\n\n    // 显示菜单\n    // doc.querySelector(menu).style.display = 'block';\n    if (immedLoad) {\n      this.refresh();\n      this.process();\n    }\n  }\n\n  getConfig(config) {\n    const _config = {...ScrollSpy.defaultConfig, ...config};\n\n    const {menu} = _config;\n    let {container} = _config;\n\n    if (typeof menu !== 'string') { // dom 对象\n      let {id} = menu;\n      if (!id) {\n        id = getUuid('scrollspy');\n        menu.id = id;\n      }\n      _config.menu = `#${id}`;\n    }\n\n    if (!container) {\n      container = doc.body; // 默认取 body\n    }\n    if (typeof container !== 'string') {\n      let {id} = container;\n      if (!id) {\n        id = getUuid('scrollspy');\n        container.id = id;\n      }\n      _config.container = `#${id}`;\n    }\n\n    const autoMethod = this.scrollElement !== this.scrollElement.window ?\n      'position' :\n      'offset';\n\n    const offsetMethod = _config.method === 'auto' ?\n      autoMethod :\n      _config.method;\n\n    _config.offsetMethod = offsetMethod;\n\n    return _config;\n  }\n\n  /**\n   * 动态创建菜单\n   */\n  generateMenus() {\n    const menus = this.element.querySelectorAll('h1,h2,h3,h4,h5,h6');\n    // 初始化根节点\n    const entries = {\n      level: 0,\n      children: [],\n      depth: 0,\n      parent: null,\n      text: null,\n      root: true\n    };\n\n    // 前一个元素 level\n    let prevLevel = 0;\n    // 上一个节点\n    let lastNode = null;\n\n    forEach.call(menus, (el, index) => {\n      let entry = null;\n      const level = 7 - parseInt(el.tagName[1], 10);\n      const text = el.innerHTML;\n\n      if (index === 0) {\n        // 初始化第一个元素\n        entry = {\n          level,\n          children: [],\n          depth: 1,\n          parent: entries,\n          text,\n          el\n        };\n        entries.children.push(entry);\n      } else {\n        if (level === prevLevel) { // 相等的话\n          entry = {\n            level,\n            children: [],\n            depth: lastNode.depth,\n            parent: lastNode.parent,\n            text,\n            el\n          };\n          lastNode.parent.children.push(entry);\n        } else if (level < prevLevel) { // 如果当前级别小于前一个\n          entry = {\n            level,\n            children: [],\n            depth: lastNode.depth + 1,\n            parent: lastNode,\n            text,\n            el\n          };\n          lastNode.children.push(entry);\n        } else { // 如果当前级别大于前一个 查找祖先节点\n          let ancestor = lastNode.parent;\n          while (ancestor.level <= level && !ancestor.root) {\n            ancestor = ancestor.parent;\n          }\n          entry = {\n            level,\n            children: [],\n            depth: ancestor.depth + 1,\n            parent: ancestor,\n            text,\n            el\n          };\n          ancestor.children.push(entry);\n        }\n      }\n      lastNode = entry;\n      prevLevel = level;\n    });\n\n    const html = this.generateMenusHtml(entries.children, this.config.prefix);\n    doc.querySelector(this.config.menu).innerHTML = html;\n  }\n\n  /**\n   * 根据 nodes 节点 生成 html\n   * @param nodes\n   * @param prefix\n   * @return {string}\n   */\n  generateMenusHtml(nodes, prefix) {\n    const {menuClsPrefix, menuCls} = this.config;\n    let html = '';\n    if (nodes && nodes.length > 0) {\n      html = `<ul class=\"${menuClsPrefix} ${menuClsPrefix}-catalogue${menuCls ? ` ${menuCls}` : ''}\">`;\n      for (let i = 0, len = nodes.length; i < len; i++) {\n        const node = nodes[i];\n        // 为对应的内容加锚点\n        const newChild = document.createElement('a');\n        newChild.id = prefix + (i + 1);\n        newChild.className = `${menuClsPrefix}-anchor`;\n        if (this.config.anchor) {\n          newChild.href = `#${prefix + (i + 1)}`;\n        } else {\n          newChild.dataset.menu = `${prefix + (i + 1)}`;\n        }\n\n        newChild.setAttribute('aria-hidden', true);\n        node.el.insertBefore(newChild, node.el.firstChild);\n\n        html += '<li>';\n        if (this.config.anchor) {\n          html += `<a class=\"${menuClsPrefix}-title\" href=\"#${prefix}${i + 1}\">${node.text}</a>`;\n        } else { // 用 data-target 来控制，需要结合 js 来控制\n          html += `<a class=\"${menuClsPrefix}-title\" data-target=\"${prefix}${i + 1}\" href=\"#\">${node.text}</a>`;\n        }\n        if (node.children && node.children.length > 0) {\n          html += this.generateMenusHtml(node.children, `${prefix}${i + 1}-`);\n        }\n        html += '</li>';\n      }\n      html += '</ul>';\n    }\n    return html;\n  }\n\n  /**\n   * 滚动页面时，刷新相关数据\n   */\n  refresh() {\n    const {offsetMethod} = this.config;\n    const offsetBase = offsetMethod === 'position' ? this.getScrollTop() : 0;\n\n    this.offsets = [];\n    this.targets = [];\n    this.scrollHeight = this.getScrollHeight();\n\n\n    // 把滚动监听的元素和坐标保存到offsets和targets中\n    const menuElements = doc.querySelectorAll(this.menuSelector);\n\n    map.call(menuElements, (element) => {\n      // 目标元素\n      let target = null;\n      const {anchor, container} = this.config;\n      const selector = anchor ? element.getAttribute('href') : element.dataset.menu;\n      const targetSelector = anchor ?\n        element.getAttribute('href') :\n        `${container} [data-target=\"${element.dataset.menu}\"]`;\n\n      if (targetSelector) {\n        target = doc.querySelector(targetSelector).parentNode;\n        const targetBCR = target.getBoundingClientRect();\n        if (targetBCR.width || targetBCR.height) {\n          return [\n            (offsetMethod === 'offset' ? offset(target).top : position(target).top) + offsetBase,\n            selector\n          ];\n        }\n      }\n      return null;\n    }).sort((a, b) => {\n      if (!a || !b) {\n        return 0;\n      }\n      return a[0] - b[0];\n    }).forEach((item) => {\n      if (item) {\n        this.offsets.push(item[0]);\n        this.targets.push(item[1]);\n      }\n    });\n  }\n\n  // 鼠标滚动事件\n  scrollEvent = (event) => {\n    this.process();\n  };\n\n  /**\n   * 滚动时触发该方法\n   * @returns {boolean|*}\n   */\n  process() {\n    // 需要加 1 微调\n    const scrollTop = this.getScrollTop() + this.config.offset + 1;\n    const scrollHeight = this.getScrollHeight();\n    const maxScroll = this.config.offset\n      + scrollHeight\n      - this.getOffsetHeight();\n\n    // 不相等的话，重新刷新，比如改变页面窗口后\n    if (this.scrollHeight !== scrollHeight) {\n      this.refresh();\n    }\n\n    // 滑到底部\n    if (scrollTop >= maxScroll) {\n      // 取最后一个\n      const target = this.targets[this.targets.length - 1];\n\n      if (this.activeTarget !== target) {\n        this.activate(target);\n      }\n      return;\n    }\n\n    // 滑到头部\n    if (this.activeTarget && scrollTop < this.offsets[0] && this.offsets[0] > 0) {\n      this.activeTarget = null;\n      this.clearActiveCls();\n      return;\n    }\n\n    for (let i = this.offsets.length; i--;) {\n      const isActiveTarget = this.activeTarget !== this.targets[i]\n        && scrollTop >= this.offsets[i]\n        && (this.offsets[i + 1] === undefined ||\n          scrollTop < this.offsets[i + 1]);\n\n      if (isActiveTarget) {\n        this.activate(this.targets[i]);\n      }\n    }\n  }\n\n  /**\n   * 设置当前活动的内容\n   * @param target\n   */\n  activate(target) {\n    this.activeTarget = target;\n\n    this.clearActiveCls();\n\n    const {anchor} = this.config;\n    let queries = this.menuSelector.split(',');\n    const lastSelector = []; // 最后一个菜单项，即当前的子节点\n    // 当前选中的和父目录都添加活动样式\n    const parentEls = target.split('-');\n    queries = queries.map((query) => {\n      const selector = [];\n      let catalog = '';\n      parentEls.forEach((it, index) => {\n        if (index === 0) {\n          catalog += it;\n        } else {\n          catalog += `-${it}`;\n          selector.push(anchor ? `${query}[href=\"${catalog}\"]` : `${query}[data-menu=\"${catalog}\"]`);\n        }\n      });\n      lastSelector.push(selector[selector.length - 1]);\n      return selector.join(',');\n    });\n\n    const $link = doc.querySelectorAll(queries.join(','));\n\n    for (let i = 0, len = $link.length; i < len; i++) {\n      $link[i].classList.add('active');\n    }\n\n    this.plugins.forEach((plugin) => {\n      if (typeof plugin.scrollMenu === 'function') {\n        plugin.scrollMenu(lastSelector);\n      }\n    });\n\n    // todo 事件，待补充\n\n    /* $(this._scrollElement).trigger(Event.ACTIVATE, {\n     relatedTarget: target\n     }) */\n  }\n\n  clearActiveCls() {\n    // 删除当前活动样式\n    const activeEls = doc.querySelectorAll(`${this.menuSelector}.active`);\n    if (activeEls) {\n      for (let i = 0, len = activeEls.length; i < len; i++) {\n        activeEls[i].classList.remove('active');\n      }\n    }\n  }\n\n  // 卸载\n  unmount() {\n    // $.removeData(this._element, DATA_KEY)\n    this.scrollElement.removeEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.scrollEvent, false);\n\n    this.element = null;\n    this.scrollElement = null;\n    this.config = null;\n    this.menu = null;\n    this.menuSelector = null;\n    this.container = null;\n    this.offsets = null;\n    this.targets = null;\n    this.activeTarget = null;\n    this.scrollHeight = null;\n\n    // 卸载插件\n    if (this.plugins) {\n      this.plugins.forEach((plugin) => {\n        plugin.unmount();\n      });\n      this.plugins = null;\n    }\n  }\n\n  getScrollTop() {\n    return this.scrollElement === win ?\n      this.scrollElement.pageYOffset :\n      this.scrollElement.scrollTop;\n  }\n\n  getScrollHeight() {\n    return this.scrollElement.scrollHeight ||\n      Math.max(\n        doc.body.scrollHeight,\n        doc.documentElement.scrollHeight\n      );\n  }\n\n  getOffsetHeight() {\n    return this.scrollElement === win ?\n      win.innerHeight :\n      this.scrollElement.getBoundingClientRect().height;\n  }\n\n}\n\nexport default ScrollSpy;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll-spy/scrollSpy.js","import util from '../../base/util';\n\nconst {isWheel} = util;\n\nconst win = window;\nconst doc = document;\nconst resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize';\n\nconst reg = /translateY\\(([-\\w]+)\\)/;\n\nclass CatalogueSpy {\n  static defaultConfig = {\n    menuHeight: null, // 设置菜单高度，如果不设置，则取当前浏览器可视高度\n    step: 30, // 滚动鼠标，菜单滑动步长\n  };\n\n  constructor(scrollSpy, config = {}) {\n    this.scrollSpy = scrollSpy;\n    this.config = {...CatalogueSpy.defaultConfig, ...config};\n\n    let {menuHeight} = this.config;\n    if (!menuHeight) {\n      menuHeight = document.documentElement.clientHeight - 64;\n      this.config.menuHeight = menuHeight;\n    }\n\n    const {$menuPanel} = scrollSpy;\n    $menuPanel.style.transform = 'translateY(0)';\n    $menuPanel.style.maxHeight = `${menuHeight}px`;\n    this.$menuPanel = $menuPanel;\n\n    win.addEventListener(resizeEvt, this.adjustMenuHeight, false);\n  }\n\n  // 调整菜单最大高度\n  adjustMenuHeight = () => {\n    const menuHeight = doc.documentElement.clientHeight - 64;\n    this.$menuPanel.style.maxHeight = `${menuHeight}px`;\n  };\n\n  mount() {\n    // fixme 待改进，改成 scrollSpy 触发该事件，参考 web-guide 项目\n    // http://www.zhangxinxu.com/wordpress/2013/04/js-mousewheel-dommousescroll-event/\n    this.$menuPanel.addEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.handleScroll(true), false);\n  }\n\n  handleScroll = (prevent) => {\n    /*eslint-disable complexity*/\n    return (event) => {\n      const {scrollHeight, clientHeight} = this.$menuPanel;\n      const {step} = this.config;\n      this.maxOffset = scrollHeight - clientHeight; // 最大滚动的高度\n\n      // 判断鼠标滑轮向上还是向下滑动\n      let upDown;\n      const {detail, wheelDelta} = event;\n      if (detail) {\n        if (detail < 0) { // up\n          upDown = 'up';\n        } else if (detail > 0) { // down\n          upDown = 'down';\n        }\n      } else if (wheelDelta) { //\n        if (wheelDelta > 0) { // up\n          upDown = 'up';\n        }\n        if (wheelDelta < 0) { // down\n          upDown = 'down';\n        }\n      }\n\n      const {transform} = this.$menuPanel.style;\n\n      let y = reg.exec(transform);\n      y = y ? parseFloat(y[1], 10) : 0;\n\n      if (prevent && this.maxOffset > 0 &&\n        ((upDown === 'down' && Math.abs(y) < this.maxOffset) || (upDown === 'up' && y > 0))) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      if ((upDown === 'up' && y === 0) || (upDown === 'down' && Math.abs(y) === this.maxOffset)) {\n        return;\n      }\n\n      if (upDown === 'up' && y < 0) {\n        this.$menuPanel.style.transform = `translateY(${Math.min(y + step, 0)}px)`;\n      } else if (upDown === 'down' && Math.abs(y) < this.maxOffset) {\n        this.$menuPanel.style.transform = `translateY(${Math.max(y - step, -this.maxOffset)}px)`;\n      }\n    };\n  };\n\n  // 当定位到某一个菜单项时，而由于限制了高度，该菜单有可能不在可视范围内\n  scrollMenu = (lastSelector) => {\n    const {step} = this.config;\n    const {$menuPanel} = this;\n    const {scrollHeight, clientHeight} = $menuPanel;\n    let maxOffset = scrollHeight - clientHeight; // 最大滚动的高度\n    if (maxOffset === 0) {\n      return;\n    }\n    maxOffset += 1; // 由于计算偏差，需要微调1个像素\n    // 如果当前菜单项隐藏，则向上拉\n    // Fixme 注意这里还需计算 $menuPanel.parentElement padding 和 border 的值，待处理\n    const menuRect = $menuPanel.parentElement.getBoundingClientRect();\n    const currentTarget = doc.querySelectorAll(lastSelector.join(','));\n    if (currentTarget) {\n      Array.prototype.forEach.call(currentTarget, (el) => {\n        let rect = el.getBoundingClientRect();\n        while (rect.top > 0 && rect.bottom > 0 && (rect.top < menuRect.top || rect.bottom > menuRect.bottom)) { // 向上移动\n          const {transform} = $menuPanel.style;\n          let y = reg.exec(transform);\n          y = y ? parseFloat(y[1], 10) : 0;\n          if (rect.top < menuRect.top) {\n            $menuPanel.style.transform = `translateY(${Math.min(y + step, 0)}px)`;\n          } else {\n            $menuPanel.style.transform = `translateY(${Math.max(y - step, -maxOffset)}px)`;\n          }\n          rect = el.getBoundingClientRect();\n        }\n      });\n    }\n  };\n\n  unmount() {\n    console.info('待补充');\n    win.removeEventListener(resizeEvt, this.adjustMenuHeight, false);\n  }\n\n}\n\nexport default CatalogueSpy;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll-spy/plugins/catalogueSpy.js","import Component from '../base/component';\nimport {\n  supportsCssVariables, applyPassive,\n  getMatchesProperty, getNormalizedEventCoords,\n} from './util';\n\n// 定义常量\nconst classes = {\n  ELEMENT: 'ripple-impact',\n  UNBOUNDED: 'ripple-unbounded',\n  FOCUSED: 'ripple-impact-focused',\n  ACTIVE: 'ripple-impact-active',\n  INACTIVE: 'ripple-impact-inactive',\n};\n\nconst strings = {\n  VAR_SIZE: '--ripple-size',\n  VAR_LEFT: '--ripple-left',\n  VAR_TOP: '--ripple-top',\n  VAR_SCALE: '--ripple-scale',\n  VAR_TRANSLATE_START: '--ripple-translate-start',\n  VAR_TRANSLATE_END: '--ripple-translate-end',\n};\n\nconst numbers = {\n  PADDING: 10, // 波纹 padding\n  INITIAL_ORIGIN_SCALE: 0.6, // 初始波纹缩放比例\n  DEACTIVATION_TIMEOUT_MS: 225, // 从活动状态到结束持续的时间，看 scss 变量 $ripple-translate-duration\n  DEACTIVATION_MS: 150, // 非活动状态到结束持续的时间，看 scss 变量 $ripple-fade-out-duration\n};\n\n// 非活动状态和活动状态对应\nconst DEACTIVATION_ACTIVATION_PAIRS = {\n  mouseup: 'mousedown',\n  pointerup: 'pointerdown',\n  touchend: 'touchstart',\n  keyup: 'keydown',\n  blur: 'focus',\n};\n\nclass Ripple extends Component {\n\n  static get classes() {\n    return classes;\n  }\n\n  static get strings() {\n    return strings;\n  }\n\n  static get numbers() {\n    return numbers;\n  }\n\n  /**\n   * 静态方法实例化 Ripple 组件\n   * @param element\n   * @param unbounded\n   * @returns {Ripple}\n   */\n  static mount(element, {unbounded = undefined} = {}) {\n    const ripple = new Ripple(element);\n    if (unbounded !== undefined) {\n      ripple.unbounded = /** @type {boolean} */ unbounded;\n    }\n    return ripple;\n  }\n\n  /**\n   * @param {Ripple} instance\n   * @return {RippleAdapter}\n   */\n  static createAdapter(instance) {\n    const matches = getMatchesProperty(HTMLElement.prototype);\n\n    // 封装一些适配器方法\n    return {\n      isSupportsCssVars: () => supportsCssVariables(window),\n      isUnbounded: () => instance.unbounded,\n      isActive: () => instance.element[matches](':active'),\n      isDisabled: () => instance.disabled,\n      addClass: (className) => instance.element.classList.add(className),\n      removeClass: (className) => instance.element.classList.remove(className),\n      registerImpactHandler: (evtType, handler) =>\n        instance.element.addEventListener(evtType, handler, applyPassive()),\n      deregisterImpactHandler: (evtType, handler) =>\n        instance.element.removeEventListener(evtType, handler, applyPassive()),\n      registerResizeHandler: (handler) => window.addEventListener('resize', handler),\n      deregisterResizeHandler: (handler) => window.removeEventListener('resize', handler),\n      updateCssVariable: (varName, value) => instance.element.style.setProperty(varName, value),\n      removeCssVariable: (varName) => instance.element.style.removeProperty(varName),\n      computeBoundingRect: () => instance.element.getBoundingClientRect(),\n      getWindowPageOffset: () => ({x: window.pageXOffset, y: window.pageYOffset}),\n    };\n  }\n\n  /**\n   * 重置 Ripple 活动状态\n   * @returns {}\n   */\n  static resetActivationState() {\n    return {\n      isActivated: false, // 当前是否为活动状态\n      hasDeactivationUXRun: false, // 是否有取消激活运行状态\n      wasActivatedByPointer: false, // 是否是通过鼠标或触摸来激活(也可以调用方法激活)\n      wasElementMadeActive: false, // 元素是否处于活动状态，即 element.matches(':active') 为 true\n      activationStartTime: 0, // 开始时间\n      activationEvent: null, // 当前事件对象 event\n      isProgrammatic: false, // 是否在当前活动进程中\n    };\n  }\n\n  constructor(element, config) {\n    super(element, config);\n    // 用来处理是否设置了 disabled\n    /* config.disabled */\n    this.disabled = this.disabled || false;\n\n    // 是否是无界限的 Ripple\n    this.unbounded = this.unbounded || false;\n\n    // 创建适配器\n    this.adapter = Ripple.createAdapter(this);\n\n    // 用来处理 requestAnimationFrame 返回的值\n    this.layoutFrame = 0;\n\n    // Ripple Rect size\n    this.rippleSize = {width: 0, height: 0};\n\n    // 初始化 Ripple 默认活动状态\n    this.activationState = Ripple.resetActivationState();\n\n    // 动画持续的时长\n    this.duration = 0;\n\n    // 波纹初始大小\n    this.initialSize = 0;\n\n    // 波纹扩散最大的圆弧\n    this.maxRadius = 0;\n\n    // 无解限制坐标\n    this.unboundedCoords = {\n      left: 0,\n      top: 0,\n    };\n\n    // 缩放比例\n    this.scale = 0;\n\n    // activation setTimeout Id\n    this.activationTimer = null;\n\n    // deactivation removal setTimeout Id\n    this.deactivationRemovalTimer = null;\n\n    // 动画是否结束\n    this.activationAnimationHasEnded = false;\n\n    // activation setTimeout 函数\n    this.activationTimerCallback = () => {\n      this.activationAnimationHasEnded = true;\n      this.runDeactivationAnimation();\n    };\n\n    // 事件与监听函数名称对应\n    this.listenerInfos = [\n      {activate: 'touchstart', deactivate: 'touchend'},\n      {activate: 'pointerdown', deactivate: 'pointerup'},\n      {activate: 'mousedown', deactivate: 'mouseup'},\n      {activate: 'keydown', deactivate: 'keyup'},\n      {focus: 'focus', blur: 'blur'},\n    ];\n\n    // 监听函数 Map\n    this.listeners = {\n      activate: (e) => this.activate(e),\n      deactivate: (e) => this.deactivate(e),\n      focus: () => requestAnimationFrame(\n        () => this.adapter.addClass(classes.FOCUSED),\n      ),\n      blur: () => requestAnimationFrame(\n        () => this.adapter.removeClass(classes.FOCUSED),\n      ),\n    };\n\n    this._init();\n  }\n\n  // 是否支持 css 变量\n  isSupported() {\n    return this.adapter.isSupportsCssVars();\n  }\n\n  // 初始化组件\n  _init() {\n    if (!this.isSupported()) {\n      return;\n    }\n\n    this.addEventListeners();\n\n    const {ELEMENT, UNBOUNDED} = classes;\n    requestAnimationFrame(() => {\n      this.adapter.addClass(ELEMENT);\n      if (this.adapter.isUnbounded()) {\n        this.adapter.addClass(UNBOUNDED);\n      }\n      this.layoutInternal();\n    });\n  }\n\n  /**\n   * 重新布局，重置波纹参数\n   * 比如当窗口改变时，调用该方法\n   */\n  layout() {\n    if (this.layoutFrame) {\n      cancelAnimationFrame(this.layoutFrame);\n    }\n    this.layoutFrame = requestAnimationFrame(() => {\n      this.layoutInternal();\n      this.layoutFrame = 0;\n    });\n  }\n\n  // 初始化波纹个参数\n  layoutInternal() {\n    this.rippleRect = this.adapter.computeBoundingRect();\n    const {width, height} = this.rippleRect;\n\n    // 元素大小\n    const maxDim = Math.max(width, height);\n    // 波纹直径\n    const diameter = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n\n    // 初始波纹大小，取元素大小的 60%\n    this.initialSize = maxDim * numbers.INITIAL_ORIGIN_SCALE;\n\n    // 波纹扩散圆弧，直径 + padding\n    this.maxRadius = diameter + numbers.PADDING;\n    // 计算缩放比例\n    this.scale = this.maxRadius / this.initialSize;\n    this.duration = 1000 * Math.sqrt(this.maxRadius / 1024);\n    this.updateCssVariableValue();\n  }\n\n  updateCssVariableValue() {\n    const {\n      VAR_SIZE, VAR_LEFT, VAR_TOP, VAR_SCALE,\n    } = strings;\n\n    this.adapter.updateCssVariable(VAR_SIZE, `${this.initialSize}px`);\n    this.adapter.updateCssVariable(VAR_SCALE, this.scale);\n\n    if (this.adapter.isUnbounded()) {\n      const {width, height} = this.rippleRect;\n      this.unboundedCoords = {\n        left: Math.round((width / 2) - (this.initialSize / 2)),\n        top: Math.round((height / 2) - (this.initialSize / 2)),\n      };\n\n      this.adapter.updateCssVariable(VAR_LEFT, `${this.unboundedCoords.left}px`);\n      this.adapter.updateCssVariable(VAR_TOP, `${this.unboundedCoords.top}px`);\n    }\n  }\n\n  // 设置监听事件\n  addEventListeners() {\n    this.listenerInfos.forEach((info) => {\n      Object.keys(info).forEach((k) => {\n        this.adapter.registerImpactHandler(info[k], this.listeners[k]);\n      });\n    });\n\n    // 注册 resize 事件\n    this.adapter.registerResizeHandler(this.layout);\n  }\n\n  // 删除事件\n  removeEventListeners() {\n    this.listenerInfos.forEach((info) => {\n      Object.keys(info).forEach((k) => {\n        this.adapter.deregisterImpactHandler(info[k], this.listeners[k]);\n      });\n    });\n    this.adapter.deregisterResizeHandler(this.layout);\n  }\n\n  /**\n   * 当 Ripple 处于活动状态时\n   * 对应的事件有 touchstart pointerdown mousedown keydown\n   * @param {Event} e\n   * @private\n   */\n  activate(e) {\n    if (this.adapter.isDisabled()) {\n      return;\n    }\n\n    const {activationState} = this;\n    if (activationState.isActivated) {\n      return;\n    }\n\n    activationState.isActivated = true;\n    activationState.isProgrammatic = e === null;\n    activationState.activationEvent = e;\n    activationState.wasActivatedByPointer = activationState.isProgrammatic ? false : (\n      e.type === 'mousedown' || e.type === 'touchstart' || e.type === 'pointerdown'\n    );\n    activationState.activationStartTime = Date.now();\n\n    requestAnimationFrame(() => {\n      // 对于 keydown 事件需要判断是否当前为活动状态，即 element.matches(':active')\n      // - https://bugs.chromium.org/p/chromium/issues/detail?id=635971\n      // - https://bugzilla.mozilla.org/show_bug.cgi?id=1293741\n      activationState.wasElementMadeActive = (e && e.type === 'keydown') ? this.adapter.isActive() : true;\n      if (activationState.wasElementMadeActive) {\n        this.animateActivation();\n      } else {\n        // 如果元素没有被激活，重置 Ripple 状态\n        this.activationState = Ripple.resetActivationState();\n      }\n    });\n  }\n\n  // 处理 Ripple 动画\n  animateActivation() {\n    const {VAR_TRANSLATE_START, VAR_TRANSLATE_END} = strings;\n    const {\n      ACTIVE,\n      INACTIVE,\n    } = classes;\n    const {DEACTIVATION_TIMEOUT_MS} = numbers;\n\n    let translateStart = '';\n    let translateEnd = '';\n\n    if (!this.adapter.isUnbounded()) {\n      const {startPoint, endPoint} = this.getTranslationCoords();\n      translateStart = `${startPoint.x}px, ${startPoint.y}px`;\n      translateEnd = `${endPoint.x}px, ${endPoint.y}px`;\n    }\n\n    this.adapter.updateCssVariable(VAR_TRANSLATE_START, translateStart);\n    this.adapter.updateCssVariable(VAR_TRANSLATE_END, translateEnd);\n    // 取消进行中的 activation 和 deactivation\n    clearTimeout(this.activationTimer);\n    clearTimeout(this.deactivationRemovalTimer);\n    this.rmActivationClasses();\n    this.adapter.removeClass(INACTIVE);\n\n    // 强制重绘，触发动画\n    this.adapter.computeBoundingRect();\n    this.adapter.addClass(ACTIVE);\n    this.activationTimer = setTimeout(() => this.activationTimerCallback(), DEACTIVATION_TIMEOUT_MS);\n  }\n\n  /**\n   * 返回Translation 开始和结束坐标\n   * @returns {{startPoint: ({x: number, y: number}|*), endPoint: {x: number, y: number}}}\n   */\n  getTranslationCoords() {\n    const {activationState} = this;\n    const {activationEvent, wasActivatedByPointer} = activationState;\n    const {width, height} = this.rippleRect;\n\n    let startPoint;\n    if (wasActivatedByPointer) {\n      startPoint = getNormalizedEventCoords(activationEvent,\n        this.adapter.getWindowPageOffset(), this.adapter.computeBoundingRect(),\n      );\n    } else {\n      startPoint = {\n        x: width / 2,\n        y: height / 2,\n      };\n    }\n    // Center the element around the start point.\n    startPoint = {\n      x: startPoint.x - (this.initialSize / 2),\n      y: startPoint.y - (this.initialSize / 2),\n    };\n\n    const endPoint = {\n      x: (width / 2) - (this.initialSize / 2),\n      y: (height / 2) - (this.initialSize / 2),\n    };\n\n    return {startPoint, endPoint};\n  }\n\n  /**\n   * 运行 Deactivation 动画\n   */\n  runDeactivationAnimation() {\n    const {INACTIVE} = classes;\n    const {hasDeactivationUXRun, isActivated} = this.activationState;\n    const activationHasEnded = hasDeactivationUXRun || !isActivated;\n    if (activationHasEnded && this.activationAnimationHasEnded) {\n      this.rmActivationClasses();\n      this.adapter.addClass(INACTIVE);\n      this.deactivationRemovalTimer = setTimeout(() => {\n        this.adapter.removeClass(INACTIVE);\n      }, numbers.DEACTIVATION_MS);\n    }\n  }\n\n  /**\n   * 删除活动状态\n   */\n  rmActivationClasses() {\n    const {ACTIVE} = classes;\n    this.adapter.removeClass(ACTIVE);\n    this.activationAnimationHasEnded = false;\n    this.adapter.computeBoundingRect();\n  }\n\n  /**\n   * 取消活动状态事件\n   * @param e\n   * @private\n   */\n  deactivate(e) {\n    const {activationState} = this;\n    // 如果当前不是活动状态，则取消\n    if (!activationState.isActivated) {\n      return;\n    }\n    // 如果是进行中的取消过程\n    if (activationState.isProgrammatic) {\n      const evtObject = null;\n      const state = {...activationState};\n      requestAnimationFrame(() => this.animateDeactivation(evtObject, state));\n      this.activationState = Ripple.resetActivationState();\n      return;\n    }\n\n    const actualActivationType = DEACTIVATION_ACTIVATION_PAIRS[e.type];\n    const expectedActivationType = activationState.activationEvent.type;\n    // NOTE: Pointer events are tricky - https://patrickhlauke.github.io/touch/tests/results/\n    // Essentially, what we need to do here is decouple the deactivation UX from the actual\n    // deactivation state itself. This way, touch/pointer events in sequence do not trample one\n    // another.\n    const needsDeactivationUX = actualActivationType === expectedActivationType;\n    let needsActualDeactivation = needsDeactivationUX;\n    if (activationState.wasActivatedByPointer) {\n      needsActualDeactivation = e.type === 'mouseup';\n    }\n\n    const state = {...activationState};\n    requestAnimationFrame(() => {\n      if (needsDeactivationUX) {\n        this.activationState.hasDeactivationUXRun = true;\n        this.animateDeactivation(e, state);\n      }\n\n      if (needsActualDeactivation) {\n        this.activationState = Ripple.resetActivationState();\n      }\n    });\n  }\n\n  /**\n   * @param {Event} e\n   * @param {!ActivationStateType} options\n   * @private\n   */\n  animateDeactivation(e, {wasActivatedByPointer, wasElementMadeActive}) {\n    const {FOCUSED} = classes;\n    if (wasActivatedByPointer || wasElementMadeActive) {\n      // Remove class left over by element being focused\n      this.adapter.removeClass(FOCUSED);\n      this.runDeactivationAnimation();\n    }\n  }\n}\n\n\nexport default Ripple;\n\n\n\n// WEBPACK FOOTER //\n// ./components/ripple/ripple.js","/**\n * 是否支持 css 变量（css 自定义属性）\n * @private {boolean|undefined}\n */\nlet supportsCssVariables_;\n\n/**\n * 是否支持事件 passive\n * https://www.cnblogs.com/ziyunfei/p/5545439.html\n * https://github.com/WICG/EventListenerOptions\n * @private {boolean|undefined}\n */\nlet supportsPassive_;\n\n/**\n * 对于 Edge 15 浏览器，伪类设置 css 变量存在 bug\n * @param {!Window} windowObj\n * @return {boolean}\n */\nfunction detectEdgePseudoVarBug(windowObj) {\n  // Detect versions of Edge with buggy var() support\n  // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11495448/\n  const document = windowObj.document;\n  const node = document.createElement('div');\n  node.className = 'ripple-test-edge-var-bug';\n  document.body.appendChild(node);\n\n  // The bug exists if ::before style ends up propagating to the parent element.\n  // Additionally, getComputedStyle returns null in iframes with display: \"none\" in Firefox,\n  // but Firefox is known to support CSS custom properties correctly.\n  // See: https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  const computedStyle = windowObj.getComputedStyle(node);\n  const hasPseudoVarBug = computedStyle !== null && computedStyle.borderTopStyle === 'solid';\n  node.remove();\n  return hasPseudoVarBug;\n}\n\n/**\n * 判断是否支持 css 变量\n * https://caniuse.com/#feat=css-variables\n * 当前支持的浏览器有：\n * Edge 15+ (15对于伪类有 bug)、Firefox 31+ 、Chrome 49+ 、Safari 9.1+、Opera 36+\n * IOS Safari 9.3+ 、(Android 5+: Chromium 62+ Opera 37+ Chrome 62+ FireFox 57+ )\n * @param {!Window} windowObj\n * @param {boolean=} forceRefresh\n * @return {boolean|undefined}\n */\n\nfunction supportsCssVariables(windowObj, forceRefresh = false) {\n  if (typeof supportsCssVariables_ === 'boolean' && !forceRefresh) {\n    return supportsCssVariables_;\n  }\n\n  const supportsFunctionPresent = windowObj.CSS && typeof windowObj.CSS.supports === 'function';\n  if (!supportsFunctionPresent) {\n    return;\n  }\n\n  const explicitlySupportsCssVars = windowObj.CSS.supports('--css-vars', 'yes');\n  // See: https://bugs.webkit.org/show_bug.cgi?id=154669\n  // See: README section on Safari\n  const weAreFeatureDetectingSafari10plus = (\n    windowObj.CSS.supports('(--css-vars: yes)') &&\n    windowObj.CSS.supports('color', '#00000000')\n  );\n\n  if (explicitlySupportsCssVars || weAreFeatureDetectingSafari10plus) {\n    supportsCssVariables_ = !detectEdgePseudoVarBug(windowObj);\n  } else {\n    supportsCssVariables_ = false;\n  }\n  return supportsCssVariables_;\n}\n\n/**\n * 判断浏览器是否支持 passive 事件监听，如果支持，则使用\n * https://www.cnblogs.com/ziyunfei/p/5545439.html\n * https://github.com/WICG/EventListenerOptions\n * @param {!Window=} globalObj\n * @param {boolean=} forceRefresh\n * @return {boolean|{passive: boolean}}\n */\nfunction applyPassive(globalObj = window, forceRefresh = false) {\n  if (supportsPassive_ === undefined || forceRefresh) {\n    let isSupported = false;\n    try {\n      /*eslint-disable getter-return*/\n      globalObj.document.addEventListener('test', null, {get passive() {\n        isSupported = true;\n      }});\n    } catch (e) {\n      /* 不支持*/\n    }\n\n    supportsPassive_ = isSupported;\n  }\n\n  return supportsPassive_ ? {passive: true} : false;\n}\n\n/**\n * 使用 matches (老版本使用 webkitMatchesSelector, msMatchesSelector) 来测试一个选择器是否被浏览器支持，比如 :active 等\n * @param {!Object} HTMLElementPrototype\n * @return {!Array<string>}\n */\nfunction getMatchesProperty(HTMLElementPrototype) {\n  return [\n    'webkitMatchesSelector', 'msMatchesSelector', 'matches',\n  ].filter((p) => p in HTMLElementPrototype).pop();\n}\n\n/**\n * 返回事件基于元素左上角偏移坐标值\n * @param {!Event} ev\n * @param {!{x: number, y: number}} pageOffset\n * @param {!ClientRect} clientRect\n * @return {!{x: number, y: number}}\n */\nfunction getNormalizedEventCoords(ev, pageOffset, clientRect) {\n  const {x, y} = pageOffset;\n  const documentX = x + clientRect.left;\n  const documentY = y + clientRect.top;\n\n  let normalizedX;\n  let normalizedY;\n  // Determine touch point relative to the ripple container.\n  if (ev.type === 'touchstart') {\n    normalizedX = ev.changedTouches[0].pageX - documentX;\n    normalizedY = ev.changedTouches[0].pageY - documentY;\n  } else {\n    normalizedX = ev.pageX - documentX;\n    normalizedY = ev.pageY - documentY;\n  }\n\n  return {x: normalizedX, y: normalizedY};\n}\n\nexport {supportsCssVariables, applyPassive, getMatchesProperty, getNormalizedEventCoords};\n\n\n\n// WEBPACK FOOTER //\n// ./components/ripple/util.js","/** @type {string|undefined} */\nlet storedTransformPropertyName;\n\n/**\n * Returns the name of the correct transform property to use on the current browser.\n * 返回 transform 兼容性写法\n * @param {!Window} globalObj\n * @param {boolean=} forceRefresh\n * @return {string}\n */\nfunction getTransformPropertyName(globalObj, forceRefresh = false) {\n  if (storedTransformPropertyName === undefined || forceRefresh) {\n    const el = globalObj.document.createElement('div');\n    storedTransformPropertyName = 'transform' in el.style ? 'transform' : 'webkitTransform';\n  }\n\n  return storedTransformPropertyName;\n}\n\n/**\n * 如果 value 落在 min 和 max 之间则返回 value，否则小于 min 则返回 min， 大于 max 则返回 max\n * 比如 min=0，max=1，value=0.5，则返回 0.5\n * 比如 min=0，max=1，value=3，则返回 1\n * 比如 min=0，max=1，value=-0.5，则返回 0\n * @param {number} value\n * @param {number} min\n * @param {number} max\n * @return {number}\n */\nfunction clamp(value, min = 0, max = 1) {\n  return Math.min(max, Math.max(min, value));\n}\n\n\n/**\n * Returns the easing value to apply at time t, for a given cubic bezier curve.\n * Control points P0 and P3 are assumed to be (0,0) and (1,1), respectively.\n * Parameters are as follows:\n * - time: The current time in the animation, scaled between 0 and 1.\n * - x1: The x value of control point P1.\n * - y1: The y value of control point P1.\n * - x2: The x value of control point P2.\n * - y2: The y value of control point P2.\n * @param {number} time\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @return {number}\n */\nfunction bezierProgress(time, x1, y1, x2, y2) {\n  return getBezierCoordinate(solvePositionFromXValue(time, x1, x2), y1, y2);\n}\n\n/**\n * Compute a single coordinate at a position point between 0 and 1.\n * c1 and c2 are the matching coordinate on control points P1 and P2, respectively.\n * Control points P0 and P3 are assumed to be (0,0) and (1,1), respectively.\n * Adapted from https://github.com/google/closure-library/blob/master/closure/goog/math/bezier.js.\n * @param {number} t\n * @param {number} c1\n * @param {number} c2\n * @return {number}\n */\nfunction getBezierCoordinate(t, c1, c2) {\n  // Special case start and end.\n  if (t === 0 || t === 1) {\n    return t;\n  }\n\n  // Step one - from 4 points to 3\n  let ic0 = t * c1;\n  let ic1 = c1 + t * (c2 - c1);\n  const ic2 = c2 + t * (1 - c2);\n\n  // Step two - from 3 points to 2\n  ic0 += t * (ic1 - ic0);\n  ic1 += t * (ic2 - ic1);\n\n  // Final step - last point\n  return ic0 + t * (ic1 - ic0);\n}\n\n/**\n * Project a point onto the Bezier curve, from a given X. Calculates the position t along the curve.\n * Adapted from https://github.com/google/closure-library/blob/master/closure/goog/math/bezier.js.\n * @param {number} xVal\n * @param {number} x1\n * @param {number} x2\n * @return {number}\n */\nfunction solvePositionFromXValue(xVal, x1, x2) {\n  const epsilon = 1e-6;\n  const maxIterations = 8; // 迭代次数\n\n  if (xVal <= 0) {\n    return 0;\n  } else if (xVal >= 1) {\n    return 1;\n  }\n\n  // Initial estimate of t using linear interpolation.\n  let t = xVal;\n\n  // Try gradient descent to solve for t. If it works, it is very fast.\n  let tMin = 0;\n  let tMax = 1;\n  let value = 0;\n  for (let i = 0; i < maxIterations; i++) {\n    value = getBezierCoordinate(t, x1, x2);\n    const derivative = (getBezierCoordinate(t + epsilon, x1, x2) - value) / epsilon;\n    if (Math.abs(value - xVal) < epsilon) {\n      return t;\n    } else if (Math.abs(derivative) < epsilon) {\n      break;\n    } else {\n      if (value < xVal) {\n        tMin = t;\n      } else {\n        tMax = t;\n      }\n      t -= (value - xVal) / derivative;\n    }\n  }\n\n  // If the gradient descent got stuck in a local minimum, e.g. because\n  // the derivative was close to 0, use a Dichotomy refinement instead.\n  // We limit the number of interations to 8.\n  for (let i = 0; Math.abs(value - xVal) > epsilon && i < maxIterations; i++) {\n    if (value < xVal) {\n      tMin = t;\n      t = (t + tMax) / 2;\n    } else {\n      tMax = t;\n      t = (t + tMin) / 2;\n    }\n    value = getBezierCoordinate(t, x1, x2);\n  }\n  return t;\n}\n\n// 返回当前元素在父元素中的索引 index，是否过滤掉分隔符 list-divider，默认过滤\nfunction getElementIndexOfParent(element, filter) {\n  const parentNode = element.parentNode;\n  const children = parentNode.children;\n  let index = 0;\n  for (let i = 0, len = children.length; i < len; i++) {\n    if (filter && children[i].classList.contains(filter)) {\n      continue;\n    }\n    if (children[i] === element) {\n      return index;\n    }\n    index++;\n  }\n  return -1;\n}\n\nexport {getTransformPropertyName, clamp, bezierProgress, getElementIndexOfParent};\n\n\n\n// WEBPACK FOOTER //\n// ./components/elements/menu/list-menu/util.js","import Component from '../../base/component';\nimport ListMenu from '../../elements/menu/list-menu/list-menu';\n\nconst win = window;\nconst dom = document;\nconst body = dom.body;\n\n// 返回已选中的根 root option\nfunction getRootSelectedOption(el) {\n  const parentEl = el.parentNode.parentNode;\n  if (parentEl.classList.contains('list-menu')) {\n    return el;\n  }\n  return getRootSelectedOption(parentEl);\n}\n\n// 定义常量\n// class 样式\nexport const classes = {\n  ELEMENT: 'select',\n  DISABLED: 'select-disabled',\n  OPEN: 'select-open',\n  SCROLL_LOCK: 'select-scroll-lock',\n  SELECT_MENU_FIXED: 'select-menu-fixed',\n};\n\nexport const strings = {\n  SELECT_INNER: '.select-inner',\n  CHANGE_EVENT: 'select:change',\n  SELECT_MENU: '.select-menu',\n  SELECT_SELECTED_TEXT: '.select-selected-text',\n};\n\nconst openerKeys = [\n  {key: 'ArrowUp', keyCode: 38, forType: 'keydown'},\n  {key: 'ArrowDown', keyCode: 40, forType: 'keydown'},\n  {key: 'Space', keyCode: 32, forType: 'keyup'},\n];\n\nclass Select extends Component {\n\n  static get classes() {\n    return classes;\n  }\n\n  static get strings() {\n    return strings;\n  }\n\n  /**\n   * 静态方法实例化 Select 组件\n   * @param element\n   * @param config\n   * @returns {Select}\n   */\n  static mount(element, config) {\n    return new Select(element, config);\n  }\n\n  // 返回当前选中的 value 和 text\n  get valueText() {\n    return this.getSelectedValue ? this.getSelectedValue() : '';\n  }\n\n  get options() {\n    // 返回叶子节点作为 options\n    return this.menu.leafItems;\n  }\n\n  // 返回已经选中的 select option，只处理可以多选的 select，FIXME\n  get selectedOptions() {\n    return this.element.querySelectorAll('[aria-selected]');\n  }\n\n  constructor(element, config) {\n    super(element, config);\n\n    // 创建适配器\n    this.adapter = this.createAdapter();\n\n    this.selectedIndex = -1; // 已选的 select option，指叶子节点索引\n    this.disabled = false; // 是否禁用\n    this.isFocused = false; // 获取焦点\n\n    // 如果没有已选中的 option，是否默认选中第一个\n    if (this.selectedFirstOption === undefined) {\n      this.selectedFirstOption = true;\n    }\n\n    // 是否滚动锁屏\n    if (this.isScrollLock === undefined) {\n      this.isScrollLock = true;\n    }\n\n    // 是否设置 select 为 fixed\n    if (this.isFixed === undefined) {\n      this.isFixed = true;\n    }\n\n    // 提供一个默认获取 select value 和 text 方法\n    if (!this.getSelectedValue) {\n      this.getSelectedValue = (isText) => {\n        const {selectedIndex} = this;\n        if (selectedIndex > -1) {\n          // 返回叶子节点 data-value 设置的值\n          return {\n            value: this.options[selectedIndex].dataset.value,\n            text: this.adapter.getTextForOptionAtIndex(selectedIndex),\n          };\n        }\n        return {};\n      };\n    }\n\n    this.render();\n    this.initialSyncWithDOM();\n  }\n\n  /**\n   * 封装适配器方法\n   * @return {object}\n   */\n  createAdapter() {\n    return {\n      addClass: (className) => this.element.classList.add(className),\n      removeClass: (className) => this.element.classList.remove(className),\n      setAttr: (attr, value) => this.element.setAttribute(attr, value),\n      rmAttr: (attr) => this.element.removeAttribute(attr),\n      computeBoundingRect: () => this.selectInner.getBoundingClientRect(),\n      focus: () => this.selectInner.focus(),\n      makeTabbable: () => {\n        this.selectInner.tabIndex = 0;\n      },\n      makeUntabbable: () => {\n        this.selectInner.tabIndex = -1;\n      },\n      setMenuElStyle: (propertyName, value) => this.menuEl.style.setProperty(propertyName, value),\n      setMenuElAttr: (attr, value) => this.menuEl.setAttribute(attr, value),\n      rmMenuElAttr: (attr) => this.menuEl.removeAttribute(attr),\n      getMenuElOffsetHeight: () => this.menuEl.offsetHeight,\n      openMenu: (focusIndex) => this.menu.show({focusIndex}),\n      isMenuOpen: () => this.menu.open,\n      setSelectedTextContent: (selectedTextContent) => {\n        this.selectedText.textContent = selectedTextContent;\n      },\n      getNumberOfOptions: () => this.options.length,\n      getTextForOptionAtIndex: (index) => this.options[index].textContent,\n      setAttrForOptionAtIndex: (index, attr, value) => this.options[index].setAttribute(attr, value),\n      rmAttrForOptionAtIndex: (index, attr) => this.options[index].removeAttribute(attr),\n      getLeafOptionIndex: (item) => {\n        const len = this.options.length;\n        for (let i = 0; i < len; i++) {\n          if (this.options[i] === item) {\n            return i;\n          }\n        }\n        return -1;\n      },\n      notifyChange: () => {\n        const menu = this.menu;\n        this.emit(strings.CHANGE_EVENT, {\n          index: menu.previousActiveItemsIndex,\n          items: menu.previousActiveItems,\n          valueText: this.valueText,\n        });\n      },\n      getWindowInnerHeight: () => win.innerHeight,\n      addBodyClass: (className) => body.classList.add(className),\n      removeBodyClass: (className) => body.classList.remove(className),\n    };\n  }\n\n  // 默认 menuFactory 为 ListMenu\n  init(menuFactory = (el) => new ListMenu(el)) {\n    this.selectInner = this.element.querySelector(strings.SELECT_INNER);\n    this.selectedText = this.element.querySelector(strings.SELECT_SELECTED_TEXT);\n    this.menuEl = this.element.querySelector(strings.SELECT_MENU);\n    this.menu = menuFactory(this.menuEl);\n  }\n\n  initialSyncWithDOM() {\n    // 设置当前活动的 index\n    const selectedOption = this.selectedOptions[0];\n    const idx = selectedOption ? this.options.indexOf(selectedOption) : (this.selectedFirstOption ? 0 : -1);\n\n    if (idx > -1) {\n      this.selectedIndex = idx;\n      this.menu.setActiveItemAtIndex(idx);\n    }\n\n    // 设置禁用\n    if (this.element.getAttribute('aria-disabled') === 'true') {\n      this.disabled = true;\n    }\n  }\n\n  render() {\n    if (this.isFixed) {\n      this.menuEl.classList.add(classes.SELECT_MENU_FIXED);\n    }\n    this.addEventListeners();\n  }\n\n  unmount() {\n    this.removeEventListeners();\n  }\n\n  // 设置监听事件\n  addEventListeners() {\n    this.selectInner.addEventListener('click', this.displayHandler);\n    this.selectInner.addEventListener('keydown', this.handleDisplayKeyboard);\n    this.selectInner.addEventListener('keyup', this.handleDisplayKeyboard);\n\n    // 监听 ListMenu 事件\n    this.menu.listen(ListMenu.strings.SELECTED_EVENT, this.selectionHandler);\n    this.menu.listen(ListMenu.strings.CANCEL_EVENT, this.cancelHandler);\n\n  }\n\n  // 删除事件\n  removeEventListeners() {\n    this.selectInner.removeEventListener('click', this.displayHandler);\n    this.selectInner.removeEventListener('keydown', this.handleDisplayKeyboard);\n    this.selectInner.removeEventListener('keyup', this.handleDisplayKeyboard);\n\n    // 监听 ListMenu 事件\n    this.menu.unlisten(ListMenu.strings.SELECTED_EVENT, this.selectionHandler);\n    this.menu.unlisten(ListMenu.strings.CANCEL_EVENT, this.cancelHandler);\n\n  }\n\n  item(index) {\n    return this.options[index] || null;\n  }\n\n  displayHandler = (evt) => {\n    evt.preventDefault();\n    if (!this.adapter.isMenuOpen()) {\n      this.open();\n    }\n  };\n\n  handleDisplayKeyboard(evt) {\n    // We use a hard-coded 2 instead of Event.AT_TARGET to avoid having to reference a browser\n    // global.\n    const EVENT_PHASE_AT_TARGET = 2;\n    if (evt.eventPhase !== EVENT_PHASE_AT_TARGET) {\n      return;\n    }\n\n    // Prevent pressing space down from scrolling the page\n    const isSpaceDown = evt.type === 'keydown' && (evt.key === 'Space' || evt.keyCode === 32);\n    if (isSpaceDown) {\n      evt.preventDefault();\n    }\n\n    const isOpenerKey = openerKeys.some(({key, keyCode, forType}) => {\n      return evt.type === forType && (evt.key === key || evt.keyCode === keyCode);\n    });\n\n    if (isOpenerKey) {\n      this.displayHandler(evt);\n    }\n  }\n\n  // ListMenu SELECTED_EVENT 事件\n  selectionHandler = ({detail}) => {\n    const {index, items} = detail;\n\n    // 如果不相等\n    if (!this.compareSelectedIndex(index)) {\n      const len = items.length;\n      const leafIndex = this.adapter.getLeafOptionIndex(items[len - 1]);\n      this.setSelectedIndex(leafIndex);\n      this.adapter.notifyChange();\n    }\n    this.close();\n  };\n\n  cancelHandler = () => {\n    this.close();\n  };\n\n  getSelectedIndex() {\n    return this.selectedIndex;\n  }\n\n  setSelectedIndex(index) {\n    // 先删除上一次选择的 option\n    const prevSelectedIndex = this.selectedIndex;\n    if (prevSelectedIndex >= 0) {\n      this.adapter.rmAttrForOptionAtIndex(this.selectedIndex, 'aria-selected');\n    }\n\n    this.selectedIndex = index >= 0 && index < this.adapter.getNumberOfOptions() ? index : -1;\n    let selectedTextContent = '';\n    if (this.selectedIndex >= 0) {\n      selectedTextContent = this.adapter.getTextForOptionAtIndex(this.selectedIndex).trim();\n      this.adapter.setAttrForOptionAtIndex(this.selectedIndex, 'aria-selected', 'true');\n    }\n    this.adapter.setSelectedTextContent(selectedTextContent);\n  }\n\n  isDisabled() {\n    return this.disabled;\n  }\n\n  setDisabled(disabled) {\n    const {DISABLED} = classes;\n    this.disabled = disabled;\n    if (this.disabled) {\n      this.adapter.addClass(DISABLED);\n      this.adapter.setAttr('aria-disabled', 'true');\n      this.adapter.makeUntabbable();\n    } else {\n      this.adapter.removeClass(DISABLED);\n      this.adapter.rmAttr('aria-disabled');\n      this.adapter.makeTabbable();\n    }\n  }\n\n\n  open() {\n    if (this.isScrollLock) {\n      this.disableScroll();\n    }\n    const {OPEN} = classes;\n    // 根据已选的叶子节点 this.selectedIndex 拿到第一层 select item\n    const focusIndex = this.selectedIndex < 0 ? 0 : this.selectedIndex;\n    if (this.isFixed) {\n      const selectedRootOption = getRootSelectedOption(this.options[focusIndex]);\n      this.setMenuStylesForOpen(selectedRootOption);\n    }\n    this.adapter.addClass(OPEN);\n    this.adapter.openMenu(focusIndex);\n    this.isFocused = true;\n  }\n\n\n  close() {\n    const {OPEN} = classes;\n    this.adapter.removeClass(OPEN);\n    this.adapter.focus();\n    if (this.isScrollLock) {\n      this.enableScroll();\n    }\n  }\n\n  setMenuStylesForOpen(selectedRootOption) {\n    const innerHeight = this.adapter.getWindowInnerHeight();\n    const {left, top} = this.adapter.computeBoundingRect();\n\n    this.adapter.setMenuElAttr('aria-hidden', 'true');\n    this.adapter.setMenuElStyle('display', 'block');\n    const menuHeight = this.adapter.getMenuElOffsetHeight();\n    const itemOffsetTop = selectedRootOption.offsetTop;\n    this.adapter.setMenuElStyle('display', '');\n    this.adapter.rmMenuElAttr('aria-hidden');\n\n    let adjustedTop = top - itemOffsetTop;\n    const overflowsTop = adjustedTop < 0;\n    const overflowsBottom = adjustedTop + menuHeight > innerHeight;\n    if (overflowsTop) {\n      adjustedTop = 0;\n    } else if (overflowsBottom) {\n      adjustedTop = Math.max(0, innerHeight - menuHeight);\n    }\n\n    this.adapter.setMenuElStyle('left', `${left}px`);\n    this.adapter.setMenuElStyle('top', `${adjustedTop}px`);\n    this.adapter.setMenuElStyle('transform-origin', `center ${itemOffsetTop}px`);\n  }\n\n  nameditem(key) {\n    // NOTE: IE11 precludes us from using Array.prototype.find\n    for (let i = 0, options = this.options, option; (option = options[i]); i++) {\n      if (option.id === key || option.getAttribute('name') === key) {\n        return option;\n      }\n    }\n    return null;\n  }\n\n  disableScroll() {\n    this.adapter.addBodyClass(classes.SCROLL_LOCK);\n  }\n\n  enableScroll() {\n    this.adapter.removeBodyClass(classes.SCROLL_LOCK);\n  }\n\n  compareSelectedIndex(index) {\n    if (!this.selectedIndex || !index) {\n      return false;\n    }\n    if (this.selectedIndex.length !== index.length) {\n      return false;\n    }\n    const len = index.length;\n    for (let i = 0; i < len; i++) {\n      if (this.selectedIndex[i] !== index[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nexport default Select;\n\n\n\n// WEBPACK FOOTER //\n// ./components/forms/select/select.js","import Component from '../../base/component';\n\nconst win = window;\nconst dom = document;\nconst body = dom.body;\n\n// 定义常量\n// class 样式\nexport const classes = {\n  PAGING_ITEM: 'paging-item',\n  DISABLED: 'select-disabled',\n  OPEN: 'select-open',\n  SCROLL_LOCK: 'select-scroll-lock',\n  SELECT_MENU_FIXED: 'select-menu-fixed',\n};\n\nexport const strings = {\n  SELECT_INNER: '.select-inner',\n  CHANGE_EVENT: 'select:change',\n  SELECT_MENU: '.select-menu',\n  SELECT_SELECTED_TEXT: '.select-selected-text',\n};\n\nclass Paging extends Component {\n\n  /**\n   * pagingControl 控制是否显示数据信息 {Boolean}\n   * recordPerPage 是否显示改变每页记录数 {Boolean}\n   * jumpControl 是否显示跳至某一页 {Boolean}\n   * @type {{pagingControl: boolean, recordPerPage: boolean, jumpControl: boolean}}\n   */\n  static defaultConfig = {\n    pagingControl: true,\n    recordPerPage: true,\n    jumpControl: true,\n  };\n\n  static get classes() {\n    return classes;\n  }\n\n  static get strings() {\n    return strings;\n  }\n\n  /**\n   * 静态方法实例化 Paging 组件\n   * @param element\n   * @param config\n   * @returns {Select}\n   */\n  static mount(element, config) {\n    return new Paging(element, config);\n  }\n\n  constructor(element, config) {\n    super(element, {...Paging.defaultConfig, ...config});\n    // 当前页，从1开始，默认1\n    if (this.pageNum === undefined) {\n      this.pageNum = 1;\n    }\n\n    // 每页条数，默认10\n    if (this.pageSize === undefined) {\n      this.pageSize = 10;\n    }\n\n    // 总页码\n    // this.totalPages\n\n    // 总记录数\n    // this.totalCount\n\n    // 加载数据回调函数\n    // this.loadPageData = function() {}\n\n    // 控制是否显示数据信息 {Boolean}\n    // this.pagingControl\n\n    // 是否显示改变每页记录数 {Boolean}\n    // this.recordPerPage\n\n    // 是否显示跳至某一页 {Boolean}\n    // this.jumpControl\n\n    // 创建适配器\n    this.adapter = this.createAdapter();\n\n    this.render();\n  }\n\n  /**\n   * 封装适配器方法\n   * @return {object}\n   */\n  createAdapter() {\n    return {\n    };\n  }\n\n  init() {\n  }\n\n  render() {\n    this.addEventListeners();\n    this.loadData();\n  }\n\n  unmount() {\n    this.removeEventListeners();\n  }\n\n  // 设置监听事件\n  addEventListeners() {\n    this.element.addEventListener('click', this.handleSwitchPage);\n    this.element.addEventListener('change', this.handleChangePerPage);\n  }\n\n  // 删除事件\n  removeEventListeners() {\n    this.element.removeEventListener('click', this.handleSwitchPage);\n    this.element.addEventListener('change', this.handleChangePerPage);\n  }\n\n  handleSwitchPage = (evt) => {\n    evt.preventDefault();\n    const {target} = evt;\n\n    const {classList} = target;\n\n    if (classList.contains(classes.PAGING_ITEM)) { // 切换下一页逻辑\n      const pageNum = parseInt(target.dataset.pagenum, 10);\n      this.handleChangePage(pageNum);\n    } else if (classList.contains('js-jump-btn')) {\n      const input = target.parentNode.previousElementSibling.children[0].children[0];\n      const pageNum = parseInt(input.value, 10);\n      if (!Number.isNaN(pageNum)) {\n        this.handleChangePage(pageNum);\n      }\n    }\n  };\n\n  handleChangePerPage = (evt) => {\n    evt.preventDefault();\n    const {target} = evt;\n\n    const {classList} = target;\n\n    if (classList.contains('select-inner')) { // 切换下一页逻辑\n      const pageSize = parseInt(target.value, 10);\n      this.pageSize = pageSize;\n      this.loadData();\n    }\n  };\n\n  loadData(pageNum = 1) {\n    // 渲染数据\n    if (this.loadPageData && typeof this.loadPageData === 'function') {\n      this.loadPageData(pageNum, this.pageSize).then((json) => {\n        const {totalCount, totalPages} = json.data;\n        this.totalPages = totalPages;\n        this.pageNum = pageNum;\n        this.totalCount = totalCount;\n        this.renderPaging();\n      });\n    } else {\n      this.pageNum = pageNum;\n      this.renderPaging();\n    }\n  }\n\n  handleChangePage(pageNum) {\n    if (this.totalPages === 1) {\n      return;\n    }\n    if (pageNum <= 1) {\n      pageNum = 1;\n    }\n\n    if (pageNum >= this.totalPages) {\n      pageNum = this.totalPages;\n    }\n\n    this.loadData(pageNum);\n  }\n\n  /**\n   * 计算页码显示算法，返回一个页码数组\n   * @returns {Array}\n   */\n  calculatePage() {\n    const totalPages = this.totalPages;\n    const pageNum = this.pageNum;\n\n    const pageArray = [];\n    if (totalPages < 8) {\n      for (let i = 1; i <= totalPages; i++) {\n        pageArray.push(i);\n      }\n    } else {\n      pageArray.push(1);\n      if (pageNum > 4) {\n        pageArray.push('...');\n      }\n\n      if (pageNum < 4) {\n        for (let i = 2; i <= 6; i++) {\n          pageArray.push(i);\n        }\n      } else if (pageNum >= 4 && totalPages - pageNum >= 3) {\n        for (let i = pageNum - 2; i <= pageNum + 2; i++) {\n          pageArray.push(i);\n        }\n      } else {\n        for (let i = totalPages - 4; i < totalPages; i++) {\n          pageArray.push(i);\n        }\n      }\n\n      //总页码 - 当前页 大于 3 显示\n      if (totalPages - pageNum > 3) {\n        pageArray.push('...');\n      }\n      pageArray.push(totalPages);\n    }\n\n    return pageArray;\n  }\n\n  renderPaging() {\n    const pageArray = this.calculatePage();\n\n    let html = '<ul class=\"paging-items\">';\n    html += `<li class=\"paging-item${this.pageNum === 1 ? ' disabled' : ''}\" data-pagenum=\"${this.pageNum - 1}\">上一页</li>`;\n    const pageItems = pageArray.map((item, index) => {\n      if (item === '...') {\n        return '<li class=\"paging-item paging-more\"></li>';\n      }\n      return `<li class=\"paging-item${this.pageNum === item ? ' active' : ''}\" data-pagenum=\"${item}\">${item}</li>`;\n\n    });\n    html += pageItems.join('');\n    html += `<li class=\"paging-item${this.pageNum === this.totalPages ? ' disabled' : ''}\" data-pagenum=\"${this.pageNum + 1}\">下一页</li>`;\n    html += '</ul>';\n\n    if (this.pagingControl) {\n      html += this.renderPagingControl();\n    }\n    this.element.innerHTML = html;\n  }\n\n  renderPagingControl() {\n    let html = '<ul class=\"paging-control\">';\n    html += `<li class=\"paging-control-item\">共${this.totalPages}页${this.totalCount || 0}条记录,</li>`;\n\n    if (this.recordPerPage) {\n      html += `<li class=\"paging-control-item\">\n        每页\n        <div class=\"select\">\n        <select class=\"select-inner\">\n          <option value=\"5\"${this.pageSize === 5 ? ' selected' : ''}>5</option>\n          <option value=\"10\"${this.pageSize === 10 ? ' selected' : ''}>10</option>\n          <option value=\"20\"${this.pageSize === 20 ? ' selected' : ''}>20</option>\n          <option value=\"50\"${this.pageSize === 50 ? ' selected' : ''}>50</option>\n          <option value=\"100\"${this.pageSize === 100 ? ' selected' : ''}>100</option>\n        </select>\n        </div>\n      条,\n    </li>`;\n    }\n\n    if (this.jumpControl) {\n      html += `<li class=\"paging-control-item\">\n        跳至\n        <div class=\"input\">\n          <input type=\"text\" class=\"input-field\"/>\n        </div>\n        页\n      </li>\n      <li class=\"paging-control-item\">\n        <a href=\"\" class=\"btn btn-raised btn-primary btn-sm js-jump-btn\">确定</a>\n      </li>`;\n    }\n\n    html += '</ul>';\n\n    return html;\n  }\n}\n\nexport default Paging;\n\n\n\n// WEBPACK FOOTER //\n// ./components/elements/paging/paging.js"],"sourceRoot":""}