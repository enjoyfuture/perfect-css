{"version":3,"sources":["util.js"],"names":["util","perfect","MAX_UUID","isWindow","elem","window","getWindow","nodeType","defaultView","getStyles","element","property","extra","styles","ownerDocument","getComputedStyle","cssValue","getPropertyValue","num","parseFloat","isFinite","getOffsetParent","offsetParent","tagName","toLowerCase","document","documentElement","getUuid","prefix","_prefix","Math","random","getElementById","isWheel","ua","navigator","userAgent","test","offset","el","docElem","win","doc","getClientRects","length","top","left","rect","getBoundingClientRect","width","height","pageYOffset","clientTop","pageXOffset","clientLeft","position","offsetXY","parentOffset"],"mappings":"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","file":"util.js","sourcesContent":["import perfect from './perfect';\n\nconst util = ((perfect) => {\n  const MAX_UUID = 1000000;\n\n  function isWindow(elem) {\n    return elem != null && elem === elem.window;\n  }\n\n  function getWindow(elem) {\n    return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;\n  }\n\n  /**\n   * getStyles\n   * @param {type} element\n   * @param {type} property\n   * @returns {styles}\n   */\n  function getStyles(element, property, extra) {\n    const styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n    if (property) {\n      const cssValue = styles.getPropertyValue(property) || styles[property];\n      if (extra) {\n        const num = parseFloat(cssValue);\n        return extra === true || isFinite(num) ? num || 0 : cssValue;\n      }\n      return cssValue;\n    }\n    return styles;\n  }\n\n  function getOffsetParent(elem) {\n    /* eslint-disable prefer-destructuring */\n    let offsetParent = elem.offsetParent;\n\n    while (offsetParent && elem.tagName.toLowerCase() !== 'html' &&\n    getStyles(offsetParent, 'position') === 'static') {\n      offsetParent = offsetParent.offsetParent;\n    }\n    return offsetParent || document.documentElement;\n  }\n\n  /**\n   * @description 生成唯一的 dom uuid\n   * @param {string} prefix 前缀\n   * @return {*} uuid\n   */\n  function getUuid(prefix) {\n    let _prefix = prefix;\n    do {\n      // eslint-disable-next-line no-bitwise\n      _prefix += ~~(Math.random() * MAX_UUID) // \"~~\" acts like a faster Math.floor() here\n    } while (document.getElementById(_prefix));\n\n    return _prefix;\n  }\n\n  // 根据浏览器设置其鼠标滑轮事件\n  const isWheel = (() => {\n    // compatibility: mouse wheel event\n    // http://www.w3help.org/zh-cn/causes/SD9015\n    const ua = navigator.userAgent;\n    // ie 11 /gecko/i.test(ua) value is true ,so need to judge /firefox/i.test(ua)\n    if (/gecko/i.test(ua) && !(/webkit/i.test(ua)) && (/firefox/i.test(ua))) { // Firefox\n      return false;\n    }\n    // IE Safari Chrome Opera\n    return true;\n  })();\n\n  /**\n   * 返回元素 offset\n   * 不支持隐藏的元素\n   * 参考 jQuery 实现\n   * https://github.com/jquery/jquery/blob/master/src/offset.js\n   * @param el\n   * @returns {*}\n   */\n  function offset(el) {\n    if (!el) {\n      return;\n    }\n\n    let docElem, win, doc;\n\n    // Support: IE <=11 only\n    // Running getBoundingClientRect on a\n    // disconnected node in IE throws an error\n    if (!el.getClientRects().length) {\n      return {top: 0, left: 0};\n    }\n\n    const rect = el.getBoundingClientRect();\n\n    // Make sure element is not hidden (display: none)\n    if (rect.width || rect.height) {\n      doc = el.ownerDocument;\n      win = getWindow(doc);\n      docElem = doc.documentElement;\n\n      return {\n        top: rect.top + win.pageYOffset - docElem.clientTop,\n        left: rect.left + win.pageXOffset - docElem.clientLeft\n      };\n    }\n    return rect;\n  }\n\n  /**\n   * 返回其 position 坐标\n   * @param elem\n   * @return {*}\n   */\n  function position(elem) {\n    if (!elem) {\n      return null;\n    }\n\n    let offsetParent, offsetXY,\n      parentOffset = {top: 0, left: 0};\n\n    if (getStyles(elem, 'position') === 'fixed') {\n      offsetXY = elem.getBoundingClientRect();\n    } else {\n      offsetParent = getOffsetParent(elem);\n      offsetXY = offset(elem);\n      if (elem.tagName.toLowerCase() !== 'html') {\n        parentOffset = offset(offsetParent);\n      }\n      parentOffset.top += getStyles(offsetParent, 'borderTopWidth', true);\n      parentOffset.left += getStyles(offsetParent, 'borderLeftWidth', true);\n    }\n\n    return {\n      top: offsetXY.top - parentOffset.top - getStyles(elem, 'marginTop', true),\n      left: offsetXY.left - parentOffset.left - getStyles(elem, 'marginLeft', true)\n    };\n  }\n\n  const util = {\n    getUuid,\n    isWheel,\n    offset,\n    position\n  };\n  perfect.util = perfect;\n  return util;\n\n})(perfect);\n\nexport default util;\n"]}