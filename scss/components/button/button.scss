// button style
@import "../../animation/variable";
@import "../../animation/function";
@import "../../theme/mixin";
@import "../../ripple/mixin";
@import "../../normalize/variable";
@import "variable";

.btn {
  @include theme-prop(color, text-primary-on-light);
  position:                relative;
  box-sizing:              border-box;
  display:                 inline-block;
  min-width:               64px;
  height:                  36px;
  padding:                 0 16px;
  border:                  0;
  border-radius:           2px;
  overflow:                hidden;
  font-size:               14px;
  font-weight:             500;
  line-height:             36px;
  background:              transparent;
  text-align:              center;
  text-decoration:         none;
  text-transform:          uppercase;
  vertical-align:          middle;
  cursor:                  pointer;
  user-select:             none;
  outline:                 0;
  -webkit-appearance:      none;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing:  antialiased;

  &:not(.ripple-impact) {
    // ripple-impact 使用 ripple 效果样式
    @include ripple-base;
    @include ripple-bg((pseudo: "::before"));
    @include ripple-bg((pseudo: "::after"));
    -webkit-tap-highlight-color: rgba(#000, .18);
  }

  &:focus,
  &:active {
    outline: 0;
  }

  &::-moz-focus-inner {
    padding: 0;
    border:  0;
  }

  // disabled
  fieldset:disabled &,
  &:disabled,
  &.disabled {
    pointer-events: none;
    cursor:         default;
    opacity:        .36;
  }
}

// outline TODO
.btn-outline {
  border: 1px solid rgba(#000, .78);
}

// 浮雕的，凸起样式
.btn-raised {
  box-shadow:  $btn-box-shadow;
  transition:  box-shadow 280ms cubic-bezier(.4, 0, .2, 1);
  will-change: box-shadow;

  &:active {
    box-shadow: $btn-active-box-shadow;
  }

  // disabled
  fieldset:disabled &,
  &:disabled,
  &.disabled {
    background-color: rgba(0, 0, 0, .12);
    box-shadow:       0 0 0 0 rgba(0, 0, 0, .2), 0 0 0 0 rgba(0, 0, 0, .14), 0 0 0 0 rgba(0, 0, 0, .12);
  }
}

// 定义主题样式
@each $style in ("primary", "accent") {
  .btn-#{$style} {
    @include theme-prop(color, #{$style});

    &::before,
    &::after {
      // 主题样式
      @include theme-prop(background-color, #{$style});
      // ripple 主题样式
      @include ripple-theme((theme-style: #{$style}, opacity: .06));
    }

    &.btn-raised {
      // 前背景对比色差
      @include theme-prop(color, text-primary-on-#{$style});
      @include theme-prop(background-color, #{$style});
      // 用白色透明色处理动画波纹效果
      &::before,
      &::after {
        background-color: rgba(#fff, .2);
      }
    }
  }
}

// 辅助颜色
@each $theme, $color in $theme-assist-colors {
  .btn-#{$theme} {
    @include theme-assist(color, $theme, $color);

    &::before,
    &::after {
      // ripple 主题样式
      @include ripple-theme((background-color: $color, opacity: .06));
    }

    &.btn-raised {
      // 前背景对比色差
      $color-tone: theme-light-or-dark($color);
      // 判断是用浅色还是深色
      color: map-get(map-get($theme-text-colors, $color-tone), primary);
      @include theme-assist(background-color, $theme, $color);

      // 用白色透明色处理动画波纹效果
      &::before,
      &::after {
        background-color: rgba(#fff, .2);
      }
    }
  }
}
