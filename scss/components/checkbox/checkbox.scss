// checkbox style
@import "./variables";
@import "./function";

// 基本样式
.checkbox {
  position:    relative;
  box-sizing:  border-box;
  display:     inline-block;
  width:       $checkbox-outline-size;
  height:      $checkbox-outline-size;
  padding:     ($checkbox-outline-size - $checkbox-size) / 2;
  border-radius: 50%;
  cursor:      pointer;
  will-change: opacity, transform, border-color, background-color, color;

  // checkbox 形状
  &-background {
    position:       absolute;
    left:           ($checkbox-outline-size - $checkbox-size) / 2;
    box-sizing:     border-box;
    display:        inline-block;
    width:          $checkbox-pct;
    height:         $checkbox-pct;
    pointer-events: none;
  }

  &-mark-outer {
    @include theme-prop(border-color, text-secondary-on-light);
    position:      absolute;
    top:           0;
    left:          0;
    box-sizing:    border-box;
    width:         100%;
    height:        100%;
    border-width:  2px;
    border-style:  solid;
    border-radius: 2px;
    transition:    checkbox-leave(border-color);
  }

  &-mark-inner {
    @include theme-prop(background-color, text-secondary-on-light);
    position:      absolute;
    top:           0;
    left:          0;
    box-sizing:    border-box;
    width:         100%;
    height:        100%;
    border-radius: 2px;
    transform:     scale(0, 0);
    transition:    checkbox-leave(transform), checkbox-leave(background-color);

    &::after {
      content: "";
      position: absolute;
      top: 3px;
      left: 2px;
      box-sizing: border-box;
      width: 80%;
      height: 40%;
      border-bottom: 2px solid #fff;
      border-left: 2px solid #fff;
      transform: rotate(-45deg);
    }
  }

  &-native-control {
    position: absolute;
    top:      0;
    left:     0;
    z-index:  1;
    width:    100%;
    height:   100%;
    padding:  0;
    margin:   0;
    cursor:   inherit;
    opacity:  0;
  }
}

.checkbox-native-control:checked,
.checkbox-native-control:disabled {
  + .checkbox-background {
    transition: checkbox-enter(opacity), checkbox-enter(transform);

    .checkbox-mark-outer {
      transition: checkbox-enter(border-color);
    }

    .checkbox-mark-inner {
      transition: checkbox-enter(transform), checkbox-enter(background-color);
    }
  }
}

.checkbox-disabled {
  cursor:         default;
  pointer-events: none;
}

.checkbox-native-control:checked {
  + .checkbox-background {
    .checkbox-mark-outer {
      //@include theme-prop(border-color, primary);
      //border: 0;
      //transform:  scale(0);
    }

    .checkbox-mark-inner {
      //@include theme-prop(background-color, primary);

      transform:  scale(1);
      transition: checkbox-enter(transform), checkbox-enter(background-color);
    }
  }
}

.checkbox-native-control:disabled {
  + .checkbox-background {
    cursor: default;

    .checkbox-mark-outer {
      border-color: rgba(black, .26);
    }

    .checkbox-mark-inner {
      background-color: rgba(black, .26);
    }
  }
}

.checkbox-native-control:focus {
  + .checkbox-background::before {
    transform:  scale(2, 2);
    transition: checkbox-enter(opacity), checkbox-enter(transform);
    opacity:    .26;
  }
}
