{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dc9e937d84a5154d4bbd","webpack:///./components/base/util.js","webpack:///./components/perfect.js","webpack:///./components/scroll-spy/scrollSpy.js","webpack:///./components/scroll-spy/plugins/catalogueSpy.js","webpack:///./components/ripple/ripple.js","webpack:///./components/base/component.js","webpack:///./components/ripple/util.js"],"names":["getUuid","offset","position","MAX_UUID","isWindow","elem","window","getWindow","nodeType","defaultView","getStyles","element","property","extra","styles","ownerDocument","getComputedStyle","cssValue","getPropertyValue","num","parseFloat","isFinite","getOffsetParent","offsetParent","tagName","toLowerCase","document","documentElement","prefix","_prefix","Math","random","getElementById","isWheel","ua","navigator","userAgent","test","el","docElem","win","doc","getClientRects","length","top","left","rect","getBoundingClientRect","width","height","pageYOffset","clientTop","pageXOffset","clientLeft","offsetXY","parentOffset","util","ScrollSpy","CatalogueSpy","Ripple","Array","prototype","forEach","map","config","scrollEvent","event","process","scrollElement","getConfig","menu","menuClsPrefix","extend","menuSelector","offsets","targets","activeTarget","scrollHeight","extendStyle","createElement","innerHTML","getElementsByTagName","append","addEventListener","immedLoad","initMenus","anchor","generateMenus","menuPanel","$menuPanel","querySelector","menuElements","querySelectorAll","call","e","preventDefault","stopPropagation","currentTarget","dataset","offsetMethod","container","targetEl","parentNode","offsetBase","getScrollTop","scrollTo","blur","pluginConfig","plugins","isArray","plugin","instance","mount","push","refresh","_config","defaultConfig","id","body","autoMethod","method","menus","entries","level","children","depth","parent","text","root","prevLevel","lastNode","index","entry","parseInt","ancestor","html","generateMenusHtml","nodes","menuCls","i","len","node","newChild","className","href","setAttribute","insertBefore","firstChild","getScrollHeight","target","selector","getAttribute","targetSelector","targetBCR","sort","a","b","item","scrollTop","maxScroll","getOffsetHeight","activate","clearActiveCls","isActiveTarget","undefined","queries","split","lastSelector","parentEls","query","catalog","it","join","$link","classList","add","scrollMenu","activeEls","remove","removeEventListener","unmount","max","innerHeight","animation","resizeEvt","reg","scrollSpy","menuHeight","clientHeight","style","transform","maxHeight","adjustMenuHeight","handleScroll","console","info","step","prevent","maxOffset","upDown","detail","wheelDelta","y","exec","abs","min","menuRect","parentElement","bottom","classes","ELEMENT","UNBOUNDED","FOCUSED","ACTIVE","INACTIVE","cssVar","VAR_SIZE","VAR_LEFT","VAR_TOP","VAR_SCALE","VAR_TRANSLATE_START","VAR_TRANSLATE_END","numbers","PADDING","INITIAL_ORIGIN_SCALE","DEACTIVATION_TIMEOUT_MS","DEACTIVATION_MS","DEACTIVATION_ACTIVATION_PAIRS","mouseup","pointerup","touchend","keyup","isUnbounded","ripple","unbounded","matches","HTMLElement","isSupportsCssVars","isActive","isDisabled","disabled","addClass","removeClass","registerImpactHandler","evtType","handler","deregisterImpactHandler","registerResizeHandler","deregisterResizeHandler","updateCssVariable","varName","value","setProperty","removeCssVariable","removeProperty","computeBoundingRect","getWindowPageOffset","x","isActivated","hasDeactivationUXRun","wasActivatedByPointer","wasElementMadeActive","activationStartTime","activationEvent","isProgrammatic","adapter","createAdapter","layoutFrame","rippleSize","activationState","resetActivationState","duration","initialSize","maxRadius","unboundedCoords","scale","activationTimer","deactivationRemovalTimer","activationAnimationHasEnded","activationTimerCallback","runDeactivationAnimation","listenerInfos","deactivate","focus","listeners","requestAnimationFrame","_init","isSupported","addEventListeners","layoutInternal","cancelAnimationFrame","rippleRect","maxDim","diameter","sqrt","pow","updateCssVariableValue","round","Object","keys","k","layout","type","Date","now","animateActivation","translateStart","translateEnd","getTranslationCoords","startPoint","endPoint","clearTimeout","rmActivationClasses","setTimeout","activationHasEnded","evtObject","state","animateDeactivation","actualActivationType","expectedActivationType","needsDeactivationUX","needsActualDeactivation","Component","key","init","bubbles","cancelable","evt","CustomEvent","createEvent","initCustomEvent","dispatchEvent","supportsCssVariables_","supportsPassive_","detectEdgePseudoVarBug","windowObj","appendChild","computedStyle","hasPseudoVarBug","borderTopStyle","supportsCssVariables","forceRefresh","supportsFunctionPresent","CSS","supports","explicitlySupportsCssVars","weAreFeatureDetectingSafari10plus","applyPassive","globalObj","passive","getMatchesProperty","HTMLElementPrototype","filter","p","pop","getNormalizedEventCoords","ev","pageOffset","clientRect","documentX","documentY","normalizedX","normalizedY","changedTouches","pageX","pageY"],"mappings":"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","file":"perfect.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"perfect\"] = factory();\n\telse\n\t\troot[\"perfect\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dc9e937d84a5154d4bbd","// 提供工具类方法\n\nconst MAX_UUID = 1000000;\n\nfunction isWindow(elem) {\n  return elem != null && elem === elem.window;\n}\n\nfunction getWindow(elem) {\n  return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\n/**\n * getStyles\n * @param {type} element\n * @param {type} property\n * @returns {styles}\n */\nfunction getStyles(element, property, extra) {\n  const styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n  if (property) {\n    const cssValue = styles.getPropertyValue(property) || styles[property];\n    if (extra) {\n      const num = parseFloat(cssValue);\n      return extra === true || isFinite(num) ? num || 0 : cssValue;\n    }\n    return cssValue;\n  }\n  return styles;\n}\n\nfunction getOffsetParent(elem) {\n  /* eslint-disable prefer-destructuring */\n  let offsetParent = elem.offsetParent;\n\n  while (offsetParent && elem.tagName.toLowerCase() !== 'html' &&\n  getStyles(offsetParent, 'position') === 'static') {\n    offsetParent = offsetParent.offsetParent;\n  }\n  return offsetParent || document.documentElement;\n}\n\n/**\n * @description 生成唯一的 dom uuid\n * @param {string} prefix 前缀\n * @return {*} uuid\n */\nexport function getUuid(prefix) {\n  let _prefix = prefix;\n  do {\n    // eslint-disable-next-line no-bitwise\n    _prefix += ~~(Math.random() * MAX_UUID); // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(_prefix));\n\n  return _prefix;\n}\n\n// 根据浏览器设置其鼠标滑轮事件\nexport const isWheel = (() => {\n  // compatibility: mouse wheel event\n  // http://www.w3help.org/zh-cn/causes/SD9015\n  const ua = navigator.userAgent;\n  // ie 11 /gecko/i.test(ua) value is true ,so need to judge /firefox/i.test(ua)\n  if (/gecko/i.test(ua) && !(/webkit/i.test(ua)) && (/firefox/i.test(ua))) { // Firefox\n    return false;\n  }\n  // IE Safari Chrome Opera\n  return true;\n})();\n\n/**\n * 返回元素 offset\n * 不支持隐藏的元素\n * 参考 jQuery 实现\n * https://github.com/jquery/jquery/blob/master/src/offset.js\n * @param el\n * @returns {*}\n */\nexport function offset(el) {\n  if (!el) {\n    return;\n  }\n\n  let docElem, win, doc;\n\n  // Support: IE <=11 only\n  // Running getBoundingClientRect on a\n  // disconnected node in IE throws an error\n  if (!el.getClientRects().length) {\n    return {top: 0, left: 0};\n  }\n\n  const rect = el.getBoundingClientRect();\n\n  // Make sure element is not hidden (display: none)\n  if (rect.width || rect.height) {\n    doc = el.ownerDocument;\n    win = getWindow(doc);\n    docElem = doc.documentElement;\n\n    return {\n      top: rect.top + win.pageYOffset - docElem.clientTop,\n      left: rect.left + win.pageXOffset - docElem.clientLeft,\n    };\n  }\n  return rect;\n}\n\n/**\n * 返回其 position 坐标\n * @param elem\n * @return {*}\n */\nexport function position(elem) {\n  if (!elem) {\n    return null;\n  }\n\n  let offsetParent, offsetXY,\n    parentOffset = {top: 0, left: 0};\n\n  if (getStyles(elem, 'position') === 'fixed') {\n    offsetXY = elem.getBoundingClientRect();\n  } else {\n    offsetParent = getOffsetParent(elem);\n    offsetXY = offset(elem);\n    if (elem.tagName.toLowerCase() !== 'html') {\n      parentOffset = offset(offsetParent);\n    }\n    parentOffset.top += getStyles(offsetParent, 'borderTopWidth', true);\n    parentOffset.left += getStyles(offsetParent, 'borderLeftWidth', true);\n  }\n\n  return {\n    top: offsetXY.top - parentOffset.top - getStyles(elem, 'marginTop', true),\n    left: offsetXY.left - parentOffset.left - getStyles(elem, 'marginLeft', true),\n  };\n}\n\nconst util = {\n  getUuid,\n  isWheel,\n  offset,\n  position,\n};\n\nexport default util;\n\n\n\n// WEBPACK FOOTER //\n// ./components/base/util.js","import ScrollSpy from './scroll-spy/scrollSpy';\nimport CatalogueSpy from './scroll-spy/plugins/catalogueSpy';\nimport Ripple from './ripple/ripple';\n\nexport {\n  ScrollSpy,\n  CatalogueSpy,\n  Ripple\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/perfect.js","import {getUuid, isWheel, offset, position} from '../base/util';\n\nconst win = window;\nconst doc = document;\nconst {forEach, map} = Array.prototype;\n\nclass ScrollSpy {\n  static defaultConfig = {\n    offset: 0,\n    method: 'auto',\n    menu: '', // 菜单导航\n    menuCls: null, // 自定义菜单样式\n    menuClsPrefix: 'menu', // 菜单样式前缀\n    container: null, // 需要监听的内容容器\n    immedLoad: true, // 是否立即监听，如果设为 false， 则通过滑动鼠标来激活监听\n    prefix: 'menu-', // 导航目录前缀\n    anchor: true, // 是否用锚点来控制，默认用锚点处理\n    animation: true, // 是否开启动画\n    extend: false, // 默认菜单没有展开\n  };\n\n  constructor(element, config = {}) {\n    this.element = element;\n    this.scrollElement = element.tagName === 'BODY' ? win : element;\n    this.config = this.getConfig(config);\n    const {menu, menuClsPrefix, extend} = this.config;\n    // 菜单 目录 等选择器\n    this.menuSelector = `${menu} .${menuClsPrefix}-title`;\n    this.offsets = [];\n    this.targets = [];\n    this.activeTarget = null;\n    this.scrollHeight = 0;\n\n    // 如果默认不展开，则用样式来控制\n    if (!extend) {\n      const extendStyle = doc.createElement('style');\n      extendStyle.innerHTML = `\n          .menu-catalogue .menu-catalogue {\n            display: none;\n          }\n          .active + .menu-catalogue {\n            display: block;\n          }`;\n      doc.getElementsByTagName('head')[0].append(extendStyle);\n    }\n\n    // 添加事件，页面滚动时，处理目录和内容对应坐标\n    this.scrollElement.addEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.scrollEvent, false);\n    const {immedLoad, initMenus, anchor} = this.config;\n    // 需要根据内容动态创建菜单列表\n    if (initMenus) {\n      this.generateMenus();\n    }\n\n    // 菜单面板\n    this.menuPanel = `${menu} .${menuClsPrefix}.${menuClsPrefix}-catalogue`;\n    this.$menuPanel = doc.querySelector(this.menuPanel);\n\n    // 不用锚点处理的情况\n    if (anchor === false) {\n      // fixme 待改进，改成 事件代理模式\n      const menuElements = doc.querySelectorAll(this.menuSelector);\n      forEach.call(menuElements, (element) => {\n        element.addEventListener('click', (e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const el = e.currentTarget;\n          const {menu} = el.dataset;\n          const {offsetMethod, container} = this.config;\n          const offsetXY = this.config.offset;\n\n          const targetEl = doc.querySelector(`${container} [data-target=\"${menu}\"]`).parentNode;\n          const top = offsetMethod === 'offset' ? offset(targetEl).top : position(targetEl).top;\n          const offsetBase = offsetMethod === 'position' ? this.getScrollTop() : 0;\n\n          // fixme\n          this.scrollElement.scrollTo(0, top + offsetBase - offsetXY);\n          el.blur();\n          this.process();\n        }, false);\n      });\n    }\n\n    // 加载插件\n    const {pluginConfig} = this.config;\n    let {plugins} = this.config;\n    if (plugins) {\n      if (!Array.isArray(plugins)) {\n        plugins = [plugins];\n      }\n      this.plugins = [];\n      const {container} = this.config;\n      plugins.forEach((plugin) => {\n        // 把当前实例传给插件\n        const instance = new plugin(this, pluginConfig);\n        instance.mount();\n        this.plugins.push(instance);\n      });\n    }\n\n    // 显示菜单\n    // doc.querySelector(menu).style.display = 'block';\n    if (immedLoad) {\n      this.refresh();\n      this.process();\n    }\n  }\n\n  getConfig(config) {\n    const _config = {...ScrollSpy.defaultConfig, ...config};\n\n    const {menu} = _config;\n    let {container} = _config;\n\n    if (typeof menu !== 'string') { // dom 对象\n      let {id} = menu;\n      if (!id) {\n        id = getUuid('scrollspy');\n        menu.id = id;\n      }\n      _config.menu = `#${id}`;\n    }\n\n    if (!container) {\n      container = doc.body; // 默认取 body\n    }\n    if (typeof container !== 'string') {\n      let {id} = container;\n      if (!id) {\n        id = getUuid('scrollspy');\n        container.id = id;\n      }\n      _config.container = `#${id}`;\n    }\n\n    const autoMethod = this.scrollElement !== this.scrollElement.window ?\n      'position' :\n      'offset';\n\n    const offsetMethod = _config.method === 'auto' ?\n      autoMethod :\n      _config.method;\n\n    _config.offsetMethod = offsetMethod;\n\n    return _config;\n  }\n\n  /**\n   * 动态创建菜单\n   */\n  generateMenus() {\n    const menus = this.element.querySelectorAll('h1,h2,h3,h4,h5,h6');\n    // 初始化根节点\n    const entries = {\n      level: 0,\n      children: [],\n      depth: 0,\n      parent: null,\n      text: null,\n      root: true\n    };\n\n    // 前一个元素 level\n    let prevLevel = 0;\n    // 上一个节点\n    let lastNode = null;\n\n    forEach.call(menus, (el, index) => {\n      let entry = null;\n      const level = 7 - parseInt(el.tagName[1], 10);\n      const text = el.innerHTML;\n\n      if (index === 0) {\n        // 初始化第一个元素\n        entry = {\n          level,\n          children: [],\n          depth: 1,\n          parent: entries,\n          text,\n          el\n        };\n        entries.children.push(entry);\n      } else {\n        if (level === prevLevel) { // 相等的话\n          entry = {\n            level,\n            children: [],\n            depth: lastNode.depth,\n            parent: lastNode.parent,\n            text,\n            el\n          };\n          lastNode.parent.children.push(entry);\n        } else if (level < prevLevel) { // 如果当前级别小于前一个\n          entry = {\n            level,\n            children: [],\n            depth: lastNode.depth + 1,\n            parent: lastNode,\n            text,\n            el\n          };\n          lastNode.children.push(entry);\n        } else { // 如果当前级别大于前一个 查找祖先节点\n          let ancestor = lastNode.parent;\n          while (ancestor.level <= level && !ancestor.root) {\n            ancestor = ancestor.parent;\n          }\n          entry = {\n            level,\n            children: [],\n            depth: ancestor.depth + 1,\n            parent: ancestor,\n            text,\n            el\n          };\n          ancestor.children.push(entry);\n        }\n      }\n      lastNode = entry;\n      prevLevel = level;\n    });\n\n    const html = this.generateMenusHtml(entries.children, this.config.prefix);\n    doc.querySelector(this.config.menu).innerHTML = html;\n  }\n\n  /**\n   * 根据 nodes 节点 生成 html\n   * @param nodes\n   * @param prefix\n   * @return {string}\n   */\n  generateMenusHtml(nodes, prefix) {\n    const {menuClsPrefix, menuCls} = this.config;\n    let html = '';\n    if (nodes && nodes.length > 0) {\n      html = `<ul class=\"${menuClsPrefix} ${menuClsPrefix}-catalogue${menuCls ? ` ${menuCls}` : ''}\">`;\n      for (let i = 0, len = nodes.length; i < len; i++) {\n        const node = nodes[i];\n        // 为对应的内容加锚点\n        const newChild = document.createElement('a');\n        newChild.id = prefix + (i + 1);\n        newChild.className = `${menuClsPrefix}-anchor`;\n        if (this.config.anchor) {\n          newChild.href = `#${prefix + (i + 1)}`;\n        } else {\n          newChild.dataset.menu = `${prefix + (i + 1)}`;\n        }\n\n        newChild.setAttribute('aria-hidden', true);\n        node.el.insertBefore(newChild, node.el.firstChild);\n\n        html += '<li>';\n        if (this.config.anchor) {\n          html += `<a class=\"${menuClsPrefix}-title\" href=\"#${prefix}${i + 1}\">${node.text}</a>`;\n        } else { // 用 data-target 来控制，需要结合 js 来控制\n          html += `<a class=\"${menuClsPrefix}-title\" data-target=\"${prefix}${i + 1}\" href=\"#\">${node.text}</a>`;\n        }\n        if (node.children && node.children.length > 0) {\n          html += this.generateMenusHtml(node.children, `${prefix}${i + 1}-`);\n        }\n        html += '</li>';\n      }\n      html += '</ul>';\n    }\n    return html;\n  }\n\n  /**\n   * 滚动页面时，刷新相关数据\n   */\n  refresh() {\n    const {offsetMethod} = this.config;\n    const offsetBase = offsetMethod === 'position' ? this.getScrollTop() : 0;\n\n    this.offsets = [];\n    this.targets = [];\n    this.scrollHeight = this.getScrollHeight();\n\n\n    // 把滚动监听的元素和坐标保存到offsets和targets中\n    const menuElements = doc.querySelectorAll(this.menuSelector);\n\n    map.call(menuElements, (element) => {\n      // 目标元素\n      let target = null;\n      const {anchor, container} = this.config;\n      const selector = anchor ? element.getAttribute('href') : element.dataset.menu;\n      const targetSelector = anchor ?\n        element.getAttribute('href') :\n        `${container} [data-target=\"${element.dataset.menu}\"]`;\n\n      if (targetSelector) {\n        target = doc.querySelector(targetSelector).parentNode;\n        const targetBCR = target.getBoundingClientRect();\n        if (targetBCR.width || targetBCR.height) {\n          return [\n            (offsetMethod === 'offset' ? offset(target).top : position(target).top) + offsetBase,\n            selector\n          ];\n        }\n      }\n      return null;\n    }).sort((a, b) => {\n      if (!a || !b) {\n        return 0;\n      }\n      return a[0] - b[0];\n    }).forEach((item) => {\n      if (item) {\n        this.offsets.push(item[0]);\n        this.targets.push(item[1]);\n      }\n    });\n  }\n\n  // 鼠标滚动事件\n  scrollEvent = (event) => {\n    this.process();\n  };\n\n  /**\n   * 滚动时触发该方法\n   * @returns {boolean|*}\n   */\n  process() {\n    // 需要加 1 微调\n    const scrollTop = this.getScrollTop() + this.config.offset + 1;\n    const scrollHeight = this.getScrollHeight();\n    const maxScroll = this.config.offset\n      + scrollHeight\n      - this.getOffsetHeight();\n\n    // 不相等的话，重新刷新，比如改变页面窗口后\n    if (this.scrollHeight !== scrollHeight) {\n      this.refresh();\n    }\n\n    // 滑到底部\n    if (scrollTop >= maxScroll) {\n      // 取最后一个\n      const target = this.targets[this.targets.length - 1];\n\n      if (this.activeTarget !== target) {\n        this.activate(target);\n      }\n      return;\n    }\n\n    // 滑到头部\n    if (this.activeTarget && scrollTop < this.offsets[0] && this.offsets[0] > 0) {\n      this.activeTarget = null;\n      this.clearActiveCls();\n      return;\n    }\n\n    for (let i = this.offsets.length; i--;) {\n      const isActiveTarget = this.activeTarget !== this.targets[i]\n        && scrollTop >= this.offsets[i]\n        && (this.offsets[i + 1] === undefined ||\n          scrollTop < this.offsets[i + 1]);\n\n      if (isActiveTarget) {\n        this.activate(this.targets[i]);\n      }\n    }\n  }\n\n  /**\n   * 设置当前活动的内容\n   * @param target\n   */\n  activate(target) {\n    this.activeTarget = target;\n\n    this.clearActiveCls();\n\n    const {anchor} = this.config;\n    let queries = this.menuSelector.split(',');\n    const lastSelector = []; // 最后一个菜单项，即当前的子节点\n    // 当前选中的和父目录都添加活动样式\n    const parentEls = target.split('-');\n    queries = queries.map((query) => {\n      const selector = [];\n      let catalog = '';\n      parentEls.forEach((it, index) => {\n        if (index === 0) {\n          catalog += it;\n        } else {\n          catalog += `-${it}`;\n          selector.push(anchor ? `${query}[href=\"${catalog}\"]` : `${query}[data-menu=\"${catalog}\"]`);\n        }\n      });\n      lastSelector.push(selector[selector.length - 1]);\n      return selector.join(',');\n    });\n\n    const $link = doc.querySelectorAll(queries.join(','));\n\n    for (let i = 0, len = $link.length; i < len; i++) {\n      $link[i].classList.add('active');\n    }\n\n    this.plugins.forEach((plugin) => {\n      if (typeof plugin.scrollMenu === 'function') {\n        plugin.scrollMenu(lastSelector);\n      }\n    });\n\n    // todo 事件，待补充\n\n    /* $(this._scrollElement).trigger(Event.ACTIVATE, {\n     relatedTarget: target\n     }) */\n  }\n\n  clearActiveCls() {\n    // 删除当前活动样式\n    const activeEls = doc.querySelectorAll(`${this.menuSelector}.active`);\n    if (activeEls) {\n      for (let i = 0, len = activeEls.length; i < len; i++) {\n        activeEls[i].classList.remove('active');\n      }\n    }\n  }\n\n  // 卸载\n  unmount() {\n    // $.removeData(this._element, DATA_KEY)\n    this.scrollElement.removeEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.scrollEvent, false);\n\n    this.element = null;\n    this.scrollElement = null;\n    this.config = null;\n    this.menu = null;\n    this.menuSelector = null;\n    this.container = null;\n    this.offsets = null;\n    this.targets = null;\n    this.activeTarget = null;\n    this.scrollHeight = null;\n\n    // 卸载插件\n    if (this.plugins) {\n      this.plugins.forEach((plugin) => {\n        plugin.unmount();\n      });\n      this.plugins = null;\n    }\n  }\n\n  getScrollTop() {\n    return this.scrollElement === win ?\n      this.scrollElement.pageYOffset :\n      this.scrollElement.scrollTop;\n  }\n\n  getScrollHeight() {\n    return this.scrollElement.scrollHeight ||\n      Math.max(\n        doc.body.scrollHeight,\n        doc.documentElement.scrollHeight\n      );\n  }\n\n  getOffsetHeight() {\n    return this.scrollElement === win ?\n      win.innerHeight :\n      this.scrollElement.getBoundingClientRect().height;\n  }\n\n}\n\nexport default ScrollSpy;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll-spy/scrollSpy.js","import util from '../../base/util';\n\nconst {isWheel} = util;\n\nconst win = window;\nconst doc = document;\nconst resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize';\n\nconst reg = /translateY\\(([-\\w]+)\\)/;\n\nclass CatalogueSpy {\n  static defaultConfig = {\n    menuHeight: null, // 设置菜单高度，如果不设置，则取当前浏览器可视高度\n    step: 30, // 滚动鼠标，菜单滑动步长\n  };\n\n  constructor(scrollSpy, config = {}) {\n    this.scrollSpy = scrollSpy;\n    this.config = {...CatalogueSpy.defaultConfig, ...config};\n\n    let {menuHeight} = this.config;\n    if (!menuHeight) {\n      menuHeight = document.documentElement.clientHeight - 64;\n      this.config.menuHeight = menuHeight;\n    }\n\n    const {$menuPanel} = scrollSpy;\n    $menuPanel.style.transform = 'translateY(0)';\n    $menuPanel.style.maxHeight = `${menuHeight}px`;\n    this.$menuPanel = $menuPanel;\n\n    win.addEventListener(resizeEvt, this.adjustMenuHeight, false);\n  }\n\n  // 调整菜单最大高度\n  adjustMenuHeight = () => {\n    const menuHeight = doc.documentElement.clientHeight - 64;\n    this.$menuPanel.style.maxHeight = `${menuHeight}px`;\n  };\n\n  mount() {\n    // fixme 待改进，改成 scrollSpy 触发该事件，参考 web-guide 项目\n    // http://www.zhangxinxu.com/wordpress/2013/04/js-mousewheel-dommousescroll-event/\n    this.$menuPanel.addEventListener(isWheel ? 'mousewheel' : 'DOMMouseScroll', this.handleScroll(true), false);\n  }\n\n  handleScroll = (prevent) => {\n    return (event) => {\n      const {scrollHeight, clientHeight} = this.$menuPanel;\n      const {step} = this.config;\n      this.maxOffset = scrollHeight - clientHeight; // 最大滚动的高度\n\n      if (prevent && this.maxOffset > 0) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      // 判断鼠标滑轮向上还是向下滑动\n      let upDown;\n      const {detail, wheelDelta} = event;\n      if (detail) {\n        if (detail < 0) { // up\n          upDown = 'up';\n        } else if (detail > 0) { // down\n          upDown = 'down';\n        }\n      } else if (wheelDelta) { //\n        if (wheelDelta > 0) { // up\n          upDown = 'up';\n        }\n        if (wheelDelta < 0) { // down\n          upDown = 'down';\n        }\n      }\n\n      const {transform} = this.$menuPanel.style;\n\n      let y = reg.exec(transform);\n      y = y ? parseFloat(y[1], 10) : 0;\n\n      if ((upDown === 'up' && y === 0) || (upDown === 'down' && Math.abs(y) === this.maxOffset)) {\n        return;\n      }\n\n      if (upDown === 'up' && y < 0) {\n        this.$menuPanel.style.transform = `translateY(${Math.min(y + step, 0)}px)`;\n      } else if (upDown === 'down' && Math.abs(y) < this.maxOffset) {\n        this.$menuPanel.style.transform = `translateY(${Math.max(y - step, -this.maxOffset)}px)`;\n      }\n    };\n  };\n\n  // 当定位到某一个菜单项时，而由于限制了高度，该菜单有可能不在可视范围内\n  scrollMenu = (lastSelector) => {\n    const {step} = this.config;\n    const {$menuPanel} = this;\n    const {scrollHeight, clientHeight} = $menuPanel;\n    let maxOffset = scrollHeight - clientHeight; // 最大滚动的高度\n    if (maxOffset === 0) {\n      return;\n    }\n    maxOffset += 1; // 由于计算偏差，需要微调1个像素\n    // 如果当前菜单项隐藏，则向上拉\n    // Fixme 注意这里还需计算 $menuPanel.parentElement padding 和 border 的值，待处理\n    const menuRect = $menuPanel.parentElement.getBoundingClientRect();\n    const currentTarget = doc.querySelectorAll(lastSelector.join(','));\n    if (currentTarget) {\n      Array.prototype.forEach.call(currentTarget, (el) => {\n        let rect = el.getBoundingClientRect();\n        while (rect.top > 0 && rect.bottom > 0 && (rect.top < menuRect.top || rect.bottom > menuRect.bottom)) { // 向上移动\n          const {transform} = $menuPanel.style;\n          let y = reg.exec(transform);\n          y = y ? parseFloat(y[1], 10) : 0;\n          if (rect.top < menuRect.top) {\n            $menuPanel.style.transform = `translateY(${Math.min(y + step, 0)}px)`;\n          } else {\n            $menuPanel.style.transform = `translateY(${Math.max(y - step, -maxOffset)}px)`;\n          }\n          rect = el.getBoundingClientRect();\n        }\n      });\n    }\n  };\n\n  unmount() {\n    console.info('待补充');\n    win.removeEventListener(resizeEvt, this.adjustMenuHeight, false);\n  }\n\n}\n\nexport default CatalogueSpy;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll-spy/plugins/catalogueSpy.js","import Component from '../base/component';\nimport {\n  supportsCssVariables, applyPassive,\n  getMatchesProperty, getNormalizedEventCoords,\n} from './util';\n\n// 定义常量\nconst classes = {\n  ELEMENT: 'ripple-impact',\n  UNBOUNDED: 'ripple-unbounded',\n  FOCUSED: 'ripple-impact-focused',\n  ACTIVE: 'ripple-impact-active',\n  INACTIVE: 'ripple-impact-inactive',\n};\n\nconst cssVar = {\n  VAR_SIZE: '--ripple-size',\n  VAR_LEFT: '--ripple-left',\n  VAR_TOP: '--ripple-top',\n  VAR_SCALE: '--ripple-scale',\n  VAR_TRANSLATE_START: '--ripple-translate-start',\n  VAR_TRANSLATE_END: '--ripple-translate-end',\n};\n\nconst numbers = {\n  PADDING: 10, // 波纹 padding\n  INITIAL_ORIGIN_SCALE: 0.6, // 初始波纹缩放比例\n  DEACTIVATION_TIMEOUT_MS: 225, // 从活动状态到结束持续的时间，看 scss 变量 $ripple-translate-duration\n  DEACTIVATION_MS: 150, // 非活动状态到结束持续的时间，看 scss 变量 $ripple-fade-out-duration\n};\n\n// 非活动状态和活动状态对应\nconst DEACTIVATION_ACTIVATION_PAIRS = {\n  mouseup: 'mousedown',\n  pointerup: 'pointerdown',\n  touchend: 'touchstart',\n  keyup: 'keydown',\n  blur: 'focus',\n};\n\nclass Ripple extends Component {\n\n  /**\n   * 静态方法实例化 Ripple 组件\n   * @param element\n   * @param isUnbounded\n   * @returns {Ripple}\n   */\n  static mount(element, {isUnbounded = undefined} = {}) {\n    const ripple = new Ripple(element);\n    if (isUnbounded !== undefined) {\n      ripple.unbounded = /** @type {boolean} */ isUnbounded;\n    }\n    return ripple;\n  }\n\n  /**\n   * @param {Ripple} instance\n   * @return {RippleAdapter}\n   */\n  static createAdapter(instance) {\n    const matches = getMatchesProperty(HTMLElement.prototype);\n\n    // 封装一些适配器方法\n    return {\n      isSupportsCssVars: () => supportsCssVariables(window),\n      isUnbounded: () => instance.unbounded,\n      isActive: () => instance.element[matches](':active'),\n      isDisabled: () => instance.disabled,\n      addClass: (className) => instance.element.classList.add(className),\n      removeClass: (className) => instance.element.classList.remove(className),\n      registerImpactHandler: (evtType, handler) =>\n        instance.element.addEventListener(evtType, handler, applyPassive()),\n      deregisterImpactHandler: (evtType, handler) =>\n        instance.element.removeEventListener(evtType, handler, applyPassive()),\n      registerResizeHandler: (handler) => window.addEventListener('resize', handler),\n      deregisterResizeHandler: (handler) => window.removeEventListener('resize', handler),\n      updateCssVariable: (varName, value) => instance.element.style.setProperty(varName, value),\n      removeCssVariable: (varName) => instance.element.style.removeProperty(varName),\n      computeBoundingRect: () => instance.element.getBoundingClientRect(),\n      getWindowPageOffset: () => ({x: window.pageXOffset, y: window.pageYOffset}),\n    };\n  }\n\n  /**\n   * 重置 Ripple 活动状态\n   * @returns {}\n   */\n  static resetActivationState() {\n    return {\n      isActivated: false, // 当前是否为活动状态\n      hasDeactivationUXRun: false, // 是否有取消激活运行状态\n      wasActivatedByPointer: false, // 是否是通过鼠标或触摸来激活(也可以调用方法激活)\n      wasElementMadeActive: false, // 元素是否处于活动状态，即 element.matches(':active') 为 true\n      activationStartTime: 0, // 开始时间\n      activationEvent: null, // 当前事件对象 event\n      isProgrammatic: false, // 是否在当前活动进程中\n    };\n  }\n\n  constructor(...config) {\n    super(...config);\n    // 用来处理是否设置了 disabled\n    this.disabled = false;\n\n    // 是否是无界限的 Ripple\n    this.unbounded = false;\n\n    // 创建适配器\n    this.adapter = Ripple.createAdapter(this);\n\n    // 用来处理 requestAnimationFrame 返回的值\n    this.layoutFrame = 0;\n\n    // Ripple Rect size\n    this.rippleSize = {width: 0, height: 0};\n\n    // 初始化 Ripple 默认活动状态\n    this.activationState = Ripple.resetActivationState();\n\n    // 动画持续的时长\n    this.duration = 0;\n\n    //\n    this.initialSize = 0;\n\n    // 波纹扩散最大的圆弧\n    this.maxRadius = 0;\n\n    // 无解限制坐标\n    this.unboundedCoords = {\n      left: 0,\n      top: 0,\n    };\n\n    // 缩放比例\n    this.scale = 0;\n\n    // activation setTimeout Id\n    this.activationTimer = null;\n\n    // deactivation removal setTimeout Id\n    this.deactivationRemovalTimer = null;\n\n    // 动画是否结束\n    this.activationAnimationHasEnded = false;\n\n    // activation setTimeout 函数\n    this.activationTimerCallback = () => {\n      this.activationAnimationHasEnded = true;\n      this.runDeactivationAnimation();\n    };\n\n    // 事件与监听函数名称对应\n    this.listenerInfos = [\n      {activate: 'touchstart', deactivate: 'touchend'},\n      {activate: 'pointerdown', deactivate: 'pointerup'},\n      {activate: 'mousedown', deactivate: 'mouseup'},\n      {activate: 'keydown', deactivate: 'keyup'},\n      {focus: 'focus', blur: 'blur'},\n    ];\n\n    // 监听函数 Map\n    this.listeners = {\n      activate: (e) => this.activate(e),\n      deactivate: (e) => this.deactivate(e),\n      focus: () => requestAnimationFrame(\n        () => this.adapter.addClass(classes.FOCUSED),\n      ),\n      blur: () => requestAnimationFrame(\n        () => this.adapter.removeClass(classes.FOCUSED),\n      ),\n    };\n\n    this._init();\n  }\n\n  // /**\n  //  * @returns {boolean}\n  //  */\n  // get unbounded() {\n  //   return this.unbounded;\n  // }\n  //\n  // /**\n  //  * @param {boolean} unbounded\n  //  */\n  // set unbounded(unbounded) {\n  //   const {UNBOUNDED} = classes;\n  //   this.unbounded = Boolean(unbounded);\n  //   if (this.unbounded) {\n  //     this.element.classList.add(UNBOUNDED);\n  //   } else {\n  //     this.element.classList.remove(UNBOUNDED);\n  //   }\n  // }\n\n  // 是否支持 css 变量\n  isSupported() {\n    return this.adapter.isSupportsCssVars();\n  }\n\n  // 初始化组件\n  _init() {\n    if (!this.isSupported()) {\n      return;\n    }\n\n    this.addEventListeners();\n\n    const {ELEMENT, UNBOUNDED} = classes;\n    requestAnimationFrame(() => {\n      this.adapter.addClass(ELEMENT);\n      if (this.adapter.isUnbounded()) {\n        this.adapter.addClass(UNBOUNDED);\n      }\n      this.layoutInternal();\n    });\n  }\n\n  /**\n   * 重新布局，重置波纹参数\n   * 比如当窗口改变时，调用该方法\n   */\n  layout() {\n    if (this.layoutFrame) {\n      cancelAnimationFrame(this.layoutFrame);\n    }\n    this.layoutFrame = requestAnimationFrame(() => {\n      this.layoutInternal();\n      this.layoutFrame = 0;\n    });\n  }\n\n  // 初始化波纹个参数\n  layoutInternal() {\n    this.rippleRect = this.adapter.computeBoundingRect();\n    const {width, height} = this.rippleRect;\n\n    // 波纹大小\n    const maxDim = Math.max(width, height);\n    // 波纹直径\n    const diameter = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n\n    // 初始波纹大小，取波纹大小的 60%\n    this.initialSize = maxDim * numbers.INITIAL_ORIGIN_SCALE;\n\n    // 波纹扩散圆弧，直径 + padding\n    this.maxRadius = diameter + numbers.PADDING;\n    // 计算缩放比例\n    this.scale = this.maxRadius / this.initialSize;\n    this.duration = 1000 * Math.sqrt(this.maxRadius / 1024);\n    this.updateCssVariableValue();\n  }\n\n  updateCssVariableValue() {\n    const {\n      VAR_SIZE, VAR_LEFT, VAR_TOP, VAR_SCALE,\n    } = cssVar;\n\n    this.adapter.updateCssVariable(VAR_SIZE, `${this.initialSize}px`);\n    this.adapter.updateCssVariable(VAR_SCALE, this.scale);\n\n    if (this.adapter.isUnbounded()) {\n      const {width, height} = this.rippleRect;\n      this.unboundedCoords = {\n        left: Math.round((width / 2) - (this.initialSize / 2)),\n        top: Math.round((height / 2) - (this.initialSize / 2)),\n      };\n\n      this.adapter.updateCssVariable(VAR_LEFT, `${this.unboundedCoords.left}px`);\n      this.adapter.updateCssVariable(VAR_TOP, `${this.unboundedCoords.top}px`);\n    }\n  }\n\n  // 设置监听事件\n  addEventListeners() {\n    this.listenerInfos.forEach((info) => {\n      Object.keys(info).forEach((k) => {\n        this.adapter.registerImpactHandler(info[k], this.listeners[k]);\n      });\n    });\n\n    // 注册 resize 事件\n    this.adapter.registerResizeHandler(this.layout);\n  }\n\n  // 删除事件\n  removeEventListeners() {\n    this.listenerInfos.forEach((info) => {\n      Object.keys(info).forEach((k) => {\n        this.adapter.deregisterImpactHandler(info[k], this.listeners[k]);\n      });\n    });\n    this.adapter.deregisterResizeHandler(this.layout);\n  }\n\n  /**\n   * 当 Ripple 处于活动状态时\n   * 对应的事件有 touchstart pointerdown mousedown keydown\n   * @param {Event} e\n   * @private\n   */\n  activate(e) {\n    if (this.adapter.isDisabled()) {\n      return;\n    }\n\n    const {activationState} = this;\n    if (activationState.isActivated) {\n      return;\n    }\n\n    activationState.isActivated = true;\n    activationState.isProgrammatic = e === null;\n    activationState.activationEvent = e;\n    activationState.wasActivatedByPointer = activationState.isProgrammatic ? false : (\n      e.type === 'mousedown' || e.type === 'touchstart' || e.type === 'pointerdown'\n    );\n    activationState.activationStartTime = Date.now();\n\n    requestAnimationFrame(() => {\n      // 对于 keydown 事件需要判断是否当前为活动状态，即 element.matches(':active')\n      // - https://bugs.chromium.org/p/chromium/issues/detail?id=635971\n      // - https://bugzilla.mozilla.org/show_bug.cgi?id=1293741\n      activationState.wasElementMadeActive = (e && e.type === 'keydown') ? this.adapter.isActive() : true;\n      if (activationState.wasElementMadeActive) {\n        this.animateActivation();\n      } else {\n        // 如果元素没有被激活，重置 Ripple 状态\n        this.activationState = Ripple.resetActivationState();\n      }\n    });\n  }\n\n  // 处理 Ripple 动画\n  animateActivation() {\n    const {VAR_TRANSLATE_START, VAR_TRANSLATE_END} = cssVar;\n    const {\n      ACTIVE,\n      INACTIVE,\n    } = classes;\n    const {DEACTIVATION_TIMEOUT_MS} = numbers;\n\n    let translateStart = '';\n    let translateEnd = '';\n\n    if (!this.adapter.isUnbounded()) {\n      const {startPoint, endPoint} = this.getTranslationCoords();\n      translateStart = `${startPoint.x}px, ${startPoint.y}px`;\n      translateEnd = `${endPoint.x}px, ${endPoint.y}px`;\n    }\n\n    this.adapter.updateCssVariable(VAR_TRANSLATE_START, translateStart);\n    this.adapter.updateCssVariable(VAR_TRANSLATE_END, translateEnd);\n    // 取消进行中的 activation 和 deactivation\n    clearTimeout(this.activationTimer);\n    clearTimeout(this.deactivationRemovalTimer);\n    this.rmActivationClasses();\n    this.adapter.removeClass(INACTIVE);\n\n    // 强制重绘，触发动画\n    this.adapter.computeBoundingRect();\n    this.adapter.addClass(ACTIVE);\n    this.activationTimer = setTimeout(() => this.activationTimerCallback(), DEACTIVATION_TIMEOUT_MS);\n  }\n\n  /**\n   * 返回Translation 开始和结束坐标\n   * @returns {{startPoint: ({x: number, y: number}|*), endPoint: {x: number, y: number}}}\n   */\n  getTranslationCoords() {\n    const {activationState} = this;\n    const {activationEvent, wasActivatedByPointer} = activationState;\n    const {width, height} = this.rippleRect;\n\n    let startPoint;\n    if (wasActivatedByPointer) {\n      startPoint = getNormalizedEventCoords(activationEvent,\n        this.adapter.getWindowPageOffset(), this.adapter.computeBoundingRect(),\n      );\n    } else {\n      startPoint = {\n        x: width / 2,\n        y: height / 2,\n      };\n    }\n    // Center the element around the start point.\n    startPoint = {\n      x: startPoint.x - (this.initialSize / 2),\n      y: startPoint.y - (this.initialSize / 2),\n    };\n\n    const endPoint = {\n      x: (width / 2) - (this.initialSize / 2),\n      y: (height / 2) - (this.initialSize / 2),\n    };\n\n    return {startPoint, endPoint};\n  }\n\n  /**\n   * 运行 Deactivation 动画\n   */\n  runDeactivationAnimation() {\n    const {INACTIVE} = classes;\n    const {hasDeactivationUXRun, isActivated} = this.activationState;\n    const activationHasEnded = hasDeactivationUXRun || !isActivated;\n    if (activationHasEnded && this.activationAnimationHasEnded) {\n      this.rmActivationClasses();\n      this.adapter.addClass(INACTIVE);\n      this.deactivationRemovalTimer = setTimeout(() => {\n        this.adapter.removeClass(INACTIVE);\n      }, numbers.DEACTIVATION_MS);\n    }\n  }\n\n  /**\n   * 删除活动状态\n   */\n  rmActivationClasses() {\n    const {ACTIVE} = classes;\n    this.adapter.removeClass(ACTIVE);\n    this.activationAnimationHasEnded = false;\n    this.adapter.computeBoundingRect();\n  }\n\n  /**\n   * 取消活动状态事件\n   * @param e\n   * @private\n   */\n  deactivate(e) {\n    const {activationState} = this;\n    // 如果当前不是活动状态，则取消\n    if (!activationState.isActivated) {\n      return;\n    }\n    // 如果是进行中的取消过程\n    if (activationState.isProgrammatic) {\n      const evtObject = null;\n      const state = {...activationState};\n      requestAnimationFrame(() => this.animateDeactivation(evtObject, state));\n      this.activationState = Ripple.resetActivationState();\n      return;\n    }\n\n    const actualActivationType = DEACTIVATION_ACTIVATION_PAIRS[e.type];\n    const expectedActivationType = activationState.activationEvent.type;\n    // NOTE: Pointer events are tricky - https://patrickhlauke.github.io/touch/tests/results/\n    // Essentially, what we need to do here is decouple the deactivation UX from the actual\n    // deactivation state itself. This way, touch/pointer events in sequence do not trample one\n    // another.\n    const needsDeactivationUX = actualActivationType === expectedActivationType;\n    let needsActualDeactivation = needsDeactivationUX;\n    if (activationState.wasActivatedByPointer) {\n      needsActualDeactivation = e.type === 'mouseup';\n    }\n\n    const state = {...activationState};\n    requestAnimationFrame(() => {\n      if (needsDeactivationUX) {\n        this.activationState.hasDeactivationUXRun = true;\n        this.animateDeactivation(e, state);\n      }\n\n      if (needsActualDeactivation) {\n        this.activationState = Ripple.resetActivationState();\n      }\n    });\n  }\n\n  /**\n   * @param {Event} e\n   * @param {!ActivationStateType} options\n   * @private\n   */\n  animateDeactivation(e, {wasActivatedByPointer, wasElementMadeActive}) {\n    const {FOCUSED} = classes;\n    if (wasActivatedByPointer || wasElementMadeActive) {\n      // Remove class left over by element being focused\n      this.adapter.removeClass(FOCUSED);\n      this.runDeactivationAnimation();\n    }\n  }\n}\n\n\nexport default Ripple;\n\n\n\n// WEBPACK FOOTER //\n// ./components/ripple/ripple.js","/**\n * 组件接口，所有的组件都应该继承该组件\n */\nclass Component {\n\n  /**\n   * 提供静态方法，用来挂载实例化组件\n   * 子组件可以覆盖该方法\n   * @param element\n   * @returns {Component}\n   */\n  static mount(element) {\n    return new Component(element);\n  }\n\n  constructor(element, ...config) {\n    this.element = element;\n    // 设置 config 到 this 上\n    for (const key of config) {\n      this[key] = config[key];\n    }\n    this.init();\n  }\n\n  init() {\n    // 初始化\n    // 子组件可以覆盖该方法，具体实现要初始化的内容\n  }\n\n  // 卸载组件\n  unmount() {\n    // 子组件可以盖该方法\n  }\n\n  /**\n   * 公共方法，添加注册事件\n   * @param evtType\n   * @param handler\n   */\n  listen(evtType, handler) {\n    this.element.addEventListener(evtType, handler);\n  }\n\n  /**\n   * 公共方法，卸载已注册的事件\n   * @param evtType\n   * @param handler\n   */\n  unlisten(evtType, handler) {\n    this.element.removeEventListener(evtType, handler);\n  }\n\n  /**\n   * 公共方法，创建并分发事件\n   * @param evtType 事件名称\n   * @param detail 当事件初始化时传递的数据\n   * @param bubbles 表明该事件是否会冒泡\n   * @param cancelable 表明该事件是否可以被取消\n   */\n  emit(evtType, detail, bubbles = false, cancelable = false) {\n    let evt;\n    if (typeof CustomEvent === 'function') {\n      evt = new CustomEvent(evtType, {\n        detail,\n        bubbles,\n        cancelable,\n      });\n    } else {\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(evtType, bubbles, cancelable, detail);\n    }\n\n    this.element.dispatchEvent(evt);\n  }\n}\n\nexport default Component;\n\n\n\n// WEBPACK FOOTER //\n// ./components/base/component.js","/**\n * 是否支持 css 变量（css 自定义属性）\n * @private {boolean|undefined}\n */\nlet supportsCssVariables_;\n\n/**\n * 是否支持事件 passive\n * https://www.cnblogs.com/ziyunfei/p/5545439.html\n * https://github.com/WICG/EventListenerOptions\n * @private {boolean|undefined}\n */\nlet supportsPassive_;\n\n/**\n * 对于 Edge 15 浏览器，伪类设置 css 变量存在 bug\n * @param {!Window} windowObj\n * @return {boolean}\n */\nfunction detectEdgePseudoVarBug(windowObj) {\n  // Detect versions of Edge with buggy var() support\n  // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11495448/\n  const document = windowObj.document;\n  const node = document.createElement('div');\n  node.className = 'ripple-test-edge-var-bug';\n  document.body.appendChild(node);\n\n  // The bug exists if ::before style ends up propagating to the parent element.\n  // Additionally, getComputedStyle returns null in iframes with display: \"none\" in Firefox,\n  // but Firefox is known to support CSS custom properties correctly.\n  // See: https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  const computedStyle = windowObj.getComputedStyle(node);\n  const hasPseudoVarBug = computedStyle !== null && computedStyle.borderTopStyle === 'solid';\n  node.remove();\n  return hasPseudoVarBug;\n}\n\n/**\n * 判断是否支持 css 变量\n * https://caniuse.com/#feat=css-variables\n * 当前支持的浏览器有：\n * Edge 15+ (15对于伪类有 bug)、Firefox 31+ 、Chrome 49+ 、Safari 9.1+、Opera 36+\n * IOS Safari 9.3+ 、(Android 5+: Chromium 62+ Opera 37+ Chrome 62+ FireFox 57+ )\n * @param {!Window} windowObj\n * @param {boolean=} forceRefresh\n * @return {boolean|undefined}\n */\n\nfunction supportsCssVariables(windowObj, forceRefresh = false) {\n  if (typeof supportsCssVariables_ === 'boolean' && !forceRefresh) {\n    return supportsCssVariables_;\n  }\n\n  const supportsFunctionPresent = windowObj.CSS && typeof windowObj.CSS.supports === 'function';\n  if (!supportsFunctionPresent) {\n    return;\n  }\n\n  const explicitlySupportsCssVars = windowObj.CSS.supports('--css-vars', 'yes');\n  // See: https://bugs.webkit.org/show_bug.cgi?id=154669\n  // See: README section on Safari\n  const weAreFeatureDetectingSafari10plus = (\n    windowObj.CSS.supports('(--css-vars: yes)') &&\n    windowObj.CSS.supports('color', '#00000000')\n  );\n\n  if (explicitlySupportsCssVars || weAreFeatureDetectingSafari10plus) {\n    supportsCssVariables_ = !detectEdgePseudoVarBug(windowObj);\n  } else {\n    supportsCssVariables_ = false;\n  }\n  return supportsCssVariables_;\n}\n\n/**\n * 判断浏览器是否支持 passive 事件监听，如果支持，则使用\n * https://www.cnblogs.com/ziyunfei/p/5545439.html\n * https://github.com/WICG/EventListenerOptions\n * @param {!Window=} globalObj\n * @param {boolean=} forceRefresh\n * @return {boolean|{passive: boolean}}\n */\nfunction applyPassive(globalObj = window, forceRefresh = false) {\n  if (supportsPassive_ === undefined || forceRefresh) {\n    let isSupported = false;\n    try {\n      /*eslint-disable getter-return*/\n      globalObj.document.addEventListener('test', null, {get passive() {\n        isSupported = true;\n      }});\n    } catch (e) {\n      /* 不支持*/\n    }\n\n    supportsPassive_ = isSupported;\n  }\n\n  return supportsPassive_ ? {passive: true} : false;\n}\n\n/**\n * 使用 matches (老版本使用 webkitMatchesSelector, msMatchesSelector) 来测试一个选择器是否被浏览器支持，比如 :active 等\n * @param {!Object} HTMLElementPrototype\n * @return {!Array<string>}\n */\nfunction getMatchesProperty(HTMLElementPrototype) {\n  return [\n    'webkitMatchesSelector', 'msMatchesSelector', 'matches',\n  ].filter((p) => p in HTMLElementPrototype).pop();\n}\n\n/**\n * 返回事件基于元素左上角偏移坐标值\n * @param {!Event} ev\n * @param {!{x: number, y: number}} pageOffset\n * @param {!ClientRect} clientRect\n * @return {!{x: number, y: number}}\n */\nfunction getNormalizedEventCoords(ev, pageOffset, clientRect) {\n  const {x, y} = pageOffset;\n  const documentX = x + clientRect.left;\n  const documentY = y + clientRect.top;\n\n  let normalizedX;\n  let normalizedY;\n  // Determine touch point relative to the ripple container.\n  if (ev.type === 'touchstart') {\n    normalizedX = ev.changedTouches[0].pageX - documentX;\n    normalizedY = ev.changedTouches[0].pageY - documentY;\n  } else {\n    normalizedX = ev.pageX - documentX;\n    normalizedY = ev.pageY - documentY;\n  }\n\n  return {x: normalizedX, y: normalizedY};\n}\n\nexport {supportsCssVariables, applyPassive, getMatchesProperty, getNormalizedEventCoords};\n\n\n\n// WEBPACK FOOTER //\n// ./components/ripple/util.js"],"sourceRoot":""}